!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/natify/",n(n.s=5)}([function(t,e,n){"use strict";function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bytesToBase64=s,e.base64ToBytes=h,e.base64encode=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TextEncoder;return s(e.encode(t))},e.base64decode=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new TextDecoder;return e.decode(h(t))};var i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],a=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function r(t){if(t>=a.length)throw new Error("Unable to parse base64 string.");var e=a[t];if(255===e)throw new Error("Unable to parse base64 string.");return e}function s(t){var e,n="",a=t.length;for(e=2;e<a;e+=3)n+=i[t[e-2]>>2],n+=i[(3&t[e-2])<<4|t[e-1]>>4],n+=i[(15&t[e-1])<<2|t[e]>>6],n+=i[63&t[e]];return e===a+1&&(n+=i[t[e-2]>>2],n+=i[(3&t[e-2])<<4],n+="=="),e===a&&(n+=i[t[e-2]>>2],n+=i[(3&t[e-2])<<4|t[e-1]>>4],n+=i[(15&t[e-1])<<2],n+="="),n}function h(t){if(t.length%4!==0)throw new Error("Unable to parse base64 string.");var e=t.indexOf("=");if(-1!==e&&e<t.length-2)throw new Error("Unable to parse base64 string.");for(var n,i=t.endsWith("==")?2:t.endsWith("=")?1:0,a=t.length,s=new Uint8Array(a/4*3),h=0,o=0;h<a;h+=4,o+=3)n=r(t.charCodeAt(h))<<18|r(t.charCodeAt(h+1))<<12|r(t.charCodeAt(h+2))<<6|r(t.charCodeAt(h+3)),s[o]=n>>16,s[o+1]=n>>8&255,s[o+2]=255&n;return s.subarray(0,s.length-i)}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}n.d(e,"a",(function(){return vt}));var s=n(0);function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(s.a)(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=n(1);function l(t){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return!e||"object"!==l(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){var e=Object(u.a)();return function(){var n,i=o(t);if(e){var a=o(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return c(this,n)}}var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function _(t,e,n,i){if(["32f","64"].indexOf(e)>-1&&["32f","64"].indexOf(i)>-1)n.set(t);else{g(e),g(i);var a=function(t,e){var n=function(t){return t};t!=e&&(n=["32f","64"].includes(t)?m:["32f","64"].includes(e)?v:p);return n}(e,i),r={oldMin:Math.pow(2,parseInt(e,10))/2,newMin:Math.pow(2,parseInt(i,10))/2,oldMax:Math.pow(2,parseInt(e,10))/2-1,newMax:Math.pow(2,parseInt(i,10))/2-1};b(e,t,!0);for(var s=0,h=t.length;s<h;s++)n[s]=a(t[s],r);b(i,n,!1)}}function p(t,e){return t=t>0?parseInt(t/e.oldMax*e.newMax,10):parseInt(t/e.oldMin*e.newMin,10)}function m(t,e){return parseInt(t>0?t*e.newMax:t*e.newMin,10)}function v(t,e){return t>0?t/e.oldMax:t/e.oldMin}function g(t){if("32f"!=t&&"64"!=t&&(parseInt(t,10)<"8"||parseInt(t,10)>"53"))throw new Error("Invalid bit depth.")}function b(t,e,n){if("8"==t)for(var i=n?-128:128,a=0,r=e.length;a<r;a++)e[a]=e[a]+=i}var k=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],w=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];function y(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,n={index:0,predicted:0,step:7},i=new Int16Array(2*t.length),a=[],r=0,s=0,h=t.length;s<h;s++){if(s%e==0&&0!=s){var o=S(a,n);i.set(o,r),r+=o.length,a=[]}a.push(t[s])}return i}function I(t,e){for(var n=function(t,e){x(t,e);var n=[];return n.push(255&t),n.push(t>>8&255),n.push(e.index),n.push(0),n}(t[0],e),i=3,a=t.length;i<a;i+=2){var r=x(t[i],e),s=x(t[i+1],e);n.push(s<<4|r)}return n}function S(t,e){var n;e.predicted=(n=t[1]<<8|t[0])>32768?n-65536:n,e.index=t[2],e.step=w[e.index];for(var i=[e.predicted,e.predicted],a=4,r=t.length;a<r;a++){var s=t[a],h=s>>4,o=h<<4^s;i.push(C(o,e)),i.push(C(h,e))}return i}function x(t,e){var n=t-e.predicted,i=0;n>=0?i=0:(i=8,n=-n);var a=w[e.index],r=a>>3;return n>a&&(i|=4,n-=a,r+=a),n>(a>>=1)&&(i|=2,n-=a,r+=a),n>(a>>=1)&&(i|=1,r+=a),function(t,e,n){8&t?n.predicted-=e:n.predicted+=e;n.predicted<-32768?n.predicted=-32768:n.predicted>32767&&(n.predicted=32767);n.index+=k[7&t],n.index<0?n.index=0:n.index>88&&(n.index=88)}(i,r,e),i}function C(t,e){var n=0;return 4&t&&(n+=e.step),2&t&&(n+=e.step>>1),1&t&&(n+=e.step>>2),n+=e.step>>3,8&t&&(n=-n),e.predicted+=n,e.predicted>32767?e.predicted=32767:e.predicted<-32767&&(e.predicted=-32767),function(t,e){e.index+=k[t],e.index<0?e.index=0:e.index>88&&(e.index=88);e.step=w[e.index]}(t,e),e.predicted}var T=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];function z(t){var e,n=~(t=-32768==t?-32767:t)>>8&128;if(n||(t*=-1),t>32635&&(t=32635),t>=256){var i=T[t>>8&127];e=i<<4|t>>i+3&15}else e=t>>4;return 85^e^n}function L(t){var e=0;0!==(128&(t^=85))&&(t&=-129,e=-1);var n=4+((240&t)>>4),i=0;return i=4!=n?1<<n|(15&t)<<n-4|1<<n-5:t<<1|1,8*(i=0===e?i:-i)*-1}function M(t){for(var e=new Int16Array(t.length),n=0,i=t.length;n<i;n++)e[n]=L(t[n]);return e}var A=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],E=[0,132,396,924,1980,4092,8316,16764];function P(t){var e,n;return 0!=(e=t>>8&128)&&(t=-t),(t+=132)>32635&&(t=32635),~(e|(n=A[t>>7&255])<<4|t>>n+3&15)}function O(t){var e,n;return n=E[e=(t=~t)>>4&7]+((15&t)<<e+3),0!=(128&t)&&(n=-n),n}function D(t){for(var e=new Int16Array(t.length),n=0,i=t.length;n<i;n++)e[n]=O(t[n]);return e}function R(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length,a=n;a<i;a+=e)F(t,e,a)}function F(t,e,n){e--;for(var i=0;i<e;i++){var a=t[n+i];t[n+i]=t[n+e],t[n+e]=a,e--}}function U(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,i="",a=e;a<n;){var r=128,s=191,h=!1,o=t[a++];if(o>=0&&o<=127)i+=String.fromCharCode(o);else{var u=0;o>=194&&o<=223?u=1:o>=224&&o<=239?(u=2,224===t[a]&&(r=160),237===t[a]&&(s=159)):o>=240&&o<=244?(u=3,240===t[a]&&(r=144),244===t[a]&&(s=143)):h=!0,o&=(1<<8-u-1)-1;for(var l=0;l<u;l++)(t[a]<r||t[a]>s)&&(h=!0),o=o<<6|63&t[a],a++;h?i+=String.fromCharCode(65533):o<=65535?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode(55296+(o>>10&1023),56320+(1023&o)))}}return i}function B(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0,a=t.length;i<a;){var r=t.codePointAt(i);if(r<128)e[n]=r,n++;else{var s=0,h=0;for(r<=2047?(s=1,h=192):r<=65535?(s=2,h=224):r<=1114111&&(s=3,h=240,i++),e[n]=(r>>6*s)+h,n++;s>0;)e[n]=128|r>>6*(s-1)&63,n++,s--}i++}return n}var j=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t),this.bits=e,this.offset=Math.ceil(e/8),this.max=Math.pow(2,e)-1,this.min=0,this.unpack=this.unpack_,n&&(this.max=Math.pow(2,e)/2-1,this.min=-this.max-1,this.unpack=this.unpackSigned_)}return r(t,[{key:"pack",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e=this.clamp_(Math.round(e));for(var i=0,a=this.offset;i<a;i++)t[n]=255&Math.floor(e/Math.pow(2,8*i)),n++;return n}},{key:"unpack_",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,i=0;i<this.offset;i++)n+=t[e+i]*Math.pow(256,i);return n}},{key:"unpackSigned_",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.sign_(this.unpack_(t,e))}},{key:"clamp_",value:function(t){return t>this.max?this.max:t<this.min?this.min:t}},{key:"sign_",value:function(t){return t>this.max&&(t-=2*this.max+2),t}}]),t}(),N=function(){function t(e,n){i(this,t),this.offset=Math.ceil((e+n)/8),this.ebits=e,this.fbits=n,this.bias=(1<<e-1)-1,this.biasP2=Math.pow(2,this.bias+1),this.ebitsFbits=e+n,this.fbias=Math.pow(2,-(8*this.offset-1-e))}return r(t,[{key:"pack",value:function(t,e,n){Math.abs(e)>this.biasP2-2*this.ebitsFbits&&(e=e<0?-1/0:1/0);var i=((e=+e)||1/e)<0||e<0?1:0;e=Math.abs(e);var a=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),r=Z(e/Math.pow(2,a)*Math.pow(2,this.fbits));return e!==e?(r=Math.pow(2,this.fbits-1),a=(1<<this.ebits)-1):0!==e&&(e>=Math.pow(2,1-this.bias)?(r/Math.pow(2,this.fbits)>=2&&(a+=1,r=1),a>this.bias?(a=(1<<this.ebits)-1,r=0):(a+=this.bias,r=Z(r)-Math.pow(2,this.fbits))):(r=Z(e/Math.pow(2,1-this.bias-this.fbits)),a=0)),this.packFloatBits_(t,n,i,a,r)}},{key:"unpack",value:function(t,e){for(var n,i=(1<<this.ebits)-1,a="",r=this.offset-1;r>=0;r--){var s=t[r+e].toString(2);a+="00000000".substring(s.length)+s}var h="1"==a.charAt(0)?-1:1;a=a.substring(1);var o=parseInt(a.substring(0,this.ebits),2);return a=a.substring(this.ebits),o==i?0!==parseInt(a,2)?NaN:h*(1/0):(0===o?(o+=1,n=parseInt(a,2)):n=parseInt("1"+a,2),h*n*this.fbias*Math.pow(2,o-this.bias))}},{key:"packFloatBits_",value:function(t,e,n,i,a){var r=[];r.push(n);for(var s=this.ebits;s>0;s-=1)r[s]=i%2?1:0,i=Math.floor(i/2);for(var h=r.length,o=this.fbits;o>0;o-=1)r[h+o]=a%2?1:0,a=Math.floor(a/2);for(var u=r.join(""),l=this.offset+e-1,c=e;l>=e;)t[l]=parseInt(u.substring(0,8),2),u=u.substring(8),l--,c++;return c}}]),t}();function Z(t){var e=Math.floor(t),n=t-e;return n<.5?e:n>.5||e%2?e+1:e}function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length;return U(t,e,n)}function X(t){var e=[];return B(t,e),e}function W(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return B(t,e,n)}function K(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=tt((e=e||{}).bits,e.fp,e.signed),r=Math.ceil(e.bits/8),s=0,h=i,o=t.length;s<o;s++)i=a.pack(n,t[s],i);return e.be&&R(n,r,h,i),i}function q(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t.length,r=tt((e=e||{}).bits,e.fp,e.signed);if(a=$(t,i,a,r.offset),e.be){var s=Q(t);e.be&&R(s,r.offset,i,a),Y(s,n,i,a,r)}else Y(t,n,i,a,r)}function G(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return K([t],e,n,i)}function V(t,e){var n=[];return G(t,e,n,0),n}function J(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[];return q(t,e,i,n,n+Math.ceil(e.bits/8)),i[0]}function Y(t,e,n,i,a){for(var r=a.offset,s=0,h=n;h<i;h+=r,s++)e[s]=a.unpack(t,h)}function Q(t){return new Uint8Array(t)}function $(t,e,n,i){return n-(n-e)%i}function tt(t,e,n){return e&&32==t?new N(8,23):e&&64==t?new N(11,52):new j(t,n)}function et(t,e,n){return(et="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function nt(t,e){for(var n=X(t),i=n.length;i<e;i++)n.push(0);return n}function it(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=[],a=0;a<e;a++)i[a]=new n(t.length/e);for(var r=0;r<e;r++)for(var s=r,h=0;s<t.length;s+=e,h++)i[r][h]=t[s];return i}function at(t,e,n){return!(n<1||t*(e/8)*n>4294967295)}var rt=function(t){h(n,t);var e=d(n);function n(){return i(this,n),e.apply(this,arguments)}return r(n,[{key:"listCuePoints",value:function(){for(var t=this.getCuePoints_(),e=0,n=t.length;e<n;e++)t[e].position=t[e].dwSampleOffset/this.fmt.sampleRate*1e3,t[e].dwSampleLength?(t[e].end=t[e].dwSampleLength/this.fmt.sampleRate*1e3,t[e].end+=t[e].position):t[e].end=null,delete t[e].value;return t}},{key:"setCuePoint",value:function(t){this.cue.chunkId="cue ",t.label||(t.label="");var e=this.getCuePoints_();this.clearLISTadtl_(),this.cue.points=[],t.dwSampleOffset=t.position*this.fmt.sampleRate/1e3,t.dwSampleLength=0,t.end&&(t.dwSampleLength=t.end*this.fmt.sampleRate/1e3-t.dwSampleOffset),0===e.length?this.setCuePoint_(t,1):this.setCuePointInOrder_(e,t),this.cue.dwCuePoints=this.cue.points.length}},{key:"deleteCuePoint",value:function(t){this.cue.chunkId="cue ";var e=this.getCuePoints_();this.clearLISTadtl_();var n=this.cue.points.length;this.cue.points=[];for(var i=0;i<n;i++)i+1!==t&&this.setCuePoint_(e[i],i+1);this.cue.dwCuePoints=this.cue.points.length,this.cue.dwCuePoints?this.cue.chunkId="cue ":(this.cue.chunkId="",this.clearLISTadtl_())}},{key:"updateLabel",value:function(t,e){var n=this.getLISTIndex("adtl");if(null!==n)for(var i=0,a=this.LIST[n].subChunks.length;i<a;i++)this.LIST[n].subChunks[i].dwName==t&&(this.LIST[n].subChunks[i].value=e)}},{key:"getCuePoints_",value:function(){for(var t=[],e=0;e<this.cue.points.length;e++){var n=this.cue.points[e],i=this.getDataForCuePoint_(n.dwName);i.label=i.value?i.value:"",i.dwPosition=n.dwPosition,i.fccChunk=n.fccChunk,i.dwChunkStart=n.dwChunkStart,i.dwBlockStart=n.dwBlockStart,i.dwSampleOffset=n.dwSampleOffset,t.push(i)}return t}},{key:"getDataForCuePoint_",value:function(t){var e=this.getLISTIndex("adtl"),n={};return null!==e&&this.getCueDataFromLIST_(n,e,t),n}},{key:"getCueDataFromLIST_",value:function(t,e,n){for(var i=0,a=this.LIST[e].subChunks.length;i<a;i++)if(this.LIST[e].subChunks[i].dwName==n){var r=this.LIST[e].subChunks[i];t.value=r.value||t.value,t.dwName=r.dwName||0,t.dwSampleLength=r.dwSampleLength||0,t.dwPurposeID=r.dwPurposeID||0,t.dwCountry=r.dwCountry||0,t.dwLanguage=r.dwLanguage||0,t.dwDialect=r.dwDialect||0,t.dwCodePage=r.dwCodePage||0}}},{key:"setCuePoint_",value:function(t,e){this.cue.points.push({dwName:e,dwPosition:t.dwPosition?t.dwPosition:0,fccChunk:t.fccChunk?t.fccChunk:"data",dwChunkStart:t.dwChunkStart?t.dwChunkStart:0,dwBlockStart:t.dwBlockStart?t.dwBlockStart:0,dwSampleOffset:t.dwSampleOffset}),this.setLabl_(t,e)}},{key:"setCuePointInOrder_",value:function(t,e){for(var n=!1,i=0;i<t.length;i++)t[i].dwSampleOffset>e.dwSampleOffset&&!n?(this.setCuePoint_(e,i+1),this.setCuePoint_(t[i],i+2),n=!0):this.setCuePoint_(t[i],n?i+2:i+1);n||this.setCuePoint_(e,this.cue.points.length+1)}},{key:"clearLISTadtl_",value:function(){for(var t=0,e=this.LIST.length;t<e;t++)"adtl"==this.LIST[t].format&&this.LIST.splice(t)}},{key:"setLabl_",value:function(t,e){var n=this.getLISTIndex("adtl");null===n&&(this.LIST.push({chunkId:"LIST",chunkSize:4,format:"adtl",subChunks:[]}),n=this.LIST.length-1),this.setLabelText_(n,t,e),t.dwSampleLength&&this.setLtxtChunk_(n,t,e)}},{key:"setLabelText_",value:function(t,e,n){this.LIST[t].subChunks.push({chunkId:"labl",chunkSize:4,dwName:n,value:e.label}),this.LIST[t].chunkSize+=12}},{key:"setLtxtChunk_",value:function(t,e,n){this.LIST[t].subChunks.push({chunkId:"ltxt",chunkSize:20,dwName:n,dwSampleLength:e.dwSampleLength,dwPurposeID:e.dwPurposeID||0,dwCountry:e.dwCountry||0,dwLanguage:e.dwLanguage||0,dwDialect:e.dwDialect||0,dwCodePage:e.dwCodePage||0,value:e.label}),this.LIST[t].chunkSize+=28}}]),n}(function(t){h(n,t);var e=d(n);function n(){return i(this,n),e.apply(this,arguments)}return r(n,[{key:"getTag",value:function(t){var e=this.getTagIndex_(t);return null!==e.TAG?this.LIST[e.LIST].subChunks[e.TAG].value:null}},{key:"setTag",value:function(t,e){t=function(t){if(t.constructor!==String)throw new Error("Invalid tag name.");if(t.length<4)for(var e=0,n=4-t.length;e<n;e++)t+=" ";return t}(t);var n=this.getTagIndex_(t);null!==n.TAG?(this.LIST[n.LIST].subChunks[n.TAG].chunkSize=e.length+1,this.LIST[n.LIST].subChunks[n.TAG].value=e):null!==n.LIST?this.LIST[n.LIST].subChunks.push({chunkId:t,chunkSize:e.length+1,value:e}):(this.LIST.push({chunkId:"LIST",chunkSize:8+e.length+1,format:"INFO",subChunks:[]}),this.LIST[this.LIST.length-1].subChunks.push({chunkId:t,chunkSize:e.length+1,value:e}))}},{key:"deleteTag",value:function(t){var e=this.getTagIndex_(t);return null!==e.TAG&&(this.LIST[e.LIST].subChunks.splice(e.TAG,1),!0)}},{key:"listTags",value:function(){var t=this.getLISTIndex("INFO"),e={};if(null!==t)for(var n=0,i=this.LIST[t].subChunks.length;n<i;n++)e[this.LIST[t].subChunks[n].chunkId]=this.LIST[t].subChunks[n].value;return e}},{key:"getLISTIndex",value:function(t){for(var e=0,n=this.LIST.length;e<n;e++)if(this.LIST[e].format==t)return e;return null}},{key:"getTagIndex_",value:function(t){for(var e={LIST:null,TAG:null},n=0,i=this.LIST.length;n<i;n++)if("INFO"==this.LIST[n].format){e.LIST=n;for(var a=0,r=this.LIST[n].subChunks.length;a<r;a++)if(this.LIST[n].subChunks[a].chunkId==t){e.TAG=a;break}break}return e}}]),n}(function(t){h(n,t);var e=d(n);function n(){var t;return i(this,n),(t=e.call(this)).bitDepth="0",t.dataType={bits:0,be:!1},t.WAV_AUDIO_FORMATS={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3},t}return r(n,[{key:"fromScratch",value:function(t,e,n,i,a){a=a||{},this.clearHeaders(),this.newWavFile_(t,e,n,i,a)}},{key:"fromBuffer",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];et(o(n.prototype),"fromBuffer",this).call(this,t,e),this.bitDepthFromFmt_(),this.updateDataType_()}},{key:"toBuffer",value:function(){return this.validateWavHeader_(),et(o(n.prototype),"toBuffer",this).call(this)}},{key:"getSamples",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float64Array,n=new e(this.data.samples.length/(this.dataType.bits/8));return q(this.data.samples,this.dataType,n,0,this.data.samples.length),!t&&this.fmt.numChannels>1?it(n,this.fmt.numChannels,e):n}},{key:"getSample",value:function(t){if((t*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");return J(this.data.samples.slice(t,t+this.dataType.bits/8),this.dataType)}},{key:"setSample",value:function(t,e){if((t*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");G(e,this.dataType,this.data.samples,t,!0)}},{key:"getiXML",value:function(){return this.iXML.value}},{key:"setiXML",value:function(t){if("string"!==typeof t)throw new TypeError("iXML value must be a string.");this.iXML.value=t,this.iXML.chunkId="iXML"}},{key:"get_PMX",value:function(){return this._PMX.value}},{key:"set_PMX",value:function(t){if("string"!==typeof t)throw new TypeError("_PMX value must be a string.");this._PMX.value=t,this._PMX.chunkId="_PMX"}},{key:"newWavFile_",value:function(t,e,n,i,a){a.container||(a.container="RIFF"),this.container=a.container,this.bitDepth=n,i=function(t){var e=[];if(t.length>0)if(t[0].constructor!==Number){e=new Float64Array(t[0].length*t.length);for(var n=0,i=t[0].length,a=0;n<i;n++)for(var r=0,s=t.length;r<s;r++,a++)e[a]=t[r][n]}else e=t;return e}(i),this.updateDataType_();var r=this.dataType.bits/8;this.data.samples=new Uint8Array(i.length*r),K(i,this.dataType,this.data.samples,0,!0),this.makeWavHeader_(n,t,e,r,this.data.samples.length,a),this.data.chunkId="data",this.data.chunkSize=this.data.samples.length,this.validateWavHeader_()}},{key:"makeWavHeader_",value:function(t,e,n,i,a,r){"4"==t?this.createADPCMHeader_(t,e,n,i,a,r):"8a"==t||"8m"==t?this.createALawMulawHeader_(t,e,n,i,a,r):-1==Object.keys(this.WAV_AUDIO_FORMATS).indexOf(t)||e>2?this.createExtensibleHeader_(t,e,n,i,a,r):this.createPCMHeader_(t,e,n,i,a,r)}},{key:"createPCMHeader_",value:function(t,e,n,i,a,r){this.container=r.container,this.chunkSize=36+a,this.format="WAVE",this.bitDepth=t,this.fmt={chunkId:"fmt ",chunkSize:16,audioFormat:this.WAV_AUDIO_FORMATS[t]||65534,numChannels:e,sampleRate:n,byteRate:e*i*n,blockAlign:e*i,bitsPerSample:parseInt(t,10),cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]}}},{key:"createADPCMHeader_",value:function(t,e,n,i,a,r){this.createPCMHeader_(t,e,n,i,a,r),this.chunkSize=40+a,this.fmt.chunkSize=20,this.fmt.byteRate=4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:2*a}}},{key:"createExtensibleHeader_",value:function(t,e,n,i,a,r){this.createPCMHeader_(t,e,n,i,a,r),this.chunkSize=60+a,this.fmt.chunkSize=40,this.fmt.bitsPerSample=1+(parseInt(t,10)-1|7),this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(t,10),this.fmt.dwChannelMask=function(t){var e=0;1===t?e=4:2===t?e=3:4===t?e=51:6===t?e=63:8===t&&(e=1599);return e}(e),this.fmt.subformat=[1,1048576,2852126848,1905997824]}},{key:"createALawMulawHeader_",value:function(t,e,n,i,a,r){this.createPCMHeader_(t,e,n,i,a,r),this.chunkSize=40+a,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:a}}},{key:"bitDepthFromFmt_",value:function(){3===this.fmt.audioFormat&&32===this.fmt.bitsPerSample?this.bitDepth="32f":6===this.fmt.audioFormat?this.bitDepth="8a":7===this.fmt.audioFormat?this.bitDepth="8m":this.bitDepth=this.fmt.bitsPerSample.toString()}},{key:"validateBitDepth_",value:function(){if(!this.WAV_AUDIO_FORMATS[this.bitDepth]){if(parseInt(this.bitDepth,10)>8&&parseInt(this.bitDepth,10)<54)return!0;throw new Error("Invalid bit depth.")}return!0}},{key:"updateDataType_",value:function(){this.dataType={bits:1+(parseInt(this.bitDepth,10)-1|7),fp:"32f"==this.bitDepth||"64"==this.bitDepth,signed:"8"!=this.bitDepth,be:"RIFX"==this.container},["4","8a","8m"].indexOf(this.bitDepth)>-1&&(this.dataType.bits=8,this.dataType.signed=!1)}},{key:"validateWavHeader_",value:function(){if(this.validateBitDepth_(),t=this.fmt.numChannels,e=this.fmt.bitsPerSample,t<1||t*e/8>65535)throw new Error("Invalid number of channels.");var t,e;if(!at(this.fmt.numChannels,this.fmt.bitsPerSample,this.fmt.sampleRate))throw new Error("Invalid sample rate.")}}]),n}(function(t){h(n,t);var e=d(n);function n(){return i(this,n),e.apply(this,arguments)}return r(n,[{key:"toBuffer",value:function(){this.uInt16.be="RIFX"===this.container,this.uInt32.be=this.uInt16.be;for(var t=[this.getJunkBytes_(),this.getDs64Bytes_(),this.getBextBytes_(),this.getiXMLBytes_(),this.getFmtBytes_(),this.getFactBytes_(),X(this.data.chunkId),V(this.data.samples.length,this.uInt32),this.data.samples,this.getCueBytes_(),this.getSmplBytes_(),this.getLISTBytes_(),this.get_PMXBytes_()],e=0,n=0;n<t.length;n++)e+=t[n].length;var i=new Uint8Array(e+12),a=0;a=W(this.container,i,a),a=G(e+4,this.uInt32,i,a),a=W(this.format,i,a);for(var r=0;r<t.length;r++)i.set(t[r],a),a+=t[r].length;return i}},{key:"getBextBytes_",value:function(){var t=[];return this.enforceBext_(),this.bext.chunkId&&(this.bext.chunkSize=602+this.bext.codingHistory.length,t=t.concat(X(this.bext.chunkId),V(602+this.bext.codingHistory.length,this.uInt32),nt(this.bext.description,256),nt(this.bext.originator,32),nt(this.bext.originatorReference,32),nt(this.bext.originationDate,10),nt(this.bext.originationTime,8),V(this.bext.timeReference[0],this.uInt32),V(this.bext.timeReference[1],this.uInt32),V(this.bext.version,this.uInt16),nt(this.bext.UMID,64),V(this.bext.loudnessValue,this.uInt16),V(this.bext.loudnessRange,this.uInt16),V(this.bext.maxTruePeakLevel,this.uInt16),V(this.bext.maxMomentaryLoudness,this.uInt16),V(this.bext.maxShortTermLoudness,this.uInt16),nt(this.bext.reserved,180),nt(this.bext.codingHistory,this.bext.codingHistory.length))),this.enforceByteLen_(t),t}},{key:"enforceBext_",value:function(){for(var t in this.bext)if(this.bext.hasOwnProperty(t)&&this.bext[t]&&"timeReference"!=t){this.bext.chunkId="bext";break}(this.bext.timeReference[0]||this.bext.timeReference[1])&&(this.bext.chunkId="bext")}},{key:"getiXMLBytes_",value:function(){var t=[];if(this.iXML.chunkId){var e=X(this.iXML.value);this.iXML.chunkSize=e.length,t=t.concat(X(this.iXML.chunkId),V(this.iXML.chunkSize,this.uInt32),e)}return this.enforceByteLen_(t),t}},{key:"getDs64Bytes_",value:function(){var t=[];return this.ds64.chunkId&&(t=t.concat(X(this.ds64.chunkId),V(this.ds64.chunkSize,this.uInt32),V(this.ds64.riffSizeHigh,this.uInt32),V(this.ds64.riffSizeLow,this.uInt32),V(this.ds64.dataSizeHigh,this.uInt32),V(this.ds64.dataSizeLow,this.uInt32),V(this.ds64.originationTime,this.uInt32),V(this.ds64.sampleCountHigh,this.uInt32),V(this.ds64.sampleCountLow,this.uInt32))),this.enforceByteLen_(t),t}},{key:"getCueBytes_",value:function(){var t=[];if(this.cue.chunkId){var e=this.getCuePointsBytes_();t=t.concat(X(this.cue.chunkId),V(e.length+4,this.uInt32),V(this.cue.dwCuePoints,this.uInt32),e)}return this.enforceByteLen_(t),t}},{key:"getCuePointsBytes_",value:function(){for(var t=[],e=0;e<this.cue.dwCuePoints;e++)t=t.concat(V(this.cue.points[e].dwName,this.uInt32),V(this.cue.points[e].dwPosition,this.uInt32),X(this.cue.points[e].fccChunk),V(this.cue.points[e].dwChunkStart,this.uInt32),V(this.cue.points[e].dwBlockStart,this.uInt32),V(this.cue.points[e].dwSampleOffset,this.uInt32));return t}},{key:"getSmplBytes_",value:function(){var t=[];if(this.smpl.chunkId){var e=this.getSmplLoopsBytes_();t=t.concat(X(this.smpl.chunkId),V(e.length+36,this.uInt32),V(this.smpl.dwManufacturer,this.uInt32),V(this.smpl.dwProduct,this.uInt32),V(this.smpl.dwSamplePeriod,this.uInt32),V(this.smpl.dwMIDIUnityNote,this.uInt32),V(this.smpl.dwMIDIPitchFraction,this.uInt32),V(this.smpl.dwSMPTEFormat,this.uInt32),V(this.smpl.dwSMPTEOffset,this.uInt32),V(this.smpl.dwNumSampleLoops,this.uInt32),V(this.smpl.dwSamplerData,this.uInt32),e)}return this.enforceByteLen_(t),t}},{key:"getSmplLoopsBytes_",value:function(){for(var t=[],e=0;e<this.smpl.dwNumSampleLoops;e++)t=t.concat(V(this.smpl.loops[e].dwName,this.uInt32),V(this.smpl.loops[e].dwType,this.uInt32),V(this.smpl.loops[e].dwStart,this.uInt32),V(this.smpl.loops[e].dwEnd,this.uInt32),V(this.smpl.loops[e].dwFraction,this.uInt32),V(this.smpl.loops[e].dwPlayCount,this.uInt32));return t}},{key:"getFactBytes_",value:function(){var t=[];return this.fact.chunkId&&(t=t.concat(X(this.fact.chunkId),V(this.fact.chunkSize,this.uInt32),V(this.fact.dwSampleLength,this.uInt32))),this.enforceByteLen_(t),t}},{key:"getFmtBytes_",value:function(){if(this.fmt.chunkId){var t=[].concat(X(this.fmt.chunkId),V(this.fmt.chunkSize,this.uInt32),V(this.fmt.audioFormat,this.uInt16),V(this.fmt.numChannels,this.uInt16),V(this.fmt.sampleRate,this.uInt32),V(this.fmt.byteRate,this.uInt32),V(this.fmt.blockAlign,this.uInt16),V(this.fmt.bitsPerSample,this.uInt16),this.getFmtExtensionBytes_());return this.enforceByteLen_(t),t}throw Error('Could not find the "fmt " chunk')}},{key:"getFmtExtensionBytes_",value:function(){var t=[];return this.fmt.chunkSize>16&&(t=t.concat(V(this.fmt.cbSize,this.uInt16))),this.fmt.chunkSize>18&&(t=t.concat(V(this.fmt.validBitsPerSample,this.uInt16))),this.fmt.chunkSize>20&&(t=t.concat(V(this.fmt.dwChannelMask,this.uInt32))),this.fmt.chunkSize>24&&(t=t.concat(V(this.fmt.subformat[0],this.uInt32),V(this.fmt.subformat[1],this.uInt32),V(this.fmt.subformat[2],this.uInt32),V(this.fmt.subformat[3],this.uInt32))),t}},{key:"getLISTBytes_",value:function(){for(var t=[],e=0;e<this.LIST.length;e++){var n=this.getLISTSubChunksBytes_(this.LIST[e].subChunks,this.LIST[e].format);t=t.concat(X(this.LIST[e].chunkId),V(n.length+4,this.uInt32),X(this.LIST[e].format),n)}return this.enforceByteLen_(t),t}},{key:"getLISTSubChunksBytes_",value:function(t,e){for(var n=[],i=0,a=t.length;i<a;i++)"INFO"==e?n=n.concat(this.getLISTINFOSubChunksBytes_(t[i])):"adtl"==e&&(n=n.concat(this.getLISTadtlSubChunksBytes_(t[i]))),this.enforceByteLen_(n);return n}},{key:"getLISTINFOSubChunksBytes_",value:function(t){var e=[],n=nt(t.value,t.value.length);return(e=e.concat(X(t.chunkId),V(n.length+1,this.uInt32),n)).push(0),e}},{key:"getLISTadtlSubChunksBytes_",value:function(t){var e=[];if(["labl","note"].indexOf(t.chunkId)>-1){var n=nt(t.value,t.value.length);(e=e.concat(X(t.chunkId),V(n.length+4+1,this.uInt32),V(t.dwName,this.uInt32),n)).push(0)}else"ltxt"==t.chunkId&&(e=e.concat(this.getLtxtChunkBytes_(t)));return e}},{key:"getLtxtChunkBytes_",value:function(t){return[].concat(X(t.chunkId),V(t.value.length+20,this.uInt32),V(t.dwName,this.uInt32),V(t.dwSampleLength,this.uInt32),V(t.dwPurposeID,this.uInt32),V(t.dwCountry,this.uInt16),V(t.dwLanguage,this.uInt16),V(t.dwDialect,this.uInt16),V(t.dwCodePage,this.uInt16),nt(t.value,t.value.length))}},{key:"get_PMXBytes_",value:function(){var t=[];if(this._PMX.chunkId){var e=X(this._PMX.value);this._PMX.chunkSize=e.length,t=t.concat(X(this._PMX.chunkId),V(this._PMX.chunkSize,this.uInt32),e)}return this.enforceByteLen_(t),t}},{key:"getJunkBytes_",value:function(){var t=[];return this.junk.chunkId?t.concat(X(this.junk.chunkId),V(this.junk.chunkData.length,this.uInt32),this.junk.chunkData):(this.enforceByteLen_(t),t)}},{key:"enforceByteLen_",value:function(t){t.length%2&&t.push(0)}}]),n}(function(t){h(n,t);var e=d(n);function n(){var t;return i(this,n),(t=e.call(this)).supported_containers.push("RF64"),t.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]},t.fact={chunkId:"",chunkSize:0,dwSampleLength:0},t.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]},t.smpl={chunkId:"",chunkSize:0,dwManufacturer:0,dwProduct:0,dwSamplePeriod:0,dwMIDIUnityNote:0,dwMIDIPitchFraction:0,dwSMPTEFormat:0,dwSMPTEOffset:0,dwNumSampleLoops:0,dwSamplerData:0,loops:[]},t.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[0,0],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""},t.iXML={chunkId:"",chunkSize:0,value:""},t.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0},t.data={chunkId:"",chunkSize:0,samples:new Uint8Array(0)},t.LIST=[],t.junk={chunkId:"",chunkSize:0,chunkData:[]},t._PMX={chunkId:"",chunkSize:0,value:""},t.uInt16={bits:16,be:!1,signed:!1,fp:!1},t}return r(n,[{key:"fromBuffer",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.clearHeaders(),this.setSignature(t),this.uInt16.be=this.uInt32.be,"WAVE"!=this.format)throw Error('Could not find the "WAVE" format identifier');this.readDs64Chunk_(t),this.readFmtChunk_(t),this.readFactChunk_(t),this.readBextChunk_(t),this.readiXMLChunk_(t),this.readCueChunk_(t),this.readSmplChunk_(t),this.readDataChunk_(t,e),this.readJunkChunk_(t),this.readLISTChunk_(t),this.read_PMXChunk_(t)}},{key:"clearHeaders",value:function(){var t=new n;Object.assign(this.fmt,t.fmt),Object.assign(this.fact,t.fact),Object.assign(this.cue,t.cue),Object.assign(this.smpl,t.smpl),Object.assign(this.bext,t.bext),Object.assign(this.iXML,t.iXML),Object.assign(this.ds64,t.ds64),Object.assign(this.data,t.data),this.LIST=[],Object.assign(this.junk,t.junk),Object.assign(this._PMX,t._PMX)}},{key:"readFmtChunk_",value:function(t){var e=this.findChunk("fmt ");if(!e)throw Error('Could not find the "fmt " chunk');this.head=e.chunkData.start,this.fmt.chunkId=e.chunkId,this.fmt.chunkSize=e.chunkSize,this.fmt.audioFormat=this.readUInt16_(t),this.fmt.numChannels=this.readUInt16_(t),this.fmt.sampleRate=this.readUInt32(t),this.fmt.byteRate=this.readUInt32(t),this.fmt.blockAlign=this.readUInt16_(t),this.fmt.bitsPerSample=this.readUInt16_(t),this.readFmtExtension_(t)}},{key:"readFmtExtension_",value:function(t){this.fmt.chunkSize>16&&(this.fmt.cbSize=this.readUInt16_(t),this.fmt.chunkSize>18&&(this.fmt.validBitsPerSample=this.readUInt16_(t),this.fmt.chunkSize>20&&(this.fmt.dwChannelMask=this.readUInt32(t),this.fmt.subformat=[this.readUInt32(t),this.readUInt32(t),this.readUInt32(t),this.readUInt32(t)])))}},{key:"readFactChunk_",value:function(t){var e=this.findChunk("fact");e&&(this.head=e.chunkData.start,this.fact.chunkId=e.chunkId,this.fact.chunkSize=e.chunkSize,this.fact.dwSampleLength=this.readUInt32(t))}},{key:"readCueChunk_",value:function(t){var e=this.findChunk("cue ");if(e){this.head=e.chunkData.start,this.cue.chunkId=e.chunkId,this.cue.chunkSize=e.chunkSize,this.cue.dwCuePoints=this.readUInt32(t);for(var n=0;n<this.cue.dwCuePoints;n++)this.cue.points.push({dwName:this.readUInt32(t),dwPosition:this.readUInt32(t),fccChunk:this.readString(t,4),dwChunkStart:this.readUInt32(t),dwBlockStart:this.readUInt32(t),dwSampleOffset:this.readUInt32(t)})}}},{key:"readSmplChunk_",value:function(t){var e=this.findChunk("smpl");if(e){this.head=e.chunkData.start,this.smpl.chunkId=e.chunkId,this.smpl.chunkSize=e.chunkSize,this.smpl.dwManufacturer=this.readUInt32(t),this.smpl.dwProduct=this.readUInt32(t),this.smpl.dwSamplePeriod=this.readUInt32(t),this.smpl.dwMIDIUnityNote=this.readUInt32(t),this.smpl.dwMIDIPitchFraction=this.readUInt32(t),this.smpl.dwSMPTEFormat=this.readUInt32(t),this.smpl.dwSMPTEOffset=this.readUInt32(t),this.smpl.dwNumSampleLoops=this.readUInt32(t),this.smpl.dwSamplerData=this.readUInt32(t);for(var n=0;n<this.smpl.dwNumSampleLoops;n++)this.smpl.loops.push({dwName:this.readUInt32(t),dwType:this.readUInt32(t),dwStart:this.readUInt32(t),dwEnd:this.readUInt32(t),dwFraction:this.readUInt32(t),dwPlayCount:this.readUInt32(t)})}}},{key:"readDataChunk_",value:function(t,e){var n=this.findChunk("data");if(!n)throw Error('Could not find the "data" chunk');this.data.chunkId="data",this.data.chunkSize=n.chunkSize,e&&(this.data.samples=t.slice(n.chunkData.start,n.chunkData.end))}},{key:"readBextChunk_",value:function(t){var e=this.findChunk("bext");e&&(this.head=e.chunkData.start,this.bext.chunkId=e.chunkId,this.bext.chunkSize=e.chunkSize,this.bext.description=this.readString(t,256),this.bext.originator=this.readString(t,32),this.bext.originatorReference=this.readString(t,32),this.bext.originationDate=this.readString(t,10),this.bext.originationTime=this.readString(t,8),this.bext.timeReference=[this.readUInt32(t),this.readUInt32(t)],this.bext.version=this.readUInt16_(t),this.bext.UMID=this.readString(t,64),this.bext.loudnessValue=this.readUInt16_(t),this.bext.loudnessRange=this.readUInt16_(t),this.bext.maxTruePeakLevel=this.readUInt16_(t),this.bext.maxMomentaryLoudness=this.readUInt16_(t),this.bext.maxShortTermLoudness=this.readUInt16_(t),this.bext.reserved=this.readString(t,180),this.bext.codingHistory=this.readString(t,this.bext.chunkSize-602))}},{key:"readiXMLChunk_",value:function(t){var e=this.findChunk("iXML");e&&(this.head=e.chunkData.start,this.iXML.chunkId=e.chunkId,this.iXML.chunkSize=e.chunkSize,this.iXML.value=H(t,this.head,this.head+this.iXML.chunkSize))}},{key:"readDs64Chunk_",value:function(t){var e=this.findChunk("ds64");if(e)this.head=e.chunkData.start,this.ds64.chunkId=e.chunkId,this.ds64.chunkSize=e.chunkSize,this.ds64.riffSizeHigh=this.readUInt32(t),this.ds64.riffSizeLow=this.readUInt32(t),this.ds64.dataSizeHigh=this.readUInt32(t),this.ds64.dataSizeLow=this.readUInt32(t),this.ds64.originationTime=this.readUInt32(t),this.ds64.sampleCountHigh=this.readUInt32(t),this.ds64.sampleCountLow=this.readUInt32(t);else if("RF64"==this.container)throw Error('Could not find the "ds64" chunk')}},{key:"readLISTChunk_",value:function(t){var e=this.findChunk("LIST",!0);if(null!==e)for(var n=0;n<e.length;n++){var i=e[n];this.LIST.push({chunkId:i.chunkId,chunkSize:i.chunkSize,format:i.format,subChunks:[]});for(var a=0;a<i.subChunks.length;a++)this.readLISTSubChunks_(i.subChunks[a],i.format,t)}}},{key:"readLISTSubChunks_",value:function(t,e,n){"adtl"==e?["labl","note","ltxt"].indexOf(t.chunkId)>-1&&this.readLISTadtlSubChunks_(n,t):"INFO"==e&&this.readLISTINFOSubChunks_(n,t)}},{key:"readLISTadtlSubChunks_",value:function(t,e){this.head=e.chunkData.start;var n={chunkId:e.chunkId,chunkSize:e.chunkSize,dwName:this.readUInt32(t)};"ltxt"==e.chunkId?(n.dwSampleLength=this.readUInt32(t),n.dwPurposeID=this.readUInt32(t),n.dwCountry=this.readUInt16_(t),n.dwLanguage=this.readUInt16_(t),n.dwDialect=this.readUInt16_(t),n.dwCodePage=this.readUInt16_(t),n.value=""):n.value=this.readZSTR_(t,this.head),this.LIST[this.LIST.length-1].subChunks.push(n)}},{key:"readLISTINFOSubChunks_",value:function(t,e){this.head=e.chunkData.start,this.LIST[this.LIST.length-1].subChunks.push({chunkId:e.chunkId,chunkSize:e.chunkSize,value:this.readZSTR_(t,this.head)})}},{key:"readJunkChunk_",value:function(t){var e=this.findChunk("junk");e&&(this.junk={chunkId:e.chunkId,chunkSize:e.chunkSize,chunkData:[].slice.call(t.slice(e.chunkData.start,e.chunkData.end))})}},{key:"read_PMXChunk_",value:function(t){var e=this.findChunk("_PMX");e&&(this.head=e.chunkData.start,this._PMX.chunkId=e.chunkId,this._PMX.chunkSize=e.chunkSize,this._PMX.value=H(t,this.head,this.head+this._PMX.chunkSize))}},{key:"readZSTR_",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e;n<t.length&&(this.head++,0!==t[n]);n++);return H(t,e,this.head-1)}},{key:"readUInt16_",value:function(t){var e=J(t,this.uInt16,this.head);return this.head+=2,e}}]),n}(function(){function t(){i(this,t),this.container="",this.chunkSize=0,this.format="",this.signature=null,this.head=0,this.uInt32={bits:32,be:!1},this.supported_containers=["RIFF","RIFX"]}return r(t,[{key:"setSignature",value:function(t){if(this.head=0,this.container=this.readString(t,4),-1===this.supported_containers.indexOf(this.container))throw Error("Not a supported format.");this.uInt32.be="RIFX"===this.container,this.chunkSize=this.readUInt32(t),this.format=this.readString(t,4),this.signature={chunkId:this.container,chunkSize:this.chunkSize,format:this.format,subChunks:this.getSubChunksIndex_(t)}}},{key:"findChunk",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.signature.subChunks,i=[],a=0;a<n.length;a++)if(n[a].chunkId==t){if(!e)return n[a];i.push(n[a])}return"LIST"==t&&i.length?i:null}},{key:"readString",value:function(t,e){var n;return n=H(t,this.head,this.head+e),this.head+=e,n}},{key:"readUInt32",value:function(t){var e=J(t,this.uInt32,this.head);return this.head+=4,e}},{key:"getSubChunksIndex_",value:function(t){for(var e=[],n=this.head;n<=t.length-8;)e.push(this.getSubChunkIndex_(t,n)),n=(n+=8+e[e.length-1].chunkSize)%2?n+1:n;return e}},{key:"getSubChunkIndex_",value:function(t,e){var n={chunkId:this.getChunkId_(t,e),chunkSize:this.getChunkSize_(t,e)};if("LIST"==n.chunkId)n.format=H(t,e+8,e+12),this.head+=4,n.subChunks=this.getSubChunksIndex_(t);else{var i=n.chunkSize%2?n.chunkSize+1:n.chunkSize;this.head=e+8+i,n.chunkData={start:e+8,end:this.head}}return n}},{key:"getChunkId_",value:function(t,e){return this.head+=4,H(t,e,e+4)}},{key:"getChunkSize_",value:function(t,e){return this.head+=4,J(t,this.uInt32,e+4)}}]),t}()))))),st=function(){function t(e,n,a){var r;i(this,t),this.length_=e,this.scaleFactor_=(e-1)/n,this.interpolate=this.sinc,"point"===a.method?this.interpolate=this.point:"linear"===a.method?this.interpolate=this.linear:"cubic"===a.method&&(this.interpolate=this.cubic),this.tangentFactor_=1-Math.max(0,Math.min(1,a.tension||0)),this.sincFilterSize_=a.sincFilterSize||1,this.kernel_=(r=a.sincWindow||ht,function(t){return function(t){return 0===t?1:Math.sin(Math.PI*t)/(Math.PI*t)}(t)*r(t)})}return r(t,[{key:"point",value:function(t,e){return this.getClippedInput_(Math.round(this.scaleFactor_*t),e)}},{key:"linear",value:function(t,e){t=this.scaleFactor_*t;var n=Math.floor(t);return(1-(t-=n))*this.getClippedInput_(n,e)+t*this.getClippedInput_(n+1,e)}},{key:"cubic",value:function(t,e){t=this.scaleFactor_*t;var n=Math.floor(t),i=[this.getTangent_(n,e),this.getTangent_(n+1,e)],a=[this.getClippedInput_(n,e),this.getClippedInput_(n+1,e)],r=(t-=n)*t,s=t*r;return(2*s-3*r+1)*a[0]+(s-2*r+t)*i[0]+(-2*s+3*r)*a[1]+(s-r)*i[1]}},{key:"sinc",value:function(t,e){t=this.scaleFactor_*t;for(var n=Math.floor(t),i=n-this.sincFilterSize_+1,a=n+this.sincFilterSize_,r=0,s=i;s<=a;s++)r+=this.kernel_(t-s)*this.getClippedInput_(s,e);return r}},{key:"getTangent_",value:function(t,e){return this.tangentFactor_*(this.getClippedInput_(t+1,e)-this.getClippedInput_(t-1,e))/2}},{key:"getClippedInput_",value:function(t,e){return 0<=t&&t<this.length_?e[t]:0}}]),t}();function ht(t){return Math.exp(-t/2*t/2)}var ot=function(){function t(e,n,a){i(this,t);var r=2*Math.PI*a/n,s=0;this.filters=[];for(var h=0;h<=e;h++)h-e/2===0?this.filters[h]=r:(this.filters[h]=Math.sin(r*(h-e/2))/(h-e/2),this.filters[h]*=.54-.46*Math.cos(2*Math.PI*h/e)),s+=this.filters[h];for(var o=0;o<=e;o++)this.filters[o]/=s;this.z=this.initZ_()}return r(t,[{key:"filter",value:function(t){this.z.buf[this.z.pointer]=t;for(var e=0,n=0,i=this.z.buf.length;n<i;n++)e+=this.filters[n]*this.z.buf[(this.z.pointer+n)%this.z.buf.length];return this.z.pointer=(this.z.pointer+1)%this.z.buf.length,e}},{key:"reset",value:function(){this.z=this.initZ_()}},{key:"initZ_",value:function(){for(var t=[],e=0;e<this.filters.length-1;e++)t.push(0);return{buf:t,pointer:0}}}]),t}(),ut={point:!1,linear:!1,cubic:!0,sinc:!0},lt={IIR:16,FIR:71},ct={IIR:function(){function t(e,n,a){i(this,t);for(var r=[],s=0;s<e;s++)r.push(this.getCoeffs_({Fs:n,Fc:a,Q:.5/Math.sin(Math.PI/(2*e)*(s+.5))}));this.stages=[];for(var h=0;h<r.length;h++)this.stages[h]={b0:r[h].b[0],b1:r[h].b[1],b2:r[h].b[2],a1:r[h].a[0],a2:r[h].a[1],k:r[h].k,z:[0,0]}}return r(t,[{key:"filter",value:function(t){for(var e=t,n=0,i=this.stages.length;n<i;n++)e=this.runStage_(n,e);return e}},{key:"getCoeffs_",value:function(t){var e={a:[],b:[]},n=this.preCalc_(t,e);return e.k=1,e.b.push((1-n.cw)/(2*n.a0)),e.b.push(2*e.b[0]),e.b.push(e.b[0]),e}},{key:"preCalc_",value:function(t,e){var n={},i=2*Math.PI*t.Fc/t.Fs;return n.alpha=Math.sin(i)/(2*t.Q),n.cw=Math.cos(i),n.a0=1+n.alpha,e.a0=n.a0,e.a.push(-2*n.cw/n.a0),e.k=1,e.a.push((1-n.alpha)/n.a0),n}},{key:"runStage_",value:function(t,e){var n=e*this.stages[t].k-this.stages[t].a1*this.stages[t].z[0]-this.stages[t].a2*this.stages[t].z[1],i=this.stages[t].b0*n+this.stages[t].b1*this.stages[t].z[0]+this.stages[t].b2*this.stages[t].z[1];return this.stages[t].z[1]=this.stages[t].z[0],this.stages[t].z[0]=n,i}},{key:"reset",value:function(){for(var t=0;t<this.stages.length;t++)this.stages[t].z=[0,0]}}]),t}(),FIR:ot};function dt(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i=i||{};var a=(n-e)/e+1,r=new Float64Array(t.length*a);i.method=i.method||"cubic";var s=new st(t.length,r.length,{method:i.method,tension:i.tension||0,sincFilterSize:i.sincFilterSize||6,sincWindow:i.sincWindow||void 0,clip:i.clip||"mirror"});if(void 0===i.LPF&&(i.LPF=ut[i.method]),i.LPF){i.LPFType=i.LPFType||"IIR";var h=ct[i.LPFType];if(n>e){var o=new h(i.LPForder||lt[i.LPFType],n,e/2);_t(t,r,s,o)}else{var u=new h(i.LPForder||lt[i.LPFType],e,n/2);pt(t,r,s,u)}}else ft(t,r,s);return r}function ft(t,e,n){for(var i=0,a=e.length;i<a;i++)e[i]=n.interpolate(i,t)}function _t(t,e,n,i){for(var a=0,r=e.length;a<r;a++)e[a]=i.filter(n.interpolate(a,t));i.reset();for(var s=e.length-1;s>=0;s--)e[s]=i.filter(e[s])}function pt(t,e,n,i){for(var a=0,r=t.length;a<r;a++)t[a]=i.filter(t[a]);i.reset();for(var s=t.length-1;s>=0;s--)t[s]=i.filter(t[s]);ft(t,e,n)}function mt(t,e){var n=t/e;return n%2&&n++,n}var vt=function(t){h(n,t);var e=d(n);function n(t){var a;return i(this,n),a=e.call(this),t&&a.fromBuffer(t),a}return r(n,[{key:"fromBase64",value:function(t){this.fromBuffer(function(t){for(var e=new Uint8Array(256),n=0;n<f.length;n++)e[f.charCodeAt(n)]=n;var i=.75*t.length;"="===t[t.length-1]&&(i--,"="===t[t.length-2]&&i--);for(var a=new Uint8Array(i),r=0,s=0;r<t.length;r+=4){var h=e[t.charCodeAt(r)],o=e[t.charCodeAt(r+1)],u=e[t.charCodeAt(r+2)],l=e[t.charCodeAt(r+3)];a[s++]=h<<2|o>>4,a[s++]=(15&o)<<4|u>>2,a[s++]=(3&u)<<6|63&l}return a}(t))}},{key:"toBase64",value:function(){return function(t){for(var e="",n=0;n<t.length;n+=3)e+=f[t[n]>>2],e+=f[(3&t[n])<<4|t[n+1]>>4],e+=f[(15&t[n+1])<<2|t[n+2]>>6],e+=f[63&t[n+2]];return t.length%3===2?e=e.substring(0,e.length-1)+"=":t.length%3===1&&(e=e.substring(0,e.length-2)+"=="),e}(this.toBuffer())}},{key:"toDataURI",value:function(){return"data:audio/wav;base64,"+this.toBase64()}},{key:"fromDataURI",value:function(t){this.fromBase64(t.replace("data:audio/wav;base64,",""))}}]),n}(function(t){h(n,t);var e=d(n);function n(){return i(this,n),e.apply(this,arguments)}return r(n,[{key:"toRIFF",value:function(){var t=new Float64Array(mt(this.data.samples.length,this.dataType.bits/8));q(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,t,{container:"RIFF"})}},{key:"toRIFX",value:function(){var t=new Float64Array(mt(this.data.samples.length,this.dataType.bits/8));q(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,t,{container:"RIFX"})}},{key:"toIMAADPCM",value:function(){if(8e3!==this.fmt.sampleRate)throw new Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!==this.fmt.numChannels)throw new Error("Only mono files can be compressed as IMA-ADPCM.");this.assure16Bit_();var t=new Int16Array(mt(this.data.samples.length,2));q(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"4",function(t){for(var e={index:0,predicted:0,step:7},n=new Uint8Array(t.length),i=[],a=0,r=0,s=0,h=t.length;s<h;s++)s%505==0&&0!=s&&(n.set(I(i,e),a),a+=256,i=[],r++),i.push(t[s]);var o=t.length/2;return o%2&&o++,n.slice(0,o+512+4*r)}(t),{container:this.correctContainer_()})}},{key:"fromIMAADPCM",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",y(this.data.samples,this.fmt.blockAlign),{container:this.correctContainer_()}),"16"!=t&&this.toBitDepth(t)}},{key:"toALaw",value:function(){this.assure16Bit_();var t=new Int16Array(mt(this.data.samples.length,2));q(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8a",function(t){for(var e=new Uint8Array(t.length),n=0,i=t.length;n<i;n++)e[n]=z(t[n]);return e}(t),{container:this.correctContainer_()})}},{key:"fromALaw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",M(this.data.samples),{container:this.correctContainer_()}),"16"!=t&&this.toBitDepth(t)}},{key:"toMuLaw",value:function(){this.assure16Bit_();var t=new Int16Array(mt(this.data.samples.length,2));q(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8m",function(t){for(var e=new Uint8Array(t.length),n=0,i=t.length;n<i;n++)e[n]=P(t[n]);return e}(t),{container:this.correctContainer_()})}},{key:"fromMuLaw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",D(this.data.samples),{container:this.correctContainer_()}),"16"!=t&&this.toBitDepth(t)}},{key:"toBitDepth",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t,i=this.bitDepth;e||("32f"!=t&&(n=this.dataType.bits.toString()),i=""+this.dataType.bits),this.assureUncompressed_();var a=this.getSamples(!0),r=new Float64Array(a.length);_(a,i,r,n),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,t,r,{container:this.correctContainer_()})}},{key:"toSampleRate",value:function(t,e){this.validateResample_(t);var n=this.getSamples(),i=[];if(n.constructor===Float64Array)i=dt(n,this.fmt.sampleRate,t,e);else for(var a=0;a<n.length;a++)i.push(dt(n[a],this.fmt.sampleRate,t,e));this.fromExisting_(this.fmt.numChannels,t,this.bitDepth,i,{container:this.correctContainer_()})}},{key:"validateResample_",value:function(t){if(!at(this.fmt.numChannels,this.fmt.bitsPerSample,t))throw new Error("Invalid sample rate.");if(["4","8a","8m"].indexOf(this.bitDepth)>-1)throw new Error("wavefile can't change the sample rate of compressed files.")}},{key:"assure16Bit_",value:function(){this.assureUncompressed_(),"16"!=this.bitDepth&&this.toBitDepth("16")}},{key:"assureUncompressed_",value:function(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()}},{key:"correctContainer_",value:function(){return"RF64"==this.container?"RIFF":this.container}},{key:"fromExisting_",value:function(t,e,n,i,a){var r=new rt;Object.assign(this.fmt,r.fmt),Object.assign(this.fact,r.fact),Object.assign(this.ds64,r.ds64),Object.assign(this.data,r.data),this.newWavFile_(t,e,n,i,a)}}]),n}(rt))},function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function a(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,a=!1,r=void 0;try{for(var s,h=t[Symbol.iterator]();!(i=(s=h.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(o){a=!0,r=o}finally{try{i||null==h.return||h.return()}finally{if(a)throw r}}return n}}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return v}));var h=n(0),o=n(1);function u(t,e,n){return(u=Object(o.a)()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&Object(h.a)(a,n.prototype),a}).apply(null,arguments)}function l(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=Symbol("Comlink.proxy"),d=Symbol("Comlink.endpoint"),f=Symbol("Comlink.releaseProxy"),_=Symbol("Comlink.thrown"),p=function(t){return"object"===typeof t&&null!==t||"function"===typeof t},m=new Map([["proxy",{canHandle:function(t){return p(t)&&t[c]},serialize:function(t){var e=new MessageChannel,n=e.port1,i=e.port2;return v(t,n),[i,[i]]},deserialize:function(t){return t.start(),k(t,[],e);var e}}],["throw",{canHandle:function(t){return p(t)&&_ in t},serialize:function(t){var e=t.value;return[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]]},deserialize:function(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;e.addEventListener("message",(function n(i){if(i&&i.data){var a,h=Object.assign({path:[]},i.data),o=h.id,c=h.type,d=h.path,f=(i.data.argumentList||[]).map(C);try{var p=d.slice(0,-1).reduce((function(t,e){return t[e]}),t),m=d.reduce((function(t,e){return t[e]}),t);switch(c){case 0:a=m;break;case 1:p[d.slice(-1)[0]]=C(i.data.value),a=!0;break;case 2:a=m.apply(p,f);break;case 3:var b;a=S(u(m,l(f)));break;case 4:var k=new MessageChannel,w=k.port1,y=k.port2;v(t,y),a=I(w,[w]);break;case 5:a=void 0}}catch(b){a=s({value:b},_,0)}Promise.resolve(a).catch((function(t){return s({value:t},_,0)})).then((function(t){var i=r(x(t),2),a=i[0],s=i[1];e.postMessage(Object.assign(Object.assign({},a),{id:o}),s),5===c&&(e.removeEventListener("message",n),g(e))}))}})),e.start&&e.start()}function g(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function b(t){if(t)throw new Error("Proxy has been released and is not useable")}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,a=new Proxy(n,{get:function(n,r){if(b(i),r===f)return function(){return T(t,{type:5,path:e.map((function(t){return t.toString()}))}).then((function(){g(t),i=!0}))};if("then"===r){if(0===e.length)return{then:function(){return a}};var s=T(t,{type:0,path:e.map((function(t){return t.toString()}))}).then(C);return s.then.bind(s)}return k(t,[].concat(l(e),[r]))},set:function(n,a,s){b(i);var h=r(x(s),2),o=h[0],u=h[1];return T(t,{type:1,path:[].concat(l(e),[a]).map((function(t){return t.toString()})),value:o},u).then(C)},apply:function(n,a,s){b(i);var h=e[e.length-1];if(h===d)return T(t,{type:4}).then(C);if("bind"===h)return k(t,e.slice(0,-1));var o=r(w(s),2),u=o[0],l=o[1];return T(t,{type:2,path:e.map((function(t){return t.toString()})),argumentList:u},l).then(C)},construct:function(n,a){b(i);var s=r(w(a),2),h=s[0],o=s[1];return T(t,{type:3,path:e.map((function(t){return t.toString()})),argumentList:h},o).then(C)}});return a}function w(t){var e,n=t.map(x);return[n.map((function(t){return t[0]})),(e=n.map((function(t){return t[1]})),Array.prototype.concat.apply([],e))]}var y=new WeakMap;function I(t,e){return y.set(t,e),t}function S(t){return Object.assign(t,s({},c,!0))}function x(t){var e,n=function(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,h=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return h=t.done,t},e:function(t){o=!0,s=t},f:function(){try{h||null==n.return||n.return()}finally{if(o)throw s}}}}(m);try{for(n.s();!(e=n.n()).done;){var i=r(e.value,2),s=i[0],h=i[1];if(h.canHandle(t)){var o=r(h.serialize(t),2);return[{type:3,name:s,value:o[0]},o[1]]}}}catch(u){n.e(u)}finally{n.f()}return[{type:0,value:t},y.get(t)||[]]}function C(t){switch(t.type){case 3:return m.get(t.name).deserialize(t.value);case 0:return t.value}}function T(t,e,n){return new Promise((function(i){var a=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");t.addEventListener("message",(function e(n){n.data&&n.data.id&&n.data.id===a&&(t.removeEventListener("message",e),i(n.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:a},e),n)}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"objToCompressedB64",(function(){return objToCompressedB64})),__webpack_require__.d(__webpack_exports__,"compressedB64ToObj",(function(){return compressedB64ToObj})),__webpack_require__.d(__webpack_exports__,"testSetting",(function(){return testSetting})),__webpack_require__.d(__webpack_exports__,"computeSetting",(function(){return computeSetting})),__webpack_require__.d(__webpack_exports__,"exportWav",(function(){return exportWav}));var comlink__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),byte_base64__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),byte_base64__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(byte_base64__WEBPACK_IMPORTED_MODULE_1__),wavefile__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3),pako=__webpack_require__(6),fft=__webpack_require__(7);function objToCompressedB64(t){var e=JSON.stringify(t);return byte_base64__WEBPACK_IMPORTED_MODULE_1__.bytesToBase64(pako.deflate(e))}function compressedB64ToObj(t){return JSON.parse(pako.inflate(byte_base64__WEBPACK_IMPORTED_MODULE_1__.base64ToBytes(t),{to:"string"}))}function hashCode(t){return t.split("").reduce((function(t,e){return(t=(t<<5)-t+e.charCodeAt(0))&t}),0)}function compileJsSoundCode(_ref){var code=_ref.code,params=_ref.params,hash=hashCode(code+params.map((function(t){return t.value+""})).join(";"));try{var paramsArgs=params.map((function(t){return t.name+","})).join(""),code2="((SAMPLE_COUNT, RATE,CHANNEL, {"+paramsArgs.slice(0,-1)+"}) => {"+code+"})",f=eval(code2),a=f([0,1,2,3,4,5,6,7,8,9,10],44100,1,{});return{func:f,valid:!0,hash:hash}}catch(e){return console.error("CANT USE CODE ",e),{func:function(){return 0},valid:!1,hash:hash}}}function testSetting(t){var e=compileJsSoundCode({code:t.code,params:t.params});return{valid:e.valid,hash:e.hash}}function computeSetting(t,e,n){var i=t.code,a=t.params,r=compileJsSoundCode({code:i,params:a}),s={};return a.forEach((function(t){return s[t.name]=t.value})),r.func(e,n,0,s)}function exportWav(t,e){var n=new wavefile__WEBPACK_IMPORTED_MODULE_2__.a,i=e.map((function(t){return 32767*t}));return n.fromScratch(1,t,"16",i),"data:Audio/WAV;base64,"+n.toBase64()}Object(comlink__WEBPACK_IMPORTED_MODULE_0__.a)(Object.keys(__webpack_exports__).reduce((function(t,e){return"__esModule"==e||(t[e]=__webpack_exports__[e]),t}),{}))},function(t,e,n){"use strict";n.r(e),n.d(e,"Deflate",(function(){return $e})),n.d(e,"Inflate",(function(){return an})),n.d(e,"constants",(function(){return on})),n.d(e,"deflate",(function(){return tn})),n.d(e,"deflateRaw",(function(){return en})),n.d(e,"gzip",(function(){return nn})),n.d(e,"inflate",(function(){return rn})),n.d(e,"inflateRaw",(function(){return sn})),n.d(e,"ungzip",(function(){return hn}));function i(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,r=286,s=30,h=15,o=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),c=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new Array(576);i(d);var f=new Array(60);i(f);var _=new Array(512);i(_);var p=new Array(256);i(p);var m=new Array(29);i(m);var v,g,b,k=new Array(s);function w(t,e,n,i,a){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=a,this.has_stree=t&&t.length}function y(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}i(k);var I=function(t){return t<256?_[t]:_[256+(t>>>7)]},S=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},x=function(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,S(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},C=function(t,e,n){x(t,n[2*e],n[2*e+1])},T=function(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},z=function(t,e,n){var i,a,r=new Array(16),s=0;for(i=1;i<=h;i++)r[i]=s=s+n[i-1]<<1;for(a=0;a<=e;a++){var o=t[2*a+1];0!==o&&(t[2*a]=T(r[o]++,o))}},L=function(t){var e;for(e=0;e<r;e++)t.dyn_ltree[2*e]=0;for(e=0;e<s;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},M=function(t){t.bi_valid>8?S(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},A=function(t,e,n,i){var a=2*e,r=2*n;return t[a]<t[r]||t[a]===t[r]&&i[e]<=i[n]},E=function(t,e,n){for(var i=t.heap[n],a=n<<1;a<=t.heap_len&&(a<t.heap_len&&A(e,t.heap[a+1],t.heap[a],t.depth)&&a++,!A(e,i,t.heap[a],t.depth));)t.heap[n]=t.heap[a],n=a,a<<=1;t.heap[n]=i},P=function(t,e,n){var i,r,s,h,l=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],r=t.pending_buf[t.l_buf+l],l++,0===i?C(t,r,e):(s=p[r],C(t,s+a+1,e),0!==(h=o[s])&&(r-=m[s],x(t,r,h)),i--,s=I(i),C(t,s,n),0!==(h=u[s])&&(i-=k[s],x(t,i,h)))}while(l<t.last_lit);C(t,256,e)},O=function(t,e){var n,i,a,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==r[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):r[2*n+1]=0;for(;t.heap_len<2;)r[2*(a=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[a]=0,t.opt_len--,o&&(t.static_len-=s[2*a+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)E(t,r,n);a=u;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],E(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,r[2*a]=r[2*n]+r[2*i],t.depth[a]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,r[2*n+1]=r[2*i+1]=a,t.heap[1]=a++,E(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,a,r,s,o,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,d=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,_=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(r=0;r<=h;r++)t.bl_count[r]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)(r=u[2*u[2*(i=t.heap[n])+1]+1]+1)>p&&(r=p,m++),u[2*i+1]=r,i>l||(t.bl_count[r]++,s=0,i>=_&&(s=f[i-_]),o=u[2*i],t.opt_len+=o*(r+s),d&&(t.static_len+=o*(c[2*i+1]+s)));if(0!==m){do{for(r=p-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(r=p;0!==r;r--)for(i=t.bl_count[r];0!==i;)(a=t.heap[--n])>l||(u[2*a+1]!==r&&(t.opt_len+=(r-u[2*a+1])*u[2*a],u[2*a+1]=r),i--)}}(t,e),z(r,l,t.bl_count)},D=function(t,e,n){var i,a,r=-1,s=e[1],h=0,o=7,u=4;for(0===s&&(o=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)a=s,s=e[2*(i+1)+1],++h<o&&a===s||(h<u?t.bl_tree[2*a]+=h:0!==a?(a!==r&&t.bl_tree[2*a]++,t.bl_tree[32]++):h<=10?t.bl_tree[34]++:t.bl_tree[36]++,h=0,r=a,0===s?(o=138,u=3):a===s?(o=6,u=3):(o=7,u=4))},R=function(t,e,n){var i,a,r=-1,s=e[1],h=0,o=7,u=4;for(0===s&&(o=138,u=3),i=0;i<=n;i++)if(a=s,s=e[2*(i+1)+1],!(++h<o&&a===s)){if(h<u)do{C(t,a,t.bl_tree)}while(0!==--h);else 0!==a?(a!==r&&(C(t,a,t.bl_tree),h--),C(t,16,t.bl_tree),x(t,h-3,2)):h<=10?(C(t,17,t.bl_tree),x(t,h-3,3)):(C(t,18,t.bl_tree),x(t,h-11,7));h=0,r=a,0===s?(o=138,u=3):a===s?(o=6,u=3):(o=7,u=4)}},F=!1,U=function(t,e,n,i){x(t,0+(i?1:0),3),function(t,e,n,i){M(t),i&&(S(t,n),S(t,~n)),t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n}(t,e,n,!0)},B={_tr_init:function(t){F||(!function(){var t,e,n,i,a,c=new Array(16);for(n=0,i=0;i<28;i++)for(m[i]=n,t=0;t<1<<o[i];t++)p[n++]=i;for(p[n-1]=i,a=0,i=0;i<16;i++)for(k[i]=a,t=0;t<1<<u[i];t++)_[a++]=i;for(a>>=7;i<s;i++)for(k[i]=a<<7,t=0;t<1<<u[i]-7;t++)_[256+a++]=i;for(e=0;e<=h;e++)c[e]=0;for(t=0;t<=143;)d[2*t+1]=8,t++,c[8]++;for(;t<=255;)d[2*t+1]=9,t++,c[9]++;for(;t<=279;)d[2*t+1]=7,t++,c[7]++;for(;t<=287;)d[2*t+1]=8,t++,c[8]++;for(z(d,287,c),t=0;t<s;t++)f[2*t+1]=5,f[2*t]=T(t,5);v=new w(d,o,257,r,h),g=new w(f,u,0,s,h),b=new w(new Array(0),l,0,19,7)}(),F=!0),t.l_desc=new y(t.dyn_ltree,v),t.d_desc=new y(t.dyn_dtree,g),t.bl_desc=new y(t.bl_tree,b),t.bi_buf=0,t.bi_valid=0,L(t)},_tr_stored_block:U,_tr_flush_block:function(t,e,n,i){var r,s,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),O(t,t.l_desc),O(t,t.d_desc),h=function(t){var e;for(D(t,t.dyn_ltree,t.l_desc.max_code),D(t,t.dyn_dtree,t.d_desc.max_code),O(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*c[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=r&&(r=s)):r=s=n+5,n+4<=r&&-1!==e?U(t,e,n,i):4===t.strategy||s===r?(x(t,2+(i?1:0),3),P(t,d,f)):(x(t,4+(i?1:0),3),function(t,e,n,i){var a;for(x(t,e-257,5),x(t,n-1,5),x(t,i-4,4),a=0;a<i;a++)x(t,t.bl_tree[2*c[a]+1],3);R(t,t.dyn_ltree,e-1),R(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),P(t,t.dyn_ltree,t.dyn_dtree)),L(t),i&&M(t)},_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(p[n]+a+1)]++,t.dyn_dtree[2*I(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){x(t,2,3),C(t,256,d),function(t){16===t.bi_valid?(S(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},j=function(t,e,n,i){for(var a=65535&t|0,r=t>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{r=r+(a=a+e[i++]|0)|0}while(--s);a%=65521,r%=65521}return a|r<<16|0},N=new Uint32Array(function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}()),Z=function(t,e,n,i){var a=N,r=i+n;t^=-1;for(var s=i;s<r;s++)t=t>>>8^a[255&(t^e[s])];return-1^t},H={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},X={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},W=B._tr_init,K=B._tr_stored_block,q=B._tr_flush_block,G=B._tr_tally,V=B._tr_align,J=X.Z_NO_FLUSH,Y=X.Z_PARTIAL_FLUSH,Q=X.Z_FULL_FLUSH,$=X.Z_FINISH,tt=X.Z_BLOCK,et=X.Z_OK,nt=X.Z_STREAM_END,it=X.Z_STREAM_ERROR,at=X.Z_DATA_ERROR,rt=X.Z_BUF_ERROR,st=X.Z_DEFAULT_COMPRESSION,ht=X.Z_FILTERED,ot=X.Z_HUFFMAN_ONLY,ut=X.Z_RLE,lt=X.Z_FIXED,ct=X.Z_DEFAULT_STRATEGY,dt=X.Z_UNKNOWN,ft=X.Z_DEFLATED,_t=258,pt=262,mt=103,vt=113,gt=666,bt=function(t,e){return t.msg=H[e],e},kt=function(t){return(t<<1)-(t>4?9:0)},wt=function(t){for(var e=t.length;--e>=0;)t[e]=0},yt=function(t,e,n){return(e<<t.hash_shift^n)&t.hash_mask},It=function(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},St=function(t,e){q(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,It(t.strm)},xt=function(t,e){t.pending_buf[t.pending++]=e},Ct=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Tt=function(t,e,n,i){var a=t.avail_in;return a>i&&(a=i),0===a?0:(t.avail_in-=a,e.set(t.input.subarray(t.next_in,t.next_in+a),n),1===t.state.wrap?t.adler=j(t.adler,e,a,n):2===t.state.wrap&&(t.adler=Z(t.adler,e,a,n)),t.next_in+=a,t.total_in+=a,a)},zt=function(t,e){var n,i,a=t.max_chain_length,r=t.strstart,s=t.prev_length,h=t.nice_match,o=t.strstart>t.w_size-pt?t.strstart-(t.w_size-pt):0,u=t.window,l=t.w_mask,c=t.prev,d=t.strstart+_t,f=u[r+s-1],_=u[r+s];t.prev_length>=t.good_match&&(a>>=2),h>t.lookahead&&(h=t.lookahead);do{if(u[(n=e)+s]===_&&u[n+s-1]===f&&u[n]===u[r]&&u[++n]===u[r+1]){r+=2,n++;do{}while(u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&u[++r]===u[++n]&&r<d);if(i=_t-(d-r),r=d-_t,i>s){if(t.match_start=e,s=i,i>=h)break;f=u[r+s-1],_=u[r+s]}}}while((e=c[e&l])>o&&0!==--a);return s<=t.lookahead?s:t.lookahead},Lt=function(t){var e,n,i,a,r,s=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-pt)){t.window.set(t.window.subarray(s,s+s),0),t.match_start-=s,t.strstart-=s,t.block_start-=s,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=s?i-s:0}while(--n);e=n=s;do{i=t.prev[--e],t.prev[e]=i>=s?i-s:0}while(--n);a+=s}if(0===t.strm.avail_in)break;if(n=Tt(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=n,t.lookahead+t.insert>=3)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=yt(t,t.ins_h,t.window[r+1]);t.insert&&(t.ins_h=yt(t,t.ins_h,t.window[r+3-1]),t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<pt&&0!==t.strm.avail_in)},Mt=function(t,e){for(var n,i;;){if(t.lookahead<pt){if(Lt(t),t.lookahead<pt&&e===J)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-pt&&(t.match_length=zt(t,n)),t.match_length>=3)if(i=G(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=yt(t,t.ins_h,t.window[t.strstart+1]);else i=G(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(St(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===$?(St(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(St(t,!1),0===t.strm.avail_out)?1:2},At=function(t,e){for(var n,i,a;;){if(t.lookahead<pt){if(Lt(t),t.lookahead<pt&&e===J)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-pt&&(t.match_length=zt(t,n),t.match_length<=5&&(t.strategy===ht||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){a=t.strstart+t.lookahead-3,i=G(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=a&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(St(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((i=G(t,0,t.window[t.strstart-1]))&&St(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=G(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===$?(St(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(St(t,!1),0===t.strm.avail_out)?1:2};function Et(t,e,n,i,a){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=a}var Pt=[new Et(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Lt(t),0===t.lookahead&&e===J)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,St(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-pt&&(St(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===$?(St(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(St(t,!1),t.strm.avail_out),1)})),new Et(4,4,8,4,Mt),new Et(4,5,16,8,Mt),new Et(4,6,32,32,Mt),new Et(4,4,16,16,At),new Et(8,16,32,32,At),new Et(8,16,128,128,At),new Et(8,32,128,256,At),new Et(32,128,258,1024,At),new Et(32,258,258,4096,At)];function Ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ft,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),wt(this.dyn_ltree),wt(this.dyn_dtree),wt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),wt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),wt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Dt=function(t){if(!t||!t.state)return bt(t,it);t.total_in=t.total_out=0,t.data_type=dt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:vt,t.adler=2===e.wrap?0:1,e.last_flush=J,W(e),et},Rt=function(t){var e,n=Dt(t);return n===et&&((e=t.state).window_size=2*e.w_size,wt(e.head),e.max_lazy_match=Pt[e.level].max_lazy,e.good_match=Pt[e.level].good_length,e.nice_match=Pt[e.level].nice_length,e.max_chain_length=Pt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),n},Ft=function(t,e,n,i,a,r){if(!t)return it;var s=1;if(e===st&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),a<1||a>9||n!==ft||i<8||i>15||e<0||e>9||r<0||r>lt)return bt(t,it);8===i&&(i=9);var h=new Ot;return t.state=h,h.strm=t,h.wrap=s,h.gzhead=null,h.w_bits=i,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=a+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new Uint8Array(2*h.w_size),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<a+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new Uint8Array(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=r,h.method=n,Rt(t)},Ut={deflateInit:function(t,e){return Ft(t,e,ft,15,8,ct)},deflateInit2:Ft,deflateReset:Rt,deflateResetKeep:Dt,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?it:(t.state.gzhead=e,et):it},deflate:function(t,e){var n,i;if(!t||!t.state||e>tt||e<0)return t?bt(t,it):it;var a=t.state;if(!t.output||!t.input&&0!==t.avail_in||a.status===gt&&e!==$)return bt(t,0===t.avail_out?rt:it);a.strm=t;var r=a.last_flush;if(a.last_flush=e,42===a.status)if(2===a.wrap)t.adler=0,xt(a,31),xt(a,139),xt(a,8),a.gzhead?(xt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),xt(a,255&a.gzhead.time),xt(a,a.gzhead.time>>8&255),xt(a,a.gzhead.time>>16&255),xt(a,a.gzhead.time>>24&255),xt(a,9===a.level?2:a.strategy>=ot||a.level<2?4:0),xt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(xt(a,255&a.gzhead.extra.length),xt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=Z(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(xt(a,0),xt(a,0),xt(a,0),xt(a,0),xt(a,0),xt(a,9===a.level?2:a.strategy>=ot||a.level<2?4:0),xt(a,3),a.status=vt);else{var s=ft+(a.w_bits-8<<4)<<8;s|=(a.strategy>=ot||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(s|=32),s+=31-s%31,a.status=vt,Ct(a,s),0!==a.strstart&&(Ct(a,t.adler>>>16),Ct(a,65535&t.adler)),t.adler=1}if(69===a.status)if(a.gzhead.extra){for(n=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>n&&(t.adler=Z(t.adler,a.pending_buf,a.pending-n,n)),It(t),n=a.pending,a.pending!==a.pending_buf_size));)xt(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>n&&(t.adler=Z(t.adler,a.pending_buf,a.pending-n,n)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){n=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>n&&(t.adler=Z(t.adler,a.pending_buf,a.pending-n,n)),It(t),n=a.pending,a.pending===a.pending_buf_size)){i=1;break}i=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,xt(a,i)}while(0!==i);a.gzhead.hcrc&&a.pending>n&&(t.adler=Z(t.adler,a.pending_buf,a.pending-n,n)),0===i&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){n=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>n&&(t.adler=Z(t.adler,a.pending_buf,a.pending-n,n)),It(t),n=a.pending,a.pending===a.pending_buf_size)){i=1;break}i=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,xt(a,i)}while(0!==i);a.gzhead.hcrc&&a.pending>n&&(t.adler=Z(t.adler,a.pending_buf,a.pending-n,n)),0===i&&(a.status=mt)}else a.status=mt;if(a.status===mt&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&It(t),a.pending+2<=a.pending_buf_size&&(xt(a,255&t.adler),xt(a,t.adler>>8&255),t.adler=0,a.status=vt)):a.status=vt),0!==a.pending){if(It(t),0===t.avail_out)return a.last_flush=-1,et}else if(0===t.avail_in&&kt(e)<=kt(r)&&e!==$)return bt(t,rt);if(a.status===gt&&0!==t.avail_in)return bt(t,rt);if(0!==t.avail_in||0!==a.lookahead||e!==J&&a.status!==gt){var h=a.strategy===ot?function(t,e){for(var n;;){if(0===t.lookahead&&(Lt(t),0===t.lookahead)){if(e===J)return 1;break}if(t.match_length=0,n=G(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(St(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===$?(St(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(St(t,!1),0===t.strm.avail_out)?1:2}(a,e):a.strategy===ut?function(t,e){for(var n,i,a,r,s=t.window;;){if(t.lookahead<=_t){if(Lt(t),t.lookahead<=_t&&e===J)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=s[a=t.strstart-1])===s[++a]&&i===s[++a]&&i===s[++a]){r=t.strstart+_t;do{}while(i===s[++a]&&i===s[++a]&&i===s[++a]&&i===s[++a]&&i===s[++a]&&i===s[++a]&&i===s[++a]&&i===s[++a]&&a<r);t.match_length=_t-(r-a),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=G(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=G(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(St(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===$?(St(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(St(t,!1),0===t.strm.avail_out)?1:2}(a,e):Pt[a.level].func(a,e);if(3!==h&&4!==h||(a.status=gt),1===h||3===h)return 0===t.avail_out&&(a.last_flush=-1),et;if(2===h&&(e===Y?V(a):e!==tt&&(K(a,0,0,!1),e===Q&&(wt(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),It(t),0===t.avail_out))return a.last_flush=-1,et}return e!==$?et:a.wrap<=0?nt:(2===a.wrap?(xt(a,255&t.adler),xt(a,t.adler>>8&255),xt(a,t.adler>>16&255),xt(a,t.adler>>24&255),xt(a,255&t.total_in),xt(a,t.total_in>>8&255),xt(a,t.total_in>>16&255),xt(a,t.total_in>>24&255)):(Ct(a,t.adler>>>16),Ct(a,65535&t.adler)),It(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?et:nt)},deflateEnd:function(t){if(!t||!t.state)return it;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==mt&&e!==vt&&e!==gt?bt(t,it):(t.state=null,e===vt?bt(t,at):et)},deflateSetDictionary:function(t,e){var n=e.length;if(!t||!t.state)return it;var i=t.state,a=i.wrap;if(2===a||1===a&&42!==i.status||i.lookahead)return it;if(1===a&&(t.adler=j(t.adler,e,n,0)),i.wrap=0,n>=i.w_size){0===a&&(wt(i.head),i.strstart=0,i.block_start=0,i.insert=0);var r=new Uint8Array(i.w_size);r.set(e.subarray(n-i.w_size,n),0),e=r,n=i.w_size}var s=t.avail_in,h=t.next_in,o=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,Lt(i);i.lookahead>=3;){var u=i.strstart,l=i.lookahead-2;do{i.ins_h=yt(i,i.ins_h,i.window[u+3-1]),i.prev[u&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=u,u++}while(--l);i.strstart=u,i.lookahead=2,Lt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=h,t.input=o,t.avail_in=s,i.wrap=a,et},deflateInfo:"pako deflate (from Nodeca project)"},Bt=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},jt=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(var i in n)Bt(n,i)&&(t[i]=n[i])}}return t},Nt=function(t){for(var e=0,n=0,i=t.length;n<i;n++)e+=t[n].length;for(var a=new Uint8Array(e),r=0,s=0,h=t.length;r<h;r++){var o=t[r];a.set(o,s),s+=o.length}return a},Zt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(ln){Zt=!1}for(var Ht=new Uint8Array(256),Xt=0;Xt<256;Xt++)Ht[Xt]=Xt>=252?6:Xt>=248?5:Xt>=240?4:Xt>=224?3:Xt>=192?2:1;Ht[254]=Ht[254]=1;var Wt=function(t){var e,n,i,a,r,s=t.length,h=0;for(a=0;a<s;a++)55296===(64512&(n=t.charCodeAt(a)))&&a+1<s&&56320===(64512&(i=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),h+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(h),r=0,a=0;r<h;a++)55296===(64512&(n=t.charCodeAt(a)))&&a+1<s&&56320===(64512&(i=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?e[r++]=n:n<2048?(e[r++]=192|n>>>6,e[r++]=128|63&n):n<65536?(e[r++]=224|n>>>12,e[r++]=128|n>>>6&63,e[r++]=128|63&n):(e[r++]=240|n>>>18,e[r++]=128|n>>>12&63,e[r++]=128|n>>>6&63,e[r++]=128|63&n);return e},Kt=function(t,e){var n,i,a=e||t.length,r=new Array(2*a);for(i=0,n=0;n<a;){var s=t[n++];if(s<128)r[i++]=s;else{var h=Ht[s];if(h>4)r[i++]=65533,n+=h-1;else{for(s&=2===h?31:3===h?15:7;h>1&&n<a;)s=s<<6|63&t[n++],h--;h>1?r[i++]=65533:s<65536?r[i++]=s:(s-=65536,r[i++]=55296|s>>10&1023,r[i++]=56320|1023&s)}}}return function(t,e){if(e<65534&&t.subarray&&Zt)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}(r,i)},qt=function(t,e){(e=e||t.length)>t.length&&(e=t.length);for(var n=e-1;n>=0&&128===(192&t[n]);)n--;return n<0||0===n?e:n+Ht[t[n]]>e?n:e};var Gt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Vt=Object.prototype.toString,Jt=X.Z_NO_FLUSH,Yt=X.Z_SYNC_FLUSH,Qt=X.Z_FULL_FLUSH,$t=X.Z_FINISH,te=X.Z_OK,ee=X.Z_STREAM_END,ne=X.Z_DEFAULT_COMPRESSION,ie=X.Z_DEFAULT_STRATEGY,ae=X.Z_DEFLATED;function re(t){this.options=jt({level:ne,method:ae,chunkSize:16384,windowBits:15,memLevel:8,strategy:ie},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Gt,this.strm.avail_out=0;var n=Ut.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==te)throw new Error(H[n]);if(e.header&&Ut.deflateSetHeader(this.strm,e.header),e.dictionary){var i;if(i="string"===typeof e.dictionary?Wt(e.dictionary):"[object ArrayBuffer]"===Vt.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=Ut.deflateSetDictionary(this.strm,i))!==te)throw new Error(H[n]);this._dict_set=!0}}function se(t,e){var n=new re(e);if(n.push(t,!0),n.err)throw n.msg||H[n.err];return n.result}re.prototype.push=function(t,e){var n,i,a=this.strm,r=this.options.chunkSize;if(this.ended)return!1;for(i=e===~~e?e:!0===e?$t:Jt,"string"===typeof t?a.input=Wt(t):"[object ArrayBuffer]"===Vt.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(r),a.next_out=0,a.avail_out=r),(i===Yt||i===Qt)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if((n=Ut.deflate(a,i))===ee)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=Ut.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===te;if(0!==a.avail_out){if(i>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},re.prototype.onData=function(t){this.chunks.push(t)},re.prototype.onEnd=function(t){t===te&&(this.result=Nt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var he={Deflate:re,deflate:se,deflateRaw:function(t,e){return(e=e||{}).raw=!0,se(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,se(t,e)},constants:X},oe=function(t,e){var n,i,a,r,s,h,o,u,l,c,d,f,_,p,m,v,g,b,k,w,y,I,S,x,C=t.state;n=t.next_in,S=t.input,i=n+(t.avail_in-5),a=t.next_out,x=t.output,r=a-(e-t.avail_out),s=a+(t.avail_out-257),h=C.dmax,o=C.wsize,u=C.whave,l=C.wnext,c=C.window,d=C.hold,f=C.bits,_=C.lencode,p=C.distcode,m=(1<<C.lenbits)-1,v=(1<<C.distbits)-1;t:do{f<15&&(d+=S[n++]<<f,f+=8,d+=S[n++]<<f,f+=8),g=_[d&m];e:for(;;){if(d>>>=b=g>>>24,f-=b,0===(b=g>>>16&255))x[a++]=65535&g;else{if(!(16&b)){if(0===(64&b)){g=_[(65535&g)+(d&(1<<b)-1)];continue e}if(32&b){C.mode=12;break t}t.msg="invalid literal/length code",C.mode=30;break t}k=65535&g,(b&=15)&&(f<b&&(d+=S[n++]<<f,f+=8),k+=d&(1<<b)-1,d>>>=b,f-=b),f<15&&(d+=S[n++]<<f,f+=8,d+=S[n++]<<f,f+=8),g=p[d&v];n:for(;;){if(d>>>=b=g>>>24,f-=b,!(16&(b=g>>>16&255))){if(0===(64&b)){g=p[(65535&g)+(d&(1<<b)-1)];continue n}t.msg="invalid distance code",C.mode=30;break t}if(w=65535&g,f<(b&=15)&&(d+=S[n++]<<f,(f+=8)<b&&(d+=S[n++]<<f,f+=8)),(w+=d&(1<<b)-1)>h){t.msg="invalid distance too far back",C.mode=30;break t}if(d>>>=b,f-=b,w>(b=a-r)){if((b=w-b)>u&&C.sane){t.msg="invalid distance too far back",C.mode=30;break t}if(y=0,I=c,0===l){if(y+=o-b,b<k){k-=b;do{x[a++]=c[y++]}while(--b);y=a-w,I=x}}else if(l<b){if(y+=o+l-b,(b-=l)<k){k-=b;do{x[a++]=c[y++]}while(--b);if(y=0,l<k){k-=b=l;do{x[a++]=c[y++]}while(--b);y=a-w,I=x}}}else if(y+=l-b,b<k){k-=b;do{x[a++]=c[y++]}while(--b);y=a-w,I=x}for(;k>2;)x[a++]=I[y++],x[a++]=I[y++],x[a++]=I[y++],k-=3;k&&(x[a++]=I[y++],k>1&&(x[a++]=I[y++]))}else{y=a-w;do{x[a++]=x[y++],x[a++]=x[y++],x[a++]=x[y++],k-=3}while(k>2);k&&(x[a++]=x[y++],k>1&&(x[a++]=x[y++]))}break}}break}}while(n<i&&a<s);n-=k=f>>3,d&=(1<<(f-=k<<3))-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=a<s?s-a+257:257-(a-s),C.hold=d,C.bits=f},ue=15,le=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ce=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),de=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),fe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),_e=function(t,e,n,i,a,r,s,h){var o,u,l,c,d,f,_,p,m,v=h.bits,g=0,b=0,k=0,w=0,y=0,I=0,S=0,x=0,C=0,T=0,z=null,L=0,M=new Uint16Array(16),A=new Uint16Array(16),E=null,P=0;for(g=0;g<=ue;g++)M[g]=0;for(b=0;b<i;b++)M[e[n+b]]++;for(y=v,w=ue;w>=1&&0===M[w];w--);if(y>w&&(y=w),0===w)return a[r++]=20971520,a[r++]=20971520,h.bits=1,0;for(k=1;k<w&&0===M[k];k++);for(y<k&&(y=k),x=1,g=1;g<=ue;g++)if(x<<=1,(x-=M[g])<0)return-1;if(x>0&&(0===t||1!==w))return-1;for(A[1]=0,g=1;g<ue;g++)A[g+1]=A[g]+M[g];for(b=0;b<i;b++)0!==e[n+b]&&(s[A[e[n+b]]++]=b);if(0===t?(z=E=s,f=19):1===t?(z=le,L-=257,E=ce,P-=257,f=256):(z=de,E=fe,f=-1),T=0,b=0,g=k,d=r,I=y,S=0,l=-1,c=(C=1<<y)-1,1===t&&C>852||2===t&&C>592)return 1;for(;;){_=g-S,s[b]<f?(p=0,m=s[b]):s[b]>f?(p=E[P+s[b]],m=z[L+s[b]]):(p=96,m=0),o=1<<g-S,k=u=1<<I;do{a[d+(T>>S)+(u-=o)]=_<<24|p<<16|m|0}while(0!==u);for(o=1<<g-1;T&o;)o>>=1;if(0!==o?(T&=o-1,T+=o):T=0,b++,0===--M[g]){if(g===w)break;g=e[n+s[b]]}if(g>y&&(T&c)!==l){for(0===S&&(S=y),d+=k,x=1<<(I=g-S);I+S<w&&!((x-=M[I+S])<=0);)I++,x<<=1;if(C+=1<<I,1===t&&C>852||2===t&&C>592)return 1;a[l=T&c]=y<<24|I<<16|d-r|0}}return 0!==T&&(a[d+T]=g-S<<24|64<<16|0),h.bits=y,0},pe=X.Z_FINISH,me=X.Z_BLOCK,ve=X.Z_TREES,ge=X.Z_OK,be=X.Z_STREAM_END,ke=X.Z_NEED_DICT,we=X.Z_STREAM_ERROR,ye=X.Z_DATA_ERROR,Ie=X.Z_MEM_ERROR,Se=X.Z_BUF_ERROR,xe=X.Z_DEFLATED,Ce=12,Te=30,ze=function(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)};function Le(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Me,Ae,Ee=function(t){if(!t||!t.state)return we;var e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,ge},Pe=function(t){if(!t||!t.state)return we;var e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Ee(t)},Oe=function(t,e){var n;if(!t||!t.state)return we;var i=t.state;return e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?we:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,Pe(t))},De=function(t,e){if(!t)return we;var n=new Le;t.state=n,n.window=null;var i=Oe(t,e);return i!==ge&&(t.state=null),i},Re=!0,Fe=function(t){if(Re){Me=new Int32Array(512),Ae=new Int32Array(32);for(var e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(_e(1,t.lens,0,288,Me,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;_e(2,t.lens,0,32,Ae,0,t.work,{bits:5}),Re=!1}t.lencode=Me,t.lenbits=9,t.distcode=Ae,t.distbits=5},Ue=function(t,e,n,i){var a,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),i>=r.wsize?(r.window.set(e.subarray(n-r.wsize,n),0),r.wnext=0,r.whave=r.wsize):((a=r.wsize-r.wnext)>i&&(a=i),r.window.set(e.subarray(n-i,n-i+a),r.wnext),(i-=a)?(r.window.set(e.subarray(n-i,n),0),r.wnext=i,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0},Be={inflateReset:Pe,inflateReset2:Oe,inflateResetKeep:Ee,inflateInit:function(t){return De(t,15)},inflateInit2:De,inflate:function(t,e){var n,i,a,r,s,h,o,u,l,c,d,f,_,p,m,v,g,b,k,w,y,I,S,x,C=0,T=new Uint8Array(4),z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return we;(n=t.state).mode===Ce&&(n.mode=13),s=t.next_out,a=t.output,o=t.avail_out,r=t.next_in,i=t.input,h=t.avail_in,u=n.hold,l=n.bits,c=h,d=o,I=ge;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;l<16;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}if(2&n.wrap&&35615===u){n.check=0,T[0]=255&u,T[1]=u>>>8&255,n.check=Z(n.check,T,2,0),u=0,l=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=Te;break}if((15&u)!==xe){t.msg="unknown compression method",n.mode=Te;break}if(l-=4,y=8+(15&(u>>>=4)),0===n.wbits)n.wbits=y;else if(y>n.wbits){t.msg="invalid window size",n.mode=Te;break}n.dmax=1<<n.wbits,t.adler=n.check=1,n.mode=512&u?10:Ce,u=0,l=0;break;case 2:for(;l<16;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}if(n.flags=u,(255&n.flags)!==xe){t.msg="unknown compression method",n.mode=Te;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Te;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,n.check=Z(n.check,T,2,0)),u=0,l=0,n.mode=3;case 3:for(;l<32;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}n.head&&(n.head.time=u),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,n.check=Z(n.check,T,4,0)),u=0,l=0,n.mode=4;case 4:for(;l<16;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,n.check=Z(n.check,T,2,0)),u=0,l=0,n.mode=5;case 5:if(1024&n.flags){for(;l<16;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,n.check=Z(n.check,T,2,0)),u=0,l=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((f=n.length)>h&&(f=h),f&&(n.head&&(y=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(r,r+f),y)),512&n.flags&&(n.check=Z(n.check,i,f,r)),h-=f,r+=f,n.length-=f),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===h)break t;f=0;do{y=i[r+f++],n.head&&y&&n.length<65536&&(n.head.name+=String.fromCharCode(y))}while(y&&f<h);if(512&n.flags&&(n.check=Z(n.check,i,f,r)),h-=f,r+=f,y)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===h)break t;f=0;do{y=i[r+f++],n.head&&y&&n.length<65536&&(n.head.comment+=String.fromCharCode(y))}while(y&&f<h);if(512&n.flags&&(n.check=Z(n.check,i,f,r)),h-=f,r+=f,y)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;l<16;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}if(u!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Te;break}u=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Ce;break;case 10:for(;l<32;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}t.adler=n.check=ze(u),u=0,l=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=s,t.avail_out=o,t.next_in=r,t.avail_in=h,n.hold=u,n.bits=l,ke;t.adler=n.check=1,n.mode=Ce;case Ce:if(e===me||e===ve)break t;case 13:if(n.last){u>>>=7&l,l-=7&l,n.mode=27;break}for(;l<3;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}switch(n.last=1&u,l-=1,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(Fe(n),n.mode=20,e===ve){u>>>=2,l-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=Te}u>>>=2,l-=2;break;case 14:for(u>>>=7&l,l-=7&l;l<32;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}if((65535&u)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Te;break}if(n.length=65535&u,u=0,l=0,n.mode=15,e===ve)break t;case 15:n.mode=16;case 16:if(f=n.length){if(f>h&&(f=h),f>o&&(f=o),0===f)break t;a.set(i.subarray(r,r+f),s),h-=f,r+=f,o-=f,s+=f,n.length-=f;break}n.mode=Ce;break;case 17:for(;l<14;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}if(n.nlen=257+(31&u),u>>>=5,l-=5,n.ndist=1+(31&u),u>>>=5,l-=5,n.ncode=4+(15&u),u>>>=4,l-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Te;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;l<3;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}n.lens[z[n.have++]]=7&u,u>>>=3,l-=3}for(;n.have<19;)n.lens[z[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,S={bits:n.lenbits},I=_e(0,n.lens,0,19,n.lencode,0,n.work,S),n.lenbits=S.bits,I){t.msg="invalid code lengths set",n.mode=Te;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;v=(C=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,g=65535&C,!((m=C>>>24)<=l);){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}if(g<16)u>>>=m,l-=m,n.lens[n.have++]=g;else{if(16===g){for(x=m+2;l<x;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}if(u>>>=m,l-=m,0===n.have){t.msg="invalid bit length repeat",n.mode=Te;break}y=n.lens[n.have-1],f=3+(3&u),u>>>=2,l-=2}else if(17===g){for(x=m+3;l<x;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}l-=m,y=0,f=3+(7&(u>>>=m)),u>>>=3,l-=3}else{for(x=m+7;l<x;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}l-=m,y=0,f=11+(127&(u>>>=m)),u>>>=7,l-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Te;break}for(;f--;)n.lens[n.have++]=y}}if(n.mode===Te)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Te;break}if(n.lenbits=9,S={bits:n.lenbits},I=_e(1,n.lens,0,n.nlen,n.lencode,0,n.work,S),n.lenbits=S.bits,I){t.msg="invalid literal/lengths set",n.mode=Te;break}if(n.distbits=6,n.distcode=n.distdyn,S={bits:n.distbits},I=_e(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,S),n.distbits=S.bits,I){t.msg="invalid distances set",n.mode=Te;break}if(n.mode=20,e===ve)break t;case 20:n.mode=21;case 21:if(h>=6&&o>=258){t.next_out=s,t.avail_out=o,t.next_in=r,t.avail_in=h,n.hold=u,n.bits=l,oe(t,d),s=t.next_out,a=t.output,o=t.avail_out,r=t.next_in,i=t.input,h=t.avail_in,u=n.hold,l=n.bits,n.mode===Ce&&(n.back=-1);break}for(n.back=0;v=(C=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,g=65535&C,!((m=C>>>24)<=l);){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}if(v&&0===(240&v)){for(b=m,k=v,w=g;v=(C=n.lencode[w+((u&(1<<b+k)-1)>>b)])>>>16&255,g=65535&C,!(b+(m=C>>>24)<=l);){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}u>>>=b,l-=b,n.back+=b}if(u>>>=m,l-=m,n.back+=m,n.length=g,0===v){n.mode=26;break}if(32&v){n.back=-1,n.mode=Ce;break}if(64&v){t.msg="invalid literal/length code",n.mode=Te;break}n.extra=15&v,n.mode=22;case 22:if(n.extra){for(x=n.extra;l<x;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;v=(C=n.distcode[u&(1<<n.distbits)-1])>>>16&255,g=65535&C,!((m=C>>>24)<=l);){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}if(0===(240&v)){for(b=m,k=v,w=g;v=(C=n.distcode[w+((u&(1<<b+k)-1)>>b)])>>>16&255,g=65535&C,!(b+(m=C>>>24)<=l);){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}u>>>=b,l-=b,n.back+=b}if(u>>>=m,l-=m,n.back+=m,64&v){t.msg="invalid distance code",n.mode=Te;break}n.offset=g,n.extra=15&v,n.mode=24;case 24:if(n.extra){for(x=n.extra;l<x;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Te;break}n.mode=25;case 25:if(0===o)break t;if(f=d-o,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Te;break}f>n.wnext?(f-=n.wnext,_=n.wsize-f):_=n.wnext-f,f>n.length&&(f=n.length),p=n.window}else p=a,_=s-n.offset,f=n.length;f>o&&(f=o),o-=f,n.length-=f;do{a[s++]=p[_++]}while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===o)break t;a[s++]=n.length,o--,n.mode=21;break;case 27:if(n.wrap){for(;l<32;){if(0===h)break t;h--,u|=i[r++]<<l,l+=8}if(d-=o,t.total_out+=d,n.total+=d,d&&(t.adler=n.check=n.flags?Z(n.check,a,d,s-d):j(n.check,a,d,s-d)),d=o,(n.flags?u:ze(u))!==n.check){t.msg="incorrect data check",n.mode=Te;break}u=0,l=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;l<32;){if(0===h)break t;h--,u+=i[r++]<<l,l+=8}if(u!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Te;break}u=0,l=0}n.mode=29;case 29:I=be;break t;case Te:I=ye;break t;case 31:return Ie;case 32:default:return we}return t.next_out=s,t.avail_out=o,t.next_in=r,t.avail_in=h,n.hold=u,n.bits=l,(n.wsize||d!==t.avail_out&&n.mode<Te&&(n.mode<27||e!==pe))&&Ue(t,t.output,t.next_out,d-t.avail_out),c-=t.avail_in,d-=t.avail_out,t.total_in+=c,t.total_out+=d,n.total+=d,n.wrap&&d&&(t.adler=n.check=n.flags?Z(n.check,a,d,t.next_out-d):j(n.check,a,d,t.next_out-d)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Ce?128:0)+(20===n.mode||15===n.mode?256:0),(0===c&&0===d||e===pe)&&I===ge&&(I=Se),I},inflateEnd:function(t){if(!t||!t.state)return we;var e=t.state;return e.window&&(e.window=null),t.state=null,ge},inflateGetHeader:function(t,e){if(!t||!t.state)return we;var n=t.state;return 0===(2&n.wrap)?we:(n.head=e,e.done=!1,ge)},inflateSetDictionary:function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?we:11===n.mode&&j(1,e,i,0)!==n.check?ye:Ue(t,e,i,i)?(n.mode=31,Ie):(n.havedict=1,ge):we},inflateInfo:"pako inflate (from Nodeca project)"};var je=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Ne=Object.prototype.toString,Ze=X.Z_NO_FLUSH,He=X.Z_FINISH,Xe=X.Z_OK,We=X.Z_STREAM_END,Ke=X.Z_NEED_DICT,qe=X.Z_STREAM_ERROR,Ge=X.Z_DATA_ERROR,Ve=X.Z_MEM_ERROR;function Je(t){this.options=jt({chunkSize:65536,windowBits:15,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Gt,this.strm.avail_out=0;var n=Be.inflateInit2(this.strm,e.windowBits);if(n!==Xe)throw new Error(H[n]);if(this.header=new je,Be.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"===typeof e.dictionary?e.dictionary=Wt(e.dictionary):"[object ArrayBuffer]"===Ne.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Be.inflateSetDictionary(this.strm,e.dictionary))!==Xe))throw new Error(H[n])}function Ye(t,e){var n=new Je(e);if(n.push(t),n.err)throw n.msg||H[n.err];return n.result}Je.prototype.push=function(t,e){var n,i,a,r=this.strm,s=this.options.chunkSize,h=this.options.dictionary;if(this.ended)return!1;for(i=e===~~e?e:!0===e?He:Ze,"[object ArrayBuffer]"===Ne.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(s),r.next_out=0,r.avail_out=s),(n=Be.inflate(r,i))===Ke&&h&&((n=Be.inflateSetDictionary(r,h))===Xe?n=Be.inflate(r,i):n===Ge&&(n=Ke));r.avail_in>0&&n===We&&r.state.wrap>0&&0!==t[r.next_in];)Be.inflateReset(r),n=Be.inflate(r,i);switch(n){case qe:case Ge:case Ke:case Ve:return this.onEnd(n),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(0===r.avail_out||n===We))if("string"===this.options.to){var o=qt(r.output,r.next_out),u=r.next_out-o,l=Kt(r.output,o);r.next_out=u,r.avail_out=s-u,u&&r.output.set(r.output.subarray(o,o+u),0),this.onData(l)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(n!==Xe||0!==a){if(n===We)return n=Be.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},Je.prototype.onData=function(t){this.chunks.push(t)},Je.prototype.onEnd=function(t){t===Xe&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Nt(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Qe={Inflate:Je,inflate:Ye,inflateRaw:function(t,e){return(e=e||{}).raw=!0,Ye(t,e)},ungzip:Ye,constants:X},$e=he.Deflate,tn=he.deflate,en=he.deflateRaw,nn=he.gzip,an=Qe.Inflate,rn=Qe.inflate,sn=Qe.inflateRaw,hn=Qe.ungzip,on=X,un={Deflate:$e,deflate:tn,deflateRaw:en,gzip:nn,Inflate:an,inflate:rn,inflateRaw:sn,ungzip:hn,constants:on};e.default=un},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComplexArray=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();e.FFT=function(t){return d(t).FFT()},e.InvFFT=function(t){return d(t).InvFFT()},e.frequencyMap=function(t,e){return d(t).frequencyMap(e)};var a,r=n(8),s=(a=r)&&a.__esModule?a:{default:a};function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}var u=Math.PI,l=Math.SQRT1_2;var c=e.ComplexArray=function(t){function e(){return h(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"FFT",value:function(){return f(this,!1)}},{key:"InvFFT",value:function(){return f(this,!0)}},{key:"frequencyMap",value:function(t){return this.FFT().map(t).InvFFT()}}]),e}(s.default);function d(t){return t instanceof c&&t||new c(t)}function f(t,e){var n=t.length;return n&n-1?function(t,e){var n=t.length;if(1===n)return t;for(var i=new c(n,t.ArrayType),a=function(t){var e=Math.sqrt(t),n=3;for(;n<=e;){if(t%n===0)return n;n+=2}return t}(n),r=n/a,s=1/Math.sqrt(a),h=new c(r,t.ArrayType),o=0;o<a;o++){for(var l=0;l<r;l++)h.real[l]=t.real[l*a+o],h.imag[l]=t.imag[l*a+o];r>1&&(h=f(h,e));for(var d=Math.cos(2*u*o/n),_=(e?-1:1)*Math.sin(2*u*o/n),p=1,m=0,v=0;v<n;v++){var g=h.real[v%r],b=h.imag[v%r];i.real[v]+=p*g-m*b,i.imag[v]+=p*b+m*g;var k=[p*d-m*_,m=p*_+m*d];p=k[0],m=k[1]}}for(var w=0;w<n;w++)t.real[w]=s*i.real[w],t.imag[w]=s*i.imag[w];return t}(t,e):function(t,e){var n=t.length,i=function(t){for(var e=t.length,n=new Set,i=0;i<e;i++){var a=_(i,e);if(!n.has(i)){var r=[t.real[a],t.real[i]];t.real[i]=r[0],t.real[a]=r[1];var s=[t.imag[a],t.imag[i]];t.imag[i]=s[0],t.imag[a]=s[1],n.add(a)}}return t}(t),a=i.real,r=i.imag,s=1;for(;s<n;){for(var h=Math.cos(u/s),o=(e?-1:1)*Math.sin(u/s),c=0;c<n/(2*s);c++)for(var d=1,f=0,p=0;p<s;p++){var m=2*c*s+p,v=m+s,g=a[m],b=r[m],k=d*a[v]-f*r[v],w=f*a[v]+d*r[v];a[m]=l*(g+k),r[m]=l*(b+w),a[v]=l*(g-k),r[v]=l*(b-w);var y=[d*h-f*o,d*o+f*h];d=y[0],f=y[1]}s<<=1}return i}(t,e)}function _(t,e){for(var n=0;e>1;)n<<=1,n+=1&t,t>>=1,e>>=1;return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float32Array;a(this,t),e instanceof t?(this.ArrayType=e.ArrayType,this.real=new this.ArrayType(e.real),this.imag=new this.ArrayType(e.imag)):(this.ArrayType=n,this.real=new this.ArrayType(e),this.imag=new this.ArrayType(this.real.length)),this.length=this.real.length}return i(t,[{key:"toString",value:function(){var t=[];return this.forEach((function(e,n){t.push("("+e.real.toFixed(2)+", "+e.imag.toFixed(2)+")")})),"["+t.join(", ")+"]"}},{key:"forEach",value:function(t){for(var e=this.length,n=Object.seal(Object.defineProperties({},{real:{writable:!0},imag:{writable:!0}})),i=0;i<e;i++)n.real=this.real[i],n.imag=this.imag[i],t(n,i,e)}},{key:"map",value:function(t){var e=this;return this.forEach((function(n,i,a){t(n,i,a),e.real[i]=n.real,e.imag[i]=n.imag})),this}},{key:"conjugate",value:function(){return new t(this).map((function(t){t.imag*=-1}))}},{key:"magnitude",value:function(){var t=new this.ArrayType(this.length);return this.forEach((function(e,n){t[n]=Math.sqrt(e.real*e.real+e.imag*e.imag)})),t}}]),t}();e.default=r}]);
//# sourceMappingURL=67f5f7f159d3b3cc6e84.worker.js.map