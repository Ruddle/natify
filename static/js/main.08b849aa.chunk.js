(this.webpackJsonpnatify=this.webpackJsonpnatify||[]).push([[0],{18:function(e,t,n){var r,o=n(48).wrap,i=n(30);e.exports=function e(){return this instanceof e?o(i()):r||(r=o(i()))}},25:function(e,t,n){},26:function(e,t,n){},30:function(e,t,n){e.exports=function(){return new Worker(n.p+"e8be281791b297cd80be.worker.js")}},47:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(17),a=n.n(i),c=(n(25),n.p,n(26),n(5)),s=n.n(c),u=n(6),l=n(3),d=n(7),f=n(4),h=n(13),b=n(18),v=n.n(b),p=function(e,t,n){return function(e,t,n){return Math.max(t,Math.min(n,e))}((n-e)/(t-e),0,1)},g=function(e,t,n){return(r=p(e,t,n))<.5?2*r*r:(4-2*r)*r-1;var r},j=function(e,t,n){return e*(1-n)+t*n},x=function(e){var t=o.a.useRef(),n=o.a.useRef(),r=function r(o){if(void 0!=n.current){var i=o-n.current;e(i)}n.current=o,t.current=requestAnimationFrame(r)};o.a.useEffect((function(){return t.current=requestAnimationFrame(r),function(){return cancelAnimationFrame(t.current)}}),[])};var m=n(19),O=n(20),F=function(e,t,n){return function(e,t,n){return Math.max(t,Math.min(n,e))}((n-e)/(t-e),0,1)},w=function(e,t,n){return e*(1-n)+t*n},B=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loop";Object(m.a)(this,e),this.arr=t,this.wrap=n}return Object(O.a)(e,[{key:"getWrap",value:function(e){if(e>=0&&e<this.arr.length)return this.arr[e];if("loop"===this.wrap){var t=e%this.arr.length;return t<0&&(t+=this.arr.length),this.arr[t]}return e}},{key:"nearest",value:function(e){return this.arr[Math.round(e)%this.arr.length]}},{key:"linear",value:function(e){var t=e%1,n=Math.floor(e);return w(this.getWrap(n),this.getWrap(n+1),F(0,1,t%1))}},{key:"smoothstep",value:function(e){var t=e%1,n=Math.floor(e);return w(this.getWrap(n),this.getWrap(n+1),function(e,t,n){return(r=F(e,t,n))<.5?2*r*r:(4-2*r)*r-1;var r}(0,1,t%1))}},{key:"getTangent",value:function(e){return(this.getWrap(e+1)-this.getWrap(e-1))/2}},{key:"cubic",value:function(e){var t=Math.floor(e),n=[this.getTangent(t),this.getTangent(t+1)],r=[this.getWrap(t),this.getWrap(t+1)],o=(e-=t)*e,i=e*o;return(2*i-3*o+1)*r[0]+(i-2*o+e)*n[0]+(-2*i+3*o)*r[1]+(i-o)*n[1]}}]),e}(),y=n(1),k=n(10);function R(e){var t=e.name,n=e.value,o=e.onChange,i=Object(r.useRef)(),a=Object(r.useRef)(),c=Object(r.useState)([]),s=Object(l.a)(c,2),u=s[0],d=s[1];x((function(e){d(k(i.current));var t=a.current;if(t){var n=function(e){return"nearest"===i.current.mode?o.nearest(e):"linear"===i.current.mode?o.linear(e):"smooth"===i.current.mode?o.smoothstep(e):o.cubic(e)},r=i.current.arr,o=new B(r),c=t.getContext("2d");c.clearRect(0,0,100,100),c.fillStyle="#3dc9b0",c.fillRect(0,0,100,100),c.beginPath(),c.moveTo(0,100-100*n(0));for(var s=0;s<100*r.length*1.5;s++){var u=s/100;c.lineTo(100*u/(r.length-1),100-100*n(u))}c.strokeStyle="#fff",c.stroke(),c.fillStyle="#569cd6",c.lineWidth=2,c.lineTo(100,100),c.lineTo(0,100),c.fill()}})),Object(r.useEffect)((function(){}),[u]);var f=Object(r.useState)(!1),h=Object(l.a)(f,2),b=h[0],v=h[1];return Object(r.useEffect)((function(){window.addEventListener("mouseup",(function(){return v(!1)}))}),[]),Object(r.useEffect)((function(){return i.current=n}),[n]),Object(r.useEffect)((function(){b||(console.log("Curve: onChange "),o(i.current))}),[b]),Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(y.jsxs)("div",{style:{textAlign:"left",color:"grey",fontSize:"0.7em",fontWeight:"bold",display:"flex",justifyContent:"space-between"},children:[Object(y.jsx)("div",{style:{border:"1px solid rgba(0,0,0,0)"},children:t}),Object(y.jsx)("div",{style:{border:"1px solid grey",cursor:"pointer"},onClick:function(){i.current.mode="linear"===n.mode?"smooth":"smooth"===n.mode?"cubic":"cubic"===n.mode?"nearest":"linear",o(i.current)},children:n.mode})]}),Object(y.jsx)("canvas",{width:100,height:100,style:{borderRadius:"5px",overflow:"hidden"},onMouseMove:function(e){if(b){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;i.current.arr[Math.floor(n/10)]=(100-r)/100}},onMouseDown:function(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;i.current.arr[Math.floor(n/10)]=(100-r)/100,v(!0)},ref:a})]})}var C=n(10);function M(e){var t=e.name,n=e.value,r=e.onChange;return Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(y.jsx)("div",{style:{textAlign:"left",color:"grey",fontSize:"0.7em",fontWeight:"bold"},children:t}),n.map((function(e,t){return Object(y.jsx)("div",{style:{display:"flex",flexDirection:"row",width:20*e.length+"px",height:"20px"},children:e.map((function(e,o){return Object(y.jsx)("div",{style:{width:"20px",height:"20px",backgroundColor:e?"rgb(100, 153, 211)":"#465",borderRadius:"3px"},onClick:function(){var e=C(n);e[t][o]=!e[t][o],r(e)}})}))})}))]})}n(10);function S(){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),console.error("getMedia: ",e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function T(e){var t=e.audioBuffer,n=Object(r.useRef)();if(Object(r.useEffect)((function(){var e=n.current;if(t&&e){var r=function(e){return a-a*(.5*e+.5)},o=e.getContext("2d"),i=e.width,a=e.height;o.fillStyle="#333",o.fillRect(0,0,i,a),o.beginPath();var c=t.getChannelData(0);console.log(c),o.moveTo(0,r(c[0]));for(var s=0;s<c.length;s++)o.lineTo(i*s/(c.length-1),r(c[s]));o.strokeStyle="#569cd6",o.stroke()}}),[t]),!t)return Object(y.jsx)("div",{});function o(e){return(e+"").padEnd(7," ")}return Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{style:{whiteSpace:"pre"},children:o(Math.floor(1e3*t.duration)/1e3)+" s"}),Object(y.jsx)("div",{style:{whiteSpace:"pre"},children:o(t.length)+" samples"}),Object(y.jsx)("div",{style:{whiteSpace:"pre"},children:o(t.numberOfChannels)+" channels"}),Object(y.jsx)("div",{style:{whiteSpace:"pre"},children:o(t.sampleRate)+" Hz"}),Object(y.jsx)("canvas",{width:110,height:30,ref:n})]})}function A(e){var t=e.name,n=(e.value,e.onChange),o=Object(r.useState)(),i=Object(l.a)(o,2),a=i[0],c=i[1];Object(r.useEffect)((function(){console.log(a),a&&O(a)}),[a]);var d=Object(r.useState)({chunks:[],stream:null,mediaRecorder:null,started:!1}),f=Object(l.a)(d,2),h=f[0],b=f[1],v=Object(r.useState)(),p=Object(l.a)(v,2),g=p[0],j=p[1];Object(r.useEffect)((function(){g&&n(g.getChannelData(0))}),[g]);var x=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t,n,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.chunks,n=h.stream,r=h.mediaRecorder,o=h.started,n){e.next=5;break}return e.next=4,S();case 4:n=e.sent;case 5:r||(r=new MediaRecorder(n)),o||(t=[],r.start(),r.ondataavailable=function(e){console.log("DATA AVAILABLE"),O(e.data),t.push(e.data)},o=!0),b({chunks:t,stream:n,mediaRecorder:r,started:o});case 8:case"end":return e.stop()}}),e)}))),[h]),m=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t,n,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=h.chunks,n=h.stream,r=h.mediaRecorder,o=h.started,n&&r&&o&&(o=!1,r.stop()),b({chunks:t,stream:n,mediaRecorder:r,started:o});case 3:case"end":return e.stop()}}),e)}))),[h]);function O(e){var t=new AudioContext,n=new FileReader;n.onloadend=function(){var e=n.result;t.decodeAudioData(e,(function(e){j(e)}))},n.readAsArrayBuffer(e)}return Object(y.jsx)("div",{style:{display:"flex",flexDirection:"column",width:"110px",height:"110px",padding:"5px"},children:Object(y.jsxs)("div",{style:{textAlign:"left",color:"grey",fontSize:"0.7em",fontWeight:"bold",display:"flex",flexDirection:"column"},children:[Object(y.jsx)("div",{style:{border:"1px solid rgba(0,0,0,0)"},children:t}),Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[!h.started&&Object(y.jsx)("div",{onClick:function(){return x()},style:{border:"1px solid #3dc9b0",cursor:"pointer",flex:"1 1 auto",textAlign:"center",color:"#3dc9b0"},children:"rec"}),h.started&&Object(y.jsxs)("div",{onClick:function(){return m()},style:{border:"1px solid #569cd6",cursor:"pointer",flex:"1 1 auto",textAlign:"center",color:"#569cd6"},children:["stop",Object(y.jsx)("span",{style:{marginLeft:"5px",marginBottom:"1px",display:"inline-block",borderRadius:"50%",width:"5px",height:"5px",backgroundColor:"red"}})]}),!h.started&&Object(y.jsxs)(y.Fragment,{children:[" ",Object(y.jsx)("label",{for:"file"+t,style:{flex:"1 1 auto",border:"1px solid #3dc9b0",cursor:"pointer",borderLeft:"none",textAlign:"center",color:"#3dc9b0"},children:"file"}),Object(y.jsx)("input",{onChange:function(e){return c(e.target.files[0])},style:{display:"none"},type:"file",id:"file"+t,name:"file",multiple:!0})," "]})]}),Object(y.jsx)(T,{audioBuffer:g})]})})}function P(e,t,n,r){return{x:e+n*Math.cos(r),y:t+n*Math.sin(r)}}function D(e,t,n,r,o){var i=P(e,t,n,o),a=P(e,t,n,r),c=o-r<=Math.PI?"0":"1";return["M",i.x,i.y,"A",n,n,0,c,0,a.x,a.y].join(" ")}var Y=120;function I(e){var t=e.angle,n=Object(r.useMemo)((function(){var e=1.0001*t+Math.PI/2,n=[D(90,90,70,Math.PI/2,e)];return e>=2.5*Math.PI&&(n=[D(90,90,70,Math.PI/2,1.99*Math.PI+Math.PI/2),D(90,90,70,Math.PI/2,e%(2*Math.PI))]),{arcpaths:n,cx:90+70*Math.cos(e),cy:90+70*Math.sin(e)}}),[t]);return Object(y.jsxs)("svg",{width:Y,height:Y,viewBox:"0 0 180 180",style:{padding:5,boxSizing:"border-box"},children:[Object(y.jsx)("defs",{children:Object(y.jsxs)("linearGradient",{id:"prefix__svgya",x1:0,x2:0,y1:0,y2:1,children:[Object(y.jsx)("stop",{offset:"0%",stopColor:"rgb(96, 197, 177)"}),Object(y.jsx)("stop",{offset:"100%",stopColor:"rgb(100, 153, 211)"})]})}),Object(y.jsx)("circle",{r:70,cx:90,cy:90,strokeWidth:5,stroke:"#333",fill:"none"}),n.arcpaths.map((function(e,t){return Object(y.jsx)("path",{d:e,strokeLinecap:"round",strokeWidth:20,stroke:"url(#prefix__svgya)",fill:"none"})})),Object(y.jsx)("circle",{r:20,cx:n.cx,cy:n.cy,fill:"#fff",cursor:"pointer"})]})}function V(e,t){return Math.round(e)!==e?Math.round(t*(1/e))/(1/e)+"":Math.round(t)+""}function L(e){var t=e.min,n=e.max,o=e.step,i=e.value,a=e.onChange,c=(e.maxTurn,e.name),s=e.unit,u=Object(r.useMemo)((function(){return 2*Math.PI*(i-t)/(n-t)})),d=Object(r.useRef)(),f=Object(r.useCallback)((function(e){var r=d.current.getBoundingClientRect(),i=r.width/2,c=e.clientX-r.left,s=e.clientY-r.top,u=Math.atan2(s-i,c-i);if(u=(u+2*Math.PI-Math.PI/2)%(2*Math.PI),u/=2*Math.PI,!isNaN(u)){var l=t+(n-t)*u;l=Math.max(t,Math.min(n,Math.round(l/o)*o)),a(l)}}),[a,t,n,o]),h=Object(r.useState)(!1),b=Object(l.a)(h,2),v=b[0],p=b[1],g=Object(r.useState)(!1),j=Object(l.a)(g,2),x=j[0],m=j[1];return Object(r.useEffect)((function(){window.addEventListener("mouseup",(function(){return p(!1)}))}),[]),Object(r.useEffect)((function(){if(v)return window.addEventListener("mousemove",f),function(){return window.removeEventListener("mousemove",f)}}),[v,f]),Object(y.jsxs)("div",{ref:d,style:{userSelect:"none",width:"120px",height:"120px",position:"relative",backgroundColor:v||x?"rgba(200,255,255,0.03)":"rgba(0,0,0,0)",boxShadow:v?"rgba(0,0,0,0.3) 0px 0px 14px":"none",transition:"background-color 0ms, box-shadow 200ms ",borderRadius:"5px"},onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},onMouseDown:function(e){p(!0),f(e)},children:[Object(y.jsx)(I,{angle:u}),Object(y.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},children:[Object(y.jsx)("div",{style:{fontSize:"0.7em",fontWeight:"bold",color:"grey"},children:c}),Object(y.jsx)("div",{style:{color:"rgb(100, 153, 211)"},children:V(o,i)+" "+s})]})]})}var z=n(32),H=n(10),K=n(46),N=new v.a,J="?data=eJxtkm9v2jAQxr%2FKya%2BAZvmztZqUjRdosIK0tqxQTVNTTSY5wJtjo9iBAsp335kkdOv2Jr6c7365e54cWaozZDELgmAoVsJyCUaXKgNh4GdpLHAwaEEvwfB8I9H4MGhCKHBToEFlTdPjXk1ZIHDXtxJbVGBFjn6iiD9GutnrElKuIMOlUPgPHeyaendCSlggbCTfYwYLnv4Cq11vok4ouJZ6waUBTsgYhg%2F3g%2Fnk7tYDOkfQubyMwnB98P2uB7PBzfTL6Menu4fbuQffJsPr0XzWYr6%2FniallXUORooMC1jsATNhhVrRXNg2w%2Br08ThRTcL%2FfD%2F62j%2FmQtEsV6EHOX%2BOgUag0FjcUDby3DIprrUkcAzv3F2phI0TNj4krHITSZKi1aEPj0%2BJWuoCOi9pyoYf2vjjX6u16YuLLhwTBRAETnmgmQymWmXGJR3qlO435YETrC6f1djcmU7aL9DukPx7EwEnayNX1Az3WJ9PRLnhdu0boTpOAujV8F6dnk6g99YPuzV%2BWp63SKU2pC45GrqH1Dv3RgJvtSxz%2FM%2BXerS4%2Fz5RJFOBtixUW8A8thPZCq1h8ZG1%2F4GLyQ0Wh37kMXKDxVHoMedFk3PS01%2Fv%2Bv%2Fwhco8tuWyRFd2VXnMrXWmkbUtLDzjXmDjw2uac7nlUVxV1W8WoxpF",U="?data=eJy1lH1v2jAQxr%2FKyX8lkCZOCKTJ2k1Rmw20vq1QTVNTVSm4JVpwImJaVMR33zlvsI52laYhQY6zn99zOp%2BzIuN0wohHDMOYCpHlnmEwrj%2FFP%2BOMTeJIT%2BcPhvxnBPyRJWnGbpXZIo%2FHashD%2Fn1w%2FCUYDfXPl8E3OIQVzGLuQZdqMIuWHpiUYpgLlmGswYLHwoOQ9J9DAuuN2h%2BN%2FKOvGz3VqVkRqG7WgDJbM%2FLfEcfBkf%2FjnwjDq%2BHIH5ztZLyPcBmcBP4weKUK601GyA3jNBJT6LMkY3O4X%2FCxiFOehzxhAsZJNMsQrCw1iDS4U%2BHwI8j9OtIVzJRxzJU7DZaqWqruk0hITymUKrkkhQVNUZawB5EKBih3RaQBHpZZaVmUM6kThULAAehd%2BAQWtPCP%2FHqwZ0IbFBu1RVaVP6U4n6WpmO6yllilrqtZKWapEGJhCctRdX0T8vt0DsomjVn6oY4PYOifXpwEt0fnV2ejOt1uq7AKOeBH6kQ8k6pKYsClPwrK1crounze4Kaigzl2sJjlVqltlemLAUaWTos6pdxobgPs5rUOt5qgYF%2FLGdcKrPqqxtQpthOHBf229LW4uihtKMb9b7A%2FALUQn%2FW0t6Ga2pfwzZ7G5lUjqjshxyGeM7GY83oH0chTPHlgIifeihxfYfMH52cyxjklnryXBKeXeCbViKyyysmbge8jqc%2BSaMymaTJhc9ymkccoWeC7ylxrRJ5Sw8IXTo2iDWyD6j%2B%2FZFlWR%2B%2FRnuM6ju26zr7rNHC700V82YytYmldbVFjXS59o15c7Zg9y3KcXo%2Bavf2O4zYmuGahS9Hp%2F2nioEl1jLts3m1ibkFNG6HV1Oyu3Xp37bbtWGan63bxFNyu49rbPuv1%2BhfpTuiG",E="?data=eJyNVn9P20gQ%2FSojSyeti3EcJ8ZNKD0hCCW6Aj0S7v4gqNokm8Q6x3btDaRF%2Be43s%2Bu1TYDTIZHsj3nvjd%2FMevNszdK5sPrW38PzL4PxyP3r5uvd1QBO4BnWUdIHz4E13%2Fah7UAhRYYLLg43SST7MLEmFuwmicGejv9oAF2vXWJxGNRwz2sQFC8ZzgejsyaFYfAb8PfRF7eDP2t0UKX%2B0fNKfNurwZe%2FXqIvT2%2Bvbq6Htb4RD434uw8%2BvK5RRrXbNCyL%2BUys0ngu8r6%2FzzJJWq0rLldwKeJM5LDYJDMZpUkxSWIhYRbzdYb0bOsAd2Bqw8lnoHgXdRiu6HGUsKkDW9vWqEXMJekTkFC0RUDFxtgWDoHb0AI2VSOHCt0usYIXgnBSISR8AjeA38GHDzih%2Fz4ctuEAWBexatWmDw0u1mkqV29JEy0zeVU7peY62tbxaxXPkZS1XQ9FcOEApjhfH5Nbo3STzGH0M5ErUUTFvmPZJlf5L3LxwwFZG1agSbRYPgilrta%2FDcssZB7xZBm%2FjebTgrEaf4iV9QMbfgPMkQzwVar7k9KVHxv%2BOikjVy9%2Bpg5Hr%2BmxyeUKz5%2F2wXUmjQyUpoZw%2BQ9B5ia%2BLgzDWqtlHTgXs9r6xvOKbcYOO8YjajbEyb3GKTmeVpEUSRrpxqk5cp7M0zXbc8RUMMvTmSiwKsv9EubiUeRT4ppuFguROxDzpaLVc3eR5gM%2BWzEmHIgcSgn3IvQP49A%2Ffh89wMEJfaMorj1gBp7bRVO9MuUiWmexuLgY1yqK5HmSAOrLTZ5AIp5gsZDuWUqx29M85z%2FLWDcWyVKubDQGz9Mjjzc6k6QmAVDLbi54jCIah4kd0%2BbOdlGbYTI7U2LSKDBQy4xOr759HXw%2Fu7m7HmMUPjAwE4dB3rEefYJmoF48OLB1BqqnMVhFtuD2dDw4NuukhM2m5or8kefooGKOkNa8D3FW8WmkarwTUK%2Fbsjuy9InhWxAdsOu4YsUz6gc6j1Xr1tv0vJHczCmkIvHcoCYpVAmrsA%2BaUblHH6Vj9%2FT9QFUsMATbnuFF5OiXEva2ntHNUq7pK04b32rpTmMll0OH2sMgssq8ShfyO3lo%2BsXEUumXiUqN2W4RRzNBJ6RZDvTcR5aym54bSTs0XuY8WxV9uDeLJPWAiVmO9RTNl0IWVv%2FZOr%2FDbIY31zTG97zVpyvFwgNp0YVm0ZEu1%2Bhiwcu8QHzjysEwx1KtiKOdY2kDajbD9RbV%2B0yee%2BS9%2BCNq9LqRpWfSVL8AKnb6BfBuqrjt%2B50j7yjshWG31ws%2F9sKG5utNVKXivmGO35D8T8VuN%2FTbnaAXIGUvCHsNvf0tVKO%2Br9SCyj36lVHqUVVKtctf%2B3IdijPV6IQeMpqjVrGaJwgrxncL4rtH3SAM2p1228NRz6vder2FWnhKX1W%2B%2B38q79e8u93uXw7N8Ns%3D",Q="?data=eJyNVX9P20gQ%2FSojSyetiTG2Y%2BPalFZRSY%2FoCrQE7v4gqNokhljn2MbelADKd%2B%2FMrn8RyOkigXdn5703OzO7%2B6LNsnmkhdo%2Fo5M%2Fh1dj8%2B%2BLb9dnQziGF1jGaQiWAUu%2BDsE2oBRRjgYTh6s0FiFMtIkGm0laYwdXf3WApmVXWBx6LdyyOgTla4aT4fhLl6JmcDrw3eivl8MfLdprQv9gWRXetlrw6fNr9Ong8uzifNTq1%2BJ%2BLb5z46PzFlWrut2E5QmfRYssmUdF6GyzTNKDgzMuFnAaJXlUwN0qnYk4S8tJmkQCZglf5kjP1gZwA6Y6HH8C8jdRh6FFjeOUTQ1Y67pC3SVckD4BCUVLBJRsjK1hH7gOB8CmcmRQoe0KG%2FEyIpyQCAEfwfTgMziwhxP6C2Hfhh4wF7HSqtM%2FBS6XWSYW70kTLavjalYqzWW8bv2X0p8jKbNNC0XQ0IMpzpdHlK1xtkrnMH5KxSIq43I7Y%2FmqkPHfFdGDAaJNWIlJImO1EQpd2r%2BPqihEEfP0PnkfzaclYy1%2BHyvreDr8ARgjJcCRoW5Pqqw8rPjboGq51viJOhxzTdumLDd4%2FrgNbiPpRCA1FYSLfwkyr%2F3bwjCstTQrx3k0a1Pf2W%2B0ztl%2Bv84RNRvixFbjVBwFf0wzITdI35Ykzx6ZYxrKjIjAJLDt6NT3amfLPIlKRA6Kgj%2Bx8eDs%2B7fhzy8X1%2BdX6HSXFcBqP3SyjtToI3QdlbHX0%2BFlkgLIUqKz9DyAy8HV8Ki2kxLmuJkXci6nN7g%2FR54EV50H59ZE%2FSGfLRhL5Z4kPYCM6hcvIFYhxRhPfX%2FgrAmEfvI0UqmO6ywR1x7I22qvzRJeIgbEehdWLnhOOaWGbmrfdaDcxWI1J6eGyDK9LlEBveOO455iVasb9SnJpcAl7BmGt7ihTjQ2hprRtdxKYwtQymxPTWUCabiR61U9b%2Bh7S%2F1QIpN6VXAdBYtIrIpU5adyNmh8X%2FB8UYZwUxlv0VsztMd4fh%2BJUgtftJNrrOTo4pzGeN9pIV2tGjamRhe7Rq1d2eiCxUetRHzn6kU3Q%2FvFkxU%2BeLYZWK9%2B9sbQVJgtfU3%2BHvduass8fEuNeeyEbdVxy6exYaencWfsuOw4%2FUPr0A983w0C%2F0PgdzTfLqIqFe6dbDkdyf9UdF3fsfte4CFl4PlBR297CdWooxs1r8kePb%2BVHpWpUjt93pbrk1%2FFj2MkrI9UQ1pvwG8Id9bDMQ9dz%2Ffsvm1bOAqsNlkuUuNpe1Nn9%2F%2FU2WlonM1m8xuqgJbq",q="?data=eJydVmFP4zgQ%2FSujSLdKaUiTtKHbsuwJQe%2BobqEchbsPFJ1M65Lo0iSbuEtZ1P9%2BM3acpKVF6CoRnPG8N%2BM3YzuvxjSZcaNv%2FD08%2F31wO7b%2FGn27uxzACbzCIoz74FiwYKs%2BuBbkgqdosHG4jEPRh4kxMWA9iTX29PaPGtB23AKLQ7%2BCO06NIN9kOB%2BMz%2BoUmsGrwfejf7sZ%2FFmh%2FTL1z45T4F2nAl%2F83ERfnN5cjq6GVXwdvKuD71348KpC6aidumBpxKY8SKIZz%2FrePpbx9elZpbwSrdCvvbH%2BOttGObb0uBrdDsaS8DmciQAXgMkFPHwKBPThCNYAMIkncat1yUQAFzxKeQbzZTwVYRLnkzjiAqYRW6RIYq4sYBY8NuDkK5C%2FjbmZaFHjMDYfLVg1Ggo1j5igjAlIKJoioGQzzRUcAmtAC8xHObKoz9wCy1nOCSckQsAXsH34FTw4wBf668OhC00wO4iV1gY9FDhfJIkIdoUmWlPnVc4UMRfhqvJfSH%2BGpKZrOxgEDU14xPfFMak1TpbxDMYvsQh4HubbiqXLTOY%2Fz%2Fh3C0QlWI4ikbFYCKUu7dfDIguRhSx%2Binaj2WNumhX%2BEHvB8xvwC2COJIAnU91%2BKVT5vmRvk9LhKuNXajDUmpZNKpd49rwNrjKpZSBjKggT%2FxJkpv2rwphYa2lWjjM%2BraSvrZevUvPQ1xpRsyFObDVOwZGx5zgRcoH0vyJJk2fTsy1lRkTPJrDrNajv1coWacRzRN4%2FKMtTxtJAvc6TDEzthS7OsRp9gfHp5fW3wT9no7urW2VsNhvwOokBZCHRWXq24Ob0dnCs7RQHFS7fM%2FleTYeLZSRYzJOl9CS73MQ2ZjJg08A0s%2BTZAnwM4xlXfS2DKnwaimmAQIWJePyE2%2FqwdFeO%2BFbRTZPIAny8oVOEyXyec1qMdsFyyGNKO%2BmFtmiZGEoBjvV0qzWKoxdEL9Il6p%2FLjSMChksVLBN8BgwNAcsB6wMvdHCEcZgHfKYZwjlQkvDpEwjsTvkf9aeLAvUG7Ua%2FunrNE7eakmX8wTIIVQ1DJNCnPb6VldM%2FeYBRd5%2FoxjKlstTj8o45qJoLj34LwsY2PA9YSu1IZ0G5bbadqPVCsZyRY0no2P42YQbNk5rzgWKvPNbVMCfXDF1w%2B5l4H1vqcMQ9pt5It81UMt1oNaa1nFdPuR3uqcYPJxsS02Sxe9Q0tQLGKr4gJjGSZVwss1ipW%2FhaJWneh3ttlAbccWvDMvCyeuIiN%2Fqvxvkd9tVwdEVjvGIMed0ZeBYYdJUbdJoUNroC8TMmR3ztekQ3y%2FjBoiV%2B4rh2x9n4uWvLUMlW9Jp8F%2Fd%2BasfuIBcKXMvT0YnKi7yko6%2BfvcnitOe1j5yjbq%2Fb7fR63c%2B9bi3I20mMShXdIY9XC%2FluxE6n67ltv%2BcjZc%2Fv9uqL2prCaNT%2BZTS%2FlIu%2BsIp4VJci2sXP7XBt8iv4cYyEeh%2BWpHoB3ZJwbwE8%2B6jjd3237boOjnpOJdbbKYyFe%2FVNpTsfqbRX8SKNPADrlfbLSrc%2Fqnq9d6gP5YlNnPJLTamovtSM%2FlHpe38%2FZ1HOrX1PkS33mR%2BsvdgaajfBTuw7sd7B7kHtdimxH0DtSvr%2FwJRYD%2Bv1%2Bj%2FwVtj%2F",G="?data=eJy9WgtT20gS%2FitTqroq2ShCki0beQM5JyiB2gA5ILmrAjYl22OsO1tyJBmcEP77dc9DGr0gm9sLlQWNpvvr5%2FRMj%2FZBm8Yzqo20fx4fvvMvL8xPZ%2B8%2FnvhknzyQVRiNiGWQVbAdEdsgaUbX8MKEx00UZiNyrV1r5PE6krzjy98VRtOyBS88ugW7ZSkAaRnh0L94o0JIBEdhb%2Bc%2BOT79%2FPbc%2F0eB4Obq71mWxLCtAuHoWwVi%2FK%2F%2FFQLZP598fN9kR6%2FZjm0Z4Wh8fnJ2eqx4QvLbeRhag4BO%2BDQ%2Br0dwT2FdL4MpXcTLGU0YQQsUOOPPQQ3aoC4%2BjN%2F4Lcnhlp1S1s1sD%2Ffp2aV%2FUfeRY7Vp57Zq5%2FuHCpBl5THvWa1otmO1BuH49OLy%2FGPDKrL%2FdBA4lG0xsOzrmiLJdJPc0Uqw%2FMvxe9tWfVxfurgOK%2F4dtgk%2B9P0PP4FX88l1tLt7HkSzeEUWdLmmCZlvomkWxlF6HclHks6nPUcPDDIxyNQgsw55uI4I%2FCQ02yRRzkP0fAZ%2FAnJwcLBPrN%2FIJH%2Ba5k8z%2BVQw3AUJycAoPSA7ZNIh30uzAcxMyB8cjHjKzARmpsCiT8nLl6RXZZwiJJtybJhiKkC0OwrJDEhmgGBXWFGbDN7PGiBRYlZ5LxyiZ0yG1SG7pO94fW8wdLyBoAO3wz%2B0NaUUBbMM%2F4NY20N%2FfPja99%2F%2BxqcTCAxMc%2B9bW8%2FvDYfea88ASqffezsY7%2B3h8%2Buhb7v2AMsw4KFV8zghOiKEhLk6JC%2BJ7cLfnZ0OQ9WRanf3JMgW5KgW9yXNyHQZrNbot61BMPAdsn9AkN6ENMNU4M9hpENObDsdzjVfBhmmH4shS5ctY2Rour4lL0iAPtEn7MnAlWULXhqkFPkyxpGByqZLXhGHdGGA%2F43ICxuD3Ade9raDvzhzuorjbNEkGmF1qVc%2BI2Suwm1Bv2L0AYDqtmmBEHgBaQjjFfPWRbyBeFx8jbIFTcO06rH1JmH6zxP6xSBZ4bAUnIQvhSGoOnv%2F4VhokSVhEN0um7mDSarrBf8OVgW3Q%2F5GQEd0gMNUrQ6EV75sgrpSUlzx8gCrBfgazUYv5%2FzBfZW50ETRgMnkLEH2H2SZSfoiMDrEmr3mhDM6LVyv2Eu3a%2F1FT%2FoIkw34skriCIwkuI%2FijBmIfwuQdXyvO1AS2Wvg8Exktp2OtItVmTuoj0m8jhOMopKndyC9mDDAIUWWRkF4R9%2FEq3VC0xSWGcBMNvM5TRi%2FKH4stQJMLT5nJnS2mVJdr6%2BkPMa4GvLBpIMmstLGAWBF%2B8F0oevUIKGBvsBUvQpvQIY4FXYJBRsBs8PqC1f3dhNmQQJKrmgWLCPQed8yB8aM0jUbYAhlVGUYFCPQPosPlbrO4iwTowsLdtfBhNTtTpkG12Ip%2Fpbp7FjmXjdfjiAeXlpGrh04ISAVmBRg8oW07oq103UUsmRnP82L65PaZq2a5kpZBqr103p0YYF2pYNLSj2h1RMe%2FAv16jfr9YRa%2FV%2BhltOslthLE6AYuC%2BArK8k9n2YLY6CZBVH4RQl6WkExWUh36iJLPfkhhxvyHP8ado%2F8%2F1ONgCKNHNJo9ts0RE7rAIuBaDsz%2Bg1Xj1zTljB5rxOni6CNZY1MIqp%2FZnXzSoZFKtlmG1mSFqChIkydUJ29hXyLpdQ0DwqQRFuVw8r0uPvWDkR7maOLMWBBYHzXeHObmBvCG1V38DjPfQfcJ6FIwucYLBHs%2B0bKIFrnVYCIhR4IPMRQVWhCcGTmYH6s5ZEbg5Y5bGaEaj8woBHrJuKvnF0%2B4u17UERdkr6DntlhXs1haW6H%2BJ75xeqW2yVqFGu755d1rfvtir8mi6Xv1BhmATHdtghqNcrudU2PU%2BxQlW%2FVfsLfgxglQP3%2B%2BKAk59egkyXaxDfCboC4lO83KxojnLHhg04CgZozckwUWWypuykL5TS8SgJHjGx7oZzosuOdX8frS9oMV8YcZ3OUemKkJS5ZHQKbzM3q0vt0ahMutjSqAR8%2FqauQu%2F%2FpQJbYj%2BkQv%2FXeMF5VknnKS1dqaU8mdcoBs12SPrnLXg%2BkE8pOFTFY01tSbo9lQ5rQwudV8Jje4qkrCe8JYmbNnBRHeQ9jHlLM7XXsi2CJytsuqBFEceHqgC7TUBJBD9J6%2BImxyD8BqbDeTJ55t7tdq%2BjLvHvguUmgNYjZT0jaxawPYzncE5iPUmA56xb6CUikoVYC7rk7%2BsgCVbk4WzybzrNHonoXfCPOh1tVhOa8GlzHWbTBRDxv2FEjr6ZrcQpGJBdgjRgYM9MNHKldBpHs7SdlR9wgG%2B2SQJ21fMMV8bFTDdJQqNGQbvKBRMFf52CHNavGYy6o%2FYh7BqGI5Yt4SQYUbwwsMj370B7QNhVNW%2BHu6oBndq%2BIi9v5CkQK7Xi2S6RN8bFCUwekGASul19fPm7KOvQ0vKREK8I5tyPeI3wjkY0wdzA6ZRkC0gFnia3cTwjWQw5vKCJ4p1bwYEeSvWSY9ZxmoaTJT3Z4D6sFABbWe6O8txTn1mJKsZ9GKvzvEKUx%2Br8AMauMh7CeKCM92A8vOHjsqLKyEyXIbTG4mYcemB%2Br92p2%2FieeRIP%2B1f8LNG%2FqRNdrINpyA59DUTc4%2FtknCTBV51dUStyiuWRNwOsEcA5pRFgbPWTPkugVdW6K3YQmS%2FjONH5xRveLSjWi7y8URKTgwjqA7b%2FvOJvR%2ByGZpcNypKXQYprJMQyR%2FBWlbwqNwDM9Cs2fyNye1Sm4L3alyTT8%2B8scL4SX22qDSAD2OdiuxV9cDVyggOSQ8HC5O9eFphlmEazeNnZr%2BbAk24VNA2uZVHOE6SSMk9iCpoGTOHYG3YXzwwyikwypAVKf1WkGbRkUpsuYR9hmvpfJiDvwmQKV2rCdQR1NY2XUG%2FiW%2F1aY0l6rRmcPr%2F2ggZQWQAX45MP7%2F3Pb84%2Bnl52xK2xpOP5zp5eEpWQv1SSX9ZnRrtLzseXvlJT02IxpWiwsEY6gx35I3ZPm28BWCuVfKtfnvGvAwKU23SFfzEG3FOVWzpdUHXyw%2Fa7JFhjXl3dKHbjIsfvS5a8Mrds%2FtxgbYj3iTBrWsX7O7F%2F2AY7fAykikKcud6kC%2F2O7wOyrSlZIWrnLVKnI3IlX%2BcQoO2jZmj34Qw2iVQbPWiHH8Hhx2en%2BLwKI22EH3m0VbDVRtBVaXhDI97hhx9tpKXAr3wVAjJDw9MK1UY9s2eVfnqPhsZvFwt4Cd6E3Q5tmR5gweao6GlJRdmnqhwOP0G3KgvTjtMbWIOhNxz2PW%2B45w0VIZZdscAGqbgbN7jHUUQ%2BKbHfHzp2z%2FVckOe5Q0%2BRNxgCvqxnuQw3dxJ%2BlRZSMBpCxtG3qhD8kilR7b6FoKJw%2FkWggwGCyrNMgzd6jd7Y1r3h9odDx3HdoWu59mDgFHqDAHk3lgvIczHPl%2FZsgfRDwP7Qs3qu28%2BBpY%2FhVFBLw73nYQsnSL%2F%2BJNCg8CYAsXrdnM3uj2aWuj7Qfaxq13znWM%2Fr5uZILurm%2B4cFDH4xF1HoWT%2BAxb6d51F12Bri%2FVK9CvxAWJXMtnIk20Is%2FGIOHOyDuZaTPWhBAnxXuNZdvFyG6oB5h7%2F73g%2F87g%2FcgePegI78f5%2BZbibhVHvE6PPu7alqhqWozRJTrTVDl9UW7AJ%2FGq%2BcAIB3R5MUjvywGDyoM2GKe9gmozNtNA%2BWKWXkIYyyZEMf%2FwtPrUHA",X="?data=eJx9kUFLw0AQhf%2FKMCelS0niyVUPpS0S0FZsi4ckSGimbSDZhN1NVdL8dyc1TaGoe9nh7ffeDLM1rouEUOKbP3mcLhdDf7aYr2YTeIAa7FdJEkI0RaWSEKEJ1QXm%2FcWFKiMLJs7LjAxDQRSqTaHh6iyz6tyd6ntYjJ5fnqbvY45dnuTB4BrqUAGfLir4uSM2dyP0yuEAzu%2FsoIe9C5on1WQrraDuTAK2Oi53RkJwUjqv6EOiBgV%2BpMmWrEFZ42T1Olr681lb56lC6QxdgXn8idJ1BBpLZadVKrW8bMP%2BMovXtCuyhDRjAvdxVvFHuI3Ark8b1662NbSbxR4KojPl%2FYsxtydt0oKncm9uj09pgtLqigSmZlzkZWWJlU2cGWq%2BAbM7qYk%3D";function Z(e,t,n){for(var r=e.getContext("2d"),o=function(o){var i=t[o],c=e.height,s=e.width/t.length;r.resetTransform(),r.translate(o*s,0);var u=1;if(n.trans){n.trans[o];0}else console.log("no dstate");if(r.width=s,r.height=c,r.clearRect(0,0,s,c),void 0===i||!Array.isArray(i)&&i.constructor!==Float32Array||i.length<2)return r.fillStyle="rgb(30,70,70)",r.fillRect(0,0,s,c),r.fillStyle="rgb(70,0,0)",r.fillRect(1,1,s-1,c-1),"continue";r.fillStyle="rgb(30,30,30)",r.fillRect(0,0,s,c),r.fillStyle="rgb(30,70,70)",o<t.length-1&&r.fillRect(s-1,0,1,c);var l=i.reduce((function(e,t){return t<e?t:e})),d=i.reduce((function(e,t){return t>e?t:e})),f=d-l;function h(e){return c-(e-l)/(d-l)*c}function b(e){return 10+e/(i.length-1)*(s-20)}d+=.1*f,l-=.1*f,r.strokeStyle="#977",r.lineWidth=1/u,r.beginPath(),r.moveTo(0,h(0)),r.lineTo(s,h(0));var v=Math.ceil(h(-1))+.5;r.moveTo(0,v),r.lineTo(s,v);var p=Math.floor(h(1))-.5;for(r.moveTo(0,p),r.lineTo(s,p),r.stroke(),r.beginPath(),r.moveTo(b(0),h(i[0])),a=0;a<i.length;a++){var g=i[a];r.lineTo(b(a),h(g))}r.strokeStyle=o%2===0?"rgb(96, 197, 177)":"rgb(100, 153, 211)",r.lineWidth=1/u,r.stroke()},i=0;i<t.length;i++){var a;o(i)}}var _=function(e){var t=window.location.protocol+"//"+window.location.host+window.location.pathname+e;window.history.pushState({path:t},"",t)},$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.location.search,r=z.parse(n),o=z.stringify(Object(f.a)(Object(f.a)({},r),{},Object(d.a)({},e,t)));_("?".concat(o))},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search,n=z.parse(t);return n[e]};function te(e,t,n,r,o,i,a){var c=!1;if(!e.trans||e.trans.length!==t.length){e.trans=[];for(var s=0;s<t.length;s++)e.trans.push({scale:1,x:n/2,y:r/2})}if(null!=o&&null!=i&&(e.x=o,e.y=i),null!=a){c=!0;var u=Math.floor(t.length*e.x/n),l=e.trans[u];l.x=e.x,l.y=e.y,l.scale*=1+.2*a,l.scale=Math.max(1,l.scale)}return c}function ne(){Object(h.b)();var e=function(){var e=Object(r.useState)({width:void 0,height:void 0}),t=Object(l.a)(e,2),n=t[0],o=t[1];return Object(r.useEffect)((function(){function e(){o({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}(),t=Object(r.useState)(),n=Object(l.a)(t,2),o=n[0],i=n[1],a=Object(r.useState)({code:"return Array.from(Array(SAMPLE_COUNT).keys()).map(e => 0.0)",widgets:{},isComputed:!1,version:0}),c=Object(l.a)(a,2),d=c[0],b=c[1],v=Object(r.useRef)(0);Object(r.useEffect)((function(){return v.current=d.version}),[d]);var p=Object(r.useRef)(),m=Object(r.useRef)({cursor:0,end:1,loudness:[0,0,0]});x((function(e){var t=m.current,n=p.current;if(t&&n){t.cursor+=e;var r=t.cursor,o=t.end,i=t.loudness,a=n.getContext("2d");if(a.clearRect(0,0,n.width,n.height),r<o){a.lineWidth=.5*n.width/i.length;var c=g(0,.1,r/o)-g(.9,1,r/o);a.fillStyle="rgba(40,40,40,"+c+")",a.fillRect(0,0,n.width,n.height),a.beginPath();for(var s=0;s<i.length;s++){var u=n.width*s/i.length,l=i[s]*n.height*.9/2;a.moveTo(u,n.height/2-l),a.lineTo(u,n.height/2+l)}a.strokeStyle="rgba(206,145,120,"+c+")",a.stroke(),a.beginPath();var d=n.width*r/o;a.moveTo(d,0),a.lineTo(d,n.height);var f=g(0,1,1-r/o),h=j(86,61,f),b=j(156,201,f),v=j(214,176,f);a.strokeStyle="rgba("+h+","+b+","+v+","+c+")",a.stroke(),a.beginPath(),a.moveTo(0,.5),a.lineTo(0,n.height),a.lineTo(n.width,n.height),a.lineTo(n.width,.5),a.lineTo(0,.5),a.lineWidth=1,a.strokeStyle="rgba(206,145,120,"+c+")",a.stroke()}}}));var O=Object(r.useRef)({}),F=Object(r.useCallback)((function(){var e=null===o||void 0===o?void 0:o.codeResult;e&&Z(V.current,e.graphs,O.current)}),[o]);Object(r.useEffect)((function(){F()}),[e]);var w=Object(r.useState)(!0),B=Object(l.a)(w,2),k=B[0],C=B[1],S=Object(r.useState)(0),W=Object(l.a)(S,2),T=W[0],P=W[1],D=Object(r.useRef)(!1);function Y(e){D.current=e}function I(e){function t(){return(t=Object(u.a)(s.a.mark((function e(t){var n,r,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=ee("data",t))){e.next=9;break}return e.next=4,N.compressedB64ToObj(n);case 4:r=e.sent,o=r.code,i=r.widgets,b({code:o,widgets:void 0===i?{}:i,version:10});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){t.apply(this,arguments)}(e)}Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t,n,r,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=ee("data"))){e.next=12;break}return e.next=4,N.compressedB64ToObj(t);case 4:n=e.sent,r=n.code,o=n.widgets,i=void 0===o?{}:o,console.log("getInitialData",i),b({code:r,widgets:i,version:10}),e.next=13;break;case 12:I(E);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var V=Object(r.useRef)();Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.current,e.next=3,N.testSetting(H(d));case 3:n=e.sent,console.log("computed widgets, ",n.widgets),!n||!n.widgets||K.isEqual(n.widgets,d.widgets)&&d.valid===n.valid||(console.log("set Widgets and valid after test"),b((function(e){return e.version===t?Object(f.a)(Object(f.a)({},e),{},{widgets:n.widgets,valid:n.valid}):e})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[d]),Object(r.useEffect)((function(){console.log("Setting effect",d)}),[d]);var z=Object(r.useCallback)((function(){if(o.gainNode)try{for(var e=.05*o.audioCtx.sampleRate/100,t=new Float32Array(e),n=0;n<e;n++)t[n]=Math.pow(1-n/(e-1),2);o.gainNode.gain.setValueCurveAtTime(t,o.audioCtx.currentTime,.05)}catch(r){o.source.stop()}}),[o]),_=Object(r.useState)(null),ne=Object(l.a)(_,2),re=ne[0],oe=ne[1],ie=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o&&o.codeResult&&(null===(t=o.codeResult.samples)||void 0===t?void 0:t.length)>0)){e.next=6;break}return oe("loading"),e.next=4,N.exportWav(o.audioCtx.sampleRate,o.codeResult.samples);case 4:n=e.sent,oe(n);case 6:case"end":return e.stop()}}),e)}))),[o]),ae=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t,n,r,a,c,l,h,b,v,p,g,j,x,F,w;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!o.audioCtx||!0!==d.valid){e.next=44;break}return r=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H(d),Object.keys(t.widgets).forEach((function(e){"sound"===t.widgets[e].type&&(t.widgets[e].value=[])})),e.next=4,N.objToCompressedB64(t);case 4:n=e.sent,$("data",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z(),console.log("compute: Start compute"),a=(null===(t=d.widgets)||void 0===t||null===(n=t.DURATION)||void 0===n?void 0:n.value)||1,c=Math.ceil(o.audioCtx.sampleRate*a),l=null,e.prev=7,Y(!0),h=performance.now(),oe(null),console.log("compute: cloning"),b=H(d),console.log("compute: sending: ",b),e.next=16,N.computeSetting(b,c,o.audioCtx.sampleRate);case 16:l=e.sent,v=performance.now(),P(v-h),console.log("compute: took ",v-h+"ms"),l.samples[0],e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(7),console.error("compute: Crash try, ",e.t0),e.abrupt("return");case 27:return e.prev=27,setTimeout((function(){Y(!1),C(!0)}),100),e.finish(27);case 30:for(r(),p=o.audioCtx.createBuffer(1,c,o.audioCtx.sampleRate),g=0;g<p.numberOfChannels;g++)for(j=p.getChannelData(g),x=0;x<p.length;x++)j[x]=l.samples[x];(F=o.audioCtx.createBufferSource()).buffer=p,(w=o.audioCtx.createGain()).gain.value=1,F.connect(w),w.connect(o.audioCtx.destination),F.start(),l.graphs=l.graphs||[l.samples]||[],m.current={cursor:0,end:1e3*a,loudness:l.loudness},Z(V.current,l.graphs,O.current),i((function(e){return Object(f.a)(Object(f.a)({},e),{},{source:F,gainNode:w,codeResult:l})}));case 44:case"end":return e.stop()}}),e,null,[[7,23,27,30]])}))),[o,d,z]),ce=Object(r.useCallback)((function(){var e=o.codeResult;if(e){var t,n;z();for(var r=(null===(t=d.widgets)||void 0===t||null===(n=t.DURATION)||void 0===n?void 0:n.value)||1,a=Math.ceil(o.audioCtx.sampleRate*r),c=o.audioCtx.createBuffer(1,a,o.audioCtx.sampleRate),s=0;s<c.numberOfChannels;s++)for(var u=c.getChannelData(s),l=0;l<c.length;l++)u[l]=e.samples[l];var h=o.audioCtx.createBufferSource();h.buffer=c;var b=o.audioCtx.createGain();b.gain.value=1,h.connect(b),b.connect(o.audioCtx.destination),h.start(),m.current={cursor:0,end:1e3*r,loudness:e.loudness},i((function(e){return Object(f.a)(Object(f.a)({},e),{},{source:h,gainNode:b})}))}}),[o,z]);return Object(r.useEffect)((function(){k&&(!0!==d.valid||D.current||d.isComputed?!0===d.valid&&D.current&&C(!1):(b((function(e){return Object(f.a)(Object(f.a)({},e),{},{isComputed:!0})})),ae()))}),[ae,o,d,k]),Object(r.useEffect)((function(){var e=new(window.AudioContext||window.webkitAudioContext);i({audioCtx:e})}),[]),Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column",background:"rgb(62, 62, 62)",height:window.innerHeight,overflow:"hidden"},children:[Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",background:"rgb(62, 62, 62)",flex:"1 1 auto",overflow:"hidden"},children:[Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:"1 60 auto",margin:"5px",marginRight:"0px",padding:"10px",background:"rgb(30 30 30)",borderRadius:"3px",overflow:"hidden"},children:[Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"10px"},children:[Object(y.jsx)("button",{style:{padding:"10px",marginRight:"5px",fontSize:"0.8em",cursor:"pointer",backgroundColor:"#3dc9b0",border:"none",borderRadius:"3px"},onClick:function(){ce()},children:"Play"}),Object(y.jsx)("button",{style:{padding:"10px",marginRight:"5px",cursor:"pointer",fontSize:"0.8em",backgroundColor:"#3dc9b0",border:"none",borderRadius:"3px"},onClick:function(){ae()},children:"Compile"}),re&&"loading"!==re&&Object(y.jsx)("a",{href:re,download:"exported_sound.wav",target:"_blank",style:{padding:"10px",fontSize:"0.8em",cursor:"pointer",backgroundColor:"#569cd6",border:"none",borderRadius:"3px",textDecoration:"none",color:"black"},children:"Download exported"}),"loading"===re&&Object(y.jsx)("div",{style:{padding:"10px",fontSize:"0.8em",backgroundColor:"#569cd6",border:"none",borderRadius:"3px"},children:"Loading"}),!re&&Object(y.jsx)("button",{style:{padding:"10px",fontSize:"0.8em",cursor:"pointer",backgroundColor:"#3dc9b0",border:"none",borderRadius:"3px"},onClick:function(){ie()},children:"Export"})]}),Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"10px",alignItems:"center"},children:[Object(y.jsx)("div",{style:{color:"grey",fontSize:"0.8em",marginRight:"3px"},children:"Tutorial/demo"}),[["1",J],["2",U],["3",E],["4",Q],["5",q],["6",G],["7",X]].map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(y.jsx)("button",{style:{padding:"8px",cursor:"pointer",marginRight:"3px",backgroundColor:"#099",border:"none",borderRadius:"3px"},onClick:function(){return I(r)},children:n})}))]}),Object(y.jsxs)("div",{style:{fontSize:"0.8em",marginTop:"10px",color:"white",textAlign:"left"},children:[Object(y.jsx)("div",{children:" Write your sound function on the right !"}),Object(y.jsx)("div",{children:"The samples you return will be played on your speaker, and the graphs your return plotted."})]}),Object(y.jsx)("div",{style:{display:"flex",flexDirection:"row",flex:"1 1 auto",marginTop:"20px",flexWrap:"wrap",overflowY:"auto"},children:Object.keys(d.widgets).map((function(e){return Object(f.a)({name:e},d.widgets[e])})).map((function(e){return Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"row",userSelect:"none"},children:[null!=e.min&&Object(y.jsx)(L,{name:e.name,min:e.min,max:e.max,step:e.step,value:e.value,unit:e.unit,onChange:function(t){return b((function(n){var r=H(n.widgets);return r[e.name].value=t,Object(f.a)(Object(f.a)({},n),{},{widgets:r,isComputed:!1,version:n.version+1})}))}}),null!=e.width&&Object(y.jsx)(M,{name:e.name,value:e.value,onChange:function(t){b((function(n){var r=H(n.widgets);try{r[e.name].value=t}catch(o){}return Object(f.a)(Object(f.a)({},n),{},{widgets:r,isComputed:!1,version:n.version+1})}))}}),"curve"===e.type&&Object(y.jsx)(R,{name:e.name,value:e.value,onChange:function(t){b((function(n){var r=H(n.widgets);try{r[e.name].value=t}catch(o){}return Object(f.a)(Object(f.a)({},n),{},{widgets:r,isComputed:!1,version:n.version+1})}))}}),"sound"===e.type&&Object(y.jsx)(A,{name:e.name,value:e.value,onChange:function(t){b((function(n){var r=H(n.widgets);try{r[e.name].value=t}catch(o){}return Object(f.a)(Object(f.a)({},n),{},{widgets:r,isComputed:!1,version:n.version+1})}))}})]})}))})]}),Object(y.jsxs)("div",{style:{flex:"1 1 auto",margin:"5px",padding:"0px",background:"rgb(30 30 30)",minWidth:"677px",borderRadius:"3px",overflow:"hidden",position:"relative"},children:[Object(y.jsx)(h.a,{height:"60vh",defaultLanguage:"javascript",defaultValue:d.code,value:d.code,onChange:function(e,t){return b((function(t){return Object(f.a)(Object(f.a)({},t),{},{code:e,valid:void 0,isComputed:!1,version:t.version+1})}))},theme:"vs-dark",options:{fontSize:"12"}}),Object(y.jsx)("div",{style:{color:"grey",fontSize:"0.7em",textAlign:"right",position:"absolute",bottom:"0px",right:"0px"},children:Math.floor(T)+" ms"})]})]}),Object(y.jsxs)("div",{style:{margin:"0px 5px 5px 5px",padding:"0px",flex:"none",height:Math.floor(.35*e.height)+"px",position:"relative"},children:[Object(y.jsx)("div",{style:{borderRadius:"3px",overflow:"hidden"},children:Object(y.jsx)("canvas",{onMouseMove:function(t){var n=t.target.getBoundingClientRect(),r=t.clientX-n.left,i=t.clientY-n.top;if(null===o||void 0===o?void 0:o.codeResult)te(O.current,o.codeResult.graphs,e.width-10,Math.floor(.35*e.height),r,i)},onContextMenu:function(e){return e.preventDefault()},onMouseDown:function(t){(null===o||void 0===o?void 0:o.codeResult)&&(te(O.current,o.codeResult.graphs,e.width-10,Math.floor(.35*e.height),null,null,0===t.button?1:-1)&&F())},ref:V,width:e.width-10,height:Math.floor(.35*e.height)})}),Object(y.jsx)("canvas",{style:{position:"absolute",left:"50%",top:"0px",transform:"translate(-50%,-50%)",borderRadius:"0px",overflow:"hidden"},width:e.width/4,height:Math.floor(.05*e.height),ref:p})]})]})}var re=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(ne,{})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),i(e),a(e)}))};a.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(re,{})}),document.getElementById("root")),oe()}},[[47,1,2]]]);
//# sourceMappingURL=main.08b849aa.chunk.js.map