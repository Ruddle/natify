{"version":3,"sources":["frag/Compute.js","webpack:///./src/frag/Compute.js?4145","logo.svg","frag/Grid.js","frag/RSlider.js","frag/Editor.js","App.js","reportWebVitals.js","index.js"],"names":["inst","wrap","Worker","module","exports","f","this","cloneDeep","require","Grid","name","value","onChange","style","display","flexDirection","textAlign","color","fontSize","fontWeight","map","row","rowIndex","width","length","height","col","colIndex","backgroundColor","borderRadius","onClick","newVal","polarToCartesian","centerX","centerY","radius","angle","x","Math","cos","y","sin","describeArc","startAngle","endAngle","start","end","largeArcFlag","PI","join","WIDTH","SvgComponent","state","useMemo","a2","arcpaths","cx","cy","viewBox","padding","boxSizing","id","x1","x2","y1","y2","offset","stopColor","r","strokeWidth","stroke","fill","d","index","strokeLinecap","cursor","format","step","round","RSlider","min","max","maxTurn","unit","ref","useRef","mousemove","useCallback","event","rectSize","current","getBoundingClientRect","center","relativeX","clientX","left","relativeY","clientY","top","angleBetweenTwoVectors","atan2","isNaN","newValue","useState","clicked","setClicked","hover","setHover","useEffect","window","addEventListener","removeEventListener","userSelect","position","boxShadow","transition","onMouseEnter","onMouseLeave","onMouseDown","e","transform","qs","worker","MyWorker","tuto1","tuto2","tuto3","tuto4","tuto5","tuto6","drawBuffer","canvas","buffers","ctx","getContext","bufferIndex","buffer","h","w","resetTransform","translate","clearRect","undefined","Array","isArray","constructor","Float32Array","fillStyle","fillRect","minY","reduce","prev","curr","maxY","split","vToH","v","iToV","i","strokeStyle","lineWidth","beginPath","moveTo","lineTo","mol","ceil","pol","floor","setQueryStringWithoutPageReload","qsValue","newurl","location","protocol","host","pathname","history","pushState","path","setQueryStringValue","key","queryString","search","values","parse","newQsValue","stringify","getQueryStringValue","EditorFrag","useMonaco","wsize","windowSize","setWindowSize","handleResize","innerWidth","innerHeight","useWindowSize","astate","setAstate","code","params","setting","setSetting","ReDrawBuffer","codeResult","canvasRef","graphs","samples","refreshIsPossible","setRefreshIsPossible","computeTime","setComputeTime","waitingForWorker","setWaiting","b","loadPreset","preset","a","data","compressedB64ToObj","getData","getInitialData","matchesForSlider","matchAll","usage","newParams","slice","changeParams","findIndex","push","forEach","parseFloat","sqrt","matchesForGRID","parseInt","valueGrid","type","filter","old","setParams","valid","hash","codeCompiled","setCodeCompiled","testSetting","res","test","dimOld","gainNode","N","audioCtx","sampleRate","waveArray","pow","gain","setValueCurveAtTime","currentTime","source","stop","exportedWav","setExportedWav","exportWav","b64file","compute","saveSetting","objToCompressedB64","str","duration","find","performance","now","computeSetting","console","log","setTimeout","myArrayBuffer","createBuffer","channel","numberOfChannels","nowBuffering","getChannelData","createBufferSource","createGain","connect","destination","play","AudioContext","webkitAudioContext","background","overflow","flex","margin","marginRight","marginTop","border","href","download","target","textDecoration","alignItems","tuto","flexWrap","overflowY","p","arr","elem","newGrid","minWidth","defaultLanguage","defaultValue","c","theme","options","bottom","right","App","className","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.85344b48.chunk.js","sourcesContent":["var wrap = require('comlink').wrap,Worker = require(\"!worker-loader?{}!/home/ctrl/prog/natify/node_modules/comlink-loader/dist/comlink-worker-loader.js!/home/ctrl/prog/natify/node_modules/react-scripts/node_modules/babel-loader/lib/index.js??ref--5-oneOf-2!/home/ctrl/prog/natify/src/frag/Compute.js\"),inst;module.exports = function f() {if (this instanceof f) return wrap(Worker());return inst || (inst = wrap(Worker()));};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"67f5f7f159d3b3cc6e84.worker.js\");\n};","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport React from \"react\";\nvar cloneDeep = require(\"lodash.clonedeep\");\n\nexport default function Grid({ name, value, onChange }) {\n  return (\n    <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      <div\n        style={{\n          textAlign: \"left\",\n          color: \"grey\",\n          fontSize: \"0.7em\",\n          fontWeight: \"bold\",\n        }}\n      >\n        {name}\n      </div>\n      {value.map((row, rowIndex) => (\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            width: row.length * 20 + \"px\",\n            height: \"20px\",\n          }}\n        >\n          {row.map((col, colIndex) => (\n            <div\n              style={{\n                width: \"20px\",\n                height: \"20px\",\n                backgroundColor: col ? \"rgb(100, 153, 211)\" : \"#465\",\n                borderRadius: \"3px\",\n              }}\n              onClick={() => {\n                let newVal = cloneDeep(value);\n                newVal[rowIndex][colIndex] = !newVal[rowIndex][colIndex];\n                onChange(newVal);\n              }}\n            ></div>\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n}\n","import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport React from \"react\";\n\nfunction polarToCartesian(centerX, centerY, radius, angle) {\n  return {\n    x: centerX + radius * Math.cos(angle),\n    y: centerY + radius * Math.sin(angle),\n  };\n}\n\nfunction describeArc(x, y, radius, startAngle, endAngle) {\n  var start = polarToCartesian(x, y, radius, endAngle);\n  var end = polarToCartesian(x, y, radius, startAngle);\n\n  var largeArcFlag = endAngle - startAngle <= Math.PI ? \"0\" : \"1\";\n\n  var d = [\n    \"M\",\n    start.x,\n    start.y,\n    \"A\",\n    radius,\n    radius,\n    0,\n    largeArcFlag,\n    0,\n    end.x,\n    end.y,\n  ].join(\" \");\n\n  return d;\n}\n\nconst WIDTH = 120;\nconst WIDTH_HALF = WIDTH / 2.0;\n\nfunction SvgComponent({ angle }) {\n  let state = useMemo(() => {\n    let a2 = angle + Math.PI / 2.0;\n    let arcpaths = [describeArc(90, 90, 70, Math.PI / 2.0, a2)];\n    if (a2 >= Math.PI * 2.5) {\n      arcpaths = [\n        describeArc(90, 90, 70, Math.PI / 2.0, Math.PI * 1.99 + Math.PI / 2.0),\n        describeArc(90, 90, 70, Math.PI / 2.0, a2 % (Math.PI * 2)),\n      ];\n    }\n\n    let cx = 90 + 70 * Math.cos(a2);\n    let cy = 90 + 70 * Math.sin(a2);\n\n    return {\n      arcpaths,\n      cx,\n      cy,\n    };\n  }, [angle]);\n\n  return (\n    <svg\n      width={WIDTH}\n      height={WIDTH}\n      viewBox=\"0 0 180 180\"\n      style={{\n        padding: 5,\n        boxSizing: \"border-box\",\n      }}\n    >\n      <defs>\n        <linearGradient id=\"prefix__svgya\" x1={0} x2={0} y1={0} y2={1}>\n          <stop offset=\"0%\" stopColor=\"rgb(96, 197, 177)\" />\n          <stop offset=\"100%\" stopColor=\"rgb(100, 153, 211)\" />\n        </linearGradient>\n      </defs>\n      <circle\n        r={70}\n        cx={90}\n        cy={90}\n        strokeWidth={5}\n        stroke=\"#333\"\n        fill=\"none\"\n      />\n\n      {state.arcpaths.map((d, index) => (\n        <path\n          d={d}\n          strokeLinecap=\"round\"\n          strokeWidth={20}\n          stroke=\"url(#prefix__svgya)\" //{index === 0 ? \"rgb(96, 197, 177)\" : \"#000000\"}\n          fill=\"none\"\n        />\n      ))}\n\n      <circle r={20} cx={state.cx} cy={state.cy} fill=\"#fff\" cursor=\"pointer\" />\n    </svg>\n  );\n}\n\nfunction format(step, value) {\n  if (Math.round(step) !== step) {\n    return Math.round(value * (1.0 / step)) / (1.0 / step) + \"\";\n  } else {\n    return Math.round(value) + \"\";\n  }\n}\n\nexport default function RSlider({\n  min,\n  max,\n  step,\n  value,\n  onChange,\n  maxTurn,\n  name,\n  unit,\n}) {\n  let angle = useMemo(() => (Math.PI * 2 * (value - min)) / (max - min));\n\n  let ref = useRef();\n\n  let mousemove = useCallback(\n    (event) => {\n      const rectSize = ref.current.getBoundingClientRect();\n      const width = rectSize.width;\n      let center = width / 2;\n      let relativeX = event.clientX - rectSize.left;\n      let relativeY = event.clientY - rectSize.top;\n      let angleBetweenTwoVectors = Math.atan2(\n        relativeY - center,\n        relativeX - center\n      );\n\n      angleBetweenTwoVectors =\n        (angleBetweenTwoVectors + Math.PI * 2 - Math.PI / 2) % (Math.PI * 2);\n      angleBetweenTwoVectors /= Math.PI * 2;\n\n      if (!isNaN(angleBetweenTwoVectors)) {\n        let newValue = min + (max - min) * angleBetweenTwoVectors;\n        newValue = Math.max(\n          min,\n          Math.min(max, Math.round(newValue / step) * step)\n        );\n        onChange(newValue);\n      }\n    },\n    [onChange, min, max, step]\n  );\n\n  let [clicked, setClicked] = useState(false);\n  let [hover, setHover] = useState(false);\n  useEffect(() => {\n    window.addEventListener(\"mouseup\", () => setClicked(false));\n  }, []);\n\n  useEffect(() => {\n    if (clicked) {\n      window.addEventListener(\"mousemove\", mousemove);\n      return () => window.removeEventListener(\"mousemove\", mousemove);\n    }\n  }, [clicked, mousemove]);\n\n  return (\n    <div\n      ref={ref}\n      style={{\n        userSelect: \"none\",\n        width: WIDTH + \"px\",\n        height: WIDTH + \"px\",\n        position: \"relative\",\n\n        backgroundColor: clicked\n          ? \"rgba(200,255,255,0.03)\"\n          : hover\n          ? \"rgba(200,255,255,0.03)\"\n          : \"rgba(0,0,0,0)\",\n        // border: \"1px solid #222\",\n        boxShadow: clicked ? \"rgba(0,0,0,0.3) 0px 0px 14px\" : \"none\",\n        transition: \"background-color 0ms, box-shadow 200ms \",\n        borderRadius: \"5px\",\n      }}\n      onMouseEnter={() => setHover(true)}\n      onMouseLeave={() => setHover(false)}\n      onMouseDown={(e) => {\n        setClicked(true);\n        mousemove(e);\n      }}\n    >\n      <SvgComponent angle={angle}></SvgComponent>\n      <div\n        style={{\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%,-50%)\",\n        }}\n      >\n        <div style={{ fontSize: \"0.7em\", fontWeight: \"bold\", color: \"grey\" }}>\n          {name}\n        </div>\n        <div style={{ color: \"rgb(100, 153, 211)\" }}>\n          {format(step, value) + \" \" + unit}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import Editor, { useMonaco } from \"@monaco-editor/react\";\n// eslint-disable-next-line\nimport MyWorker from \"comlink-loader!./Compute\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport Grid from \"./Grid\";\nimport RSlider from \"./RSlider\";\nconst qs = require(\"query-string\");\nvar cloneDeep = require(\"lodash.clonedeep\");\n\nfunction useWindowSize() {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState({\n    width: undefined,\n    height: undefined,\n  });\n\n  useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }\n\n    // Add event listener\n    window.addEventListener(\"resize\", handleResize);\n\n    // Call handler right away so state gets updated with initial window size\n    handleResize();\n\n    // Remove event listener on cleanup\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []); // Empty array ensures that effect is only run on mount\n\n  return windowSize;\n}\n\n// instantiate a new Worker with our code in it:\nconst worker = new MyWorker();\n\nconst tuto1 =\n  \"?data=eJxtkm9v2jAQxr%2FKya8KzRJnK5qUri%2FQykaltWX982IiaDLJAV4dG8U2FBDffWdCqKrtVc7ne36%2B5y47VpgSWcaSJLmWc%2BmEAmu8LkFa%2BOOtAwEWHZgZWFEtFdoY%2BscQalzWaFE7e9SEo%2FU1ggi6uVyhBicrjHNN%2FCHSzcZ4KISGEmdS4z90cAvSrqVSMEVYKrHBEqaieAFngjbXBxR8V2YqlAVByAyunx%2F6Tzf3dxHQdwBnFxcp54ttHHcieOzfjn4Mfn%2B9f757atW%2F3jdRkE9TgVWyxBqmG%2FBW6jkUpqoO5pR8QWqMJmKoOgsMbxG%2BPQx%2BQo%2BHzug5HoQpDLeX4RVFrlpLVzCe5Hpmajh7S1OWX7bxl3ddtunz8w7scg2QJGGIIDUNqzC6tCEZUIf01bE8Cd6b8scGW4X90Rin6NZIq%2FiQgqAtpaHo2Ny4%2BU6IcivcIibjZwdf3QbebdKjG%2Bh%2BjHmnwY%2F8yUWhjKWZ0QgOc1BmHU4LhJVRvsL%2FvNQl4%2FHnXO9zXaPztW4LWMSWohaVZdl4x7Sowm%2FZbpYuK6lZxuMeReKVZSmPmHW4DLk0YiuhPAko8lo6Ulq2j06YYKlF9PiJwE%2BMN91wy060T5zvJ%2Fu%2FqeoC8g%3D%3D\";\n\nconst tuto2 =\n  \"?data=eJydk1tv2jAUgP%2FKkZ9yI3EYaFJaNkU0E2gt7bg8TARVhpoRLXEQcVpWxH%2Bf7VzItGyd9gCxzznflxPn5IQ26RNFHnIcZ8f5PvMchzL7Jfoe7elTROz08M2ROydgzzRO9%2FRRS%2FIs2ughC5nj5BmFT9PgC%2FQx8BRcjDGsf4ALo9erKu%2FP5%2F7wM2Abu7IG264sUdusLroJhv7XN2pmi9ncH0%2FqqraaaXAb%2BLOgYer%2BUiXr7gjfwYjGe3qAbc42PEpZFrKYctjEJNnDALSjBcSCtQ6DDyDr7YQcNREp1hHT1hYcdb2gtjHhGacKlJRMSVDZNO0IHSA6OKCt1coCbIFbspSIrgXHFcHhGuw%2BfIQuGGIjfx50XDBB6wlWRXX5V8BZkqZ813ZrqdWqvuqMemsKFI3FNBPUchWybXoA7RIWUXxVra9h5t893AaPw%2FvFZF6FTVOHU8gAJMWjRDJFxpn680Bmylssi%2BtKFKizy8TZqYkxCs4owg9jMLo2Vg0COPW4QZvKGDSeXMNWMWGWEup%2FAFwbd8QwGA2wxIqLqSbw747f2AIyy8E0y%2BGzoC1bq1vkwo3t9yE7h%2BxAeX5gVQGy0J4cSJIhb3lCjCTyW71ZiDMe309EUkwi8rDdFytyRJ6LLSTbkzHXQs8kzgUgVjmLuCAzdLZqjXwLlaKPawOuHRdu9IpqW6%2BHG5LiSS%2BdYLcUqQaqXnCzhdok4u8aKnVa%2F23qNUzlibe4%2FsHUFJUvtLWp7tsq1z2vzj8BM4CUgw%3D%3D\";\n\nconst tuto3 =\n  \"?data=eJx9Vf1v2kgQ%2FVdGlk5aF2PWBkohTStEiRq1SXr5uF8SVC2wYOuM7drrhDTif7%2BZXX%2BFy12kYO%2Fsmzdv386uX6xVspbWxOr1ilzCX1ff7y7mAMBdzkEl4LkcYPmMY%2B%2FkITag6e030H8I8giEz6EBcQzkNfDL%2FGZWAj0goO9CyfYKd3Y9%2F1PjhlhMV%2F2A1RHncQh%2B17Cv0%2BuLq8vzGYoysFFJ57k15vxyVmvTmMGrBRDsQqgAvsoolRlsinilwiTOH%2BJIKlhFYpfCKbC9A8KBpQ2nn4Dw7k7sGUbMexizpQN72zZZm0ioXEmdSFk0RYmajbE9dEHY0AO21G8OcAe8MlcKFI15Smco%2BAjuED6DD%2B9wQP8T6HrQATbAXB216cck57skUcFbpYmWVbrqmbLmLtw3%2BJ3GCyRltNddCnRgieOdNvUmKeI13DzHKpB5mB87lhaZ1r%2FJ5C8HVGNYjiZRsFwISdfxH%2BelCpWFIt5Gb2eLZc5Yk9%2FF7fOHNvxB%2FUgG%2BFrq8aB05Vch%2Fi2qKtcEP%2Bke%2BaxbnFyu88XTcXKjpKVA1zQpQv1NKesK32wMw73WYQNcy1VjfWu9cp%2Bybr%2FyiJoN89RR45QcT0GoZJyEpnEajkzE62THjhypdjDNkpXMcVe2x1uYyUeZLYlrWWw2MnMgEltNa8buJsnmYhUwJh0IHZKEcyH6hzj0T9yHC%2Bic0hOLYmyBCrg7QFN5KTkPd2kkz85umyqa5OUhBqyviiyGWD7BZqPcWULY%2FTTLxHOJdSMZb1VgozF4nh5FVBglcUMCoMNuJkWERUweCjuhyYPtYm2GYg7VFlONHIGmzM304sf3%2Bc%2FZ1d3lLaJwwcAqHIL4iXn7CG2gCXY6tlGgexrBGtmD6%2Bnt%2FKSKUyVsNj3W5I8iQwc1c4i01c2Go5rPZOrGOzU3ZNkdafLE8JpDB%2BwGlwcipX6g81i3bjNN6w1VsSZITcLdYUOS6y2sYe8Mo3aPfkrH7um5oF3MEYJtz%2FBj4JhLCXvbjOjaL2Pme2KM7%2FVMp7GSy6FDzRFEVlVX6Ub9JA%2BrfqmwtPXbWEtjtptH4UrSCWlvB3ruI0vZTS8t0Q69bzORBvkE7qsglVqgMMuxUpGJXW5N7l%2BsWOzoa%2FjlDkWdX13iJN721oSssvBYWhOPOxYdbIp5jqW7DqOOVaA8zMytg1PTmOXXJBXFK4Yyz6q5sFaLAh1tRHCvpKAvbsPCebt%2Bi4j7fv89fz8aj0aD8Xj0YTxqMdM2NdQVs9%2Bi%2FQ%2FWwWDke%2F3heIic4%2BFo3OKkPq04h%2FV68WtesZJ9JWfwuyHtc95iqY5DxVRpG9Usb9jWbxHg8Tg2ffD%2FpvuHxeEf4%2FOUOQ%3D%3D\";\n\nconst tuto4 =\n  \"?data=eJx9VWlP20AQ%2FSsjS5XWxDFrE2MSLkU0FVG5ytEvgKpNYojV%2BMBeQwDlv3dm1xcpbSTw7ux7b2bfjtfvxjSZBcbA2Nws8gB%2Bnp%2FcnI4AgNucg0zAsTnA5BXnzu5drEHD6%2B%2BgfghyCIRPT4M4BvIa%2BHV0dVQCHSCga0Op9gH37XL0Q%2BE8TKay7mB2xDkc5m817Hh4eXp%2BNj7CojTML%2BUcu8aMz47q2hSm92EDBDsVcg7HwSINMngo4qkMkzi%2FixeBhOlCRCnsA1taICyYmLB%2FAIS3I7FkGNHjMGYTC5amqVkPCyFzGSgisWiJiEqNsSV0QZiwCWyiRhZwC5ySGwgsGnlSMSTsge3BIbiwgRP6G0DXgQ6wHnJV1KR%2FmpxHSSLnn6UmWVbVVa%2BUOaNw2eAjhRcoyuisuxTowATnkTL1KiniGVy9xnIe5GG%2B7lhaZKr%2Bhyx4skA2huVoEgXLjVDpKn4xLquQWSjix8XnbDHJGWv4XTw%2B1zPhC%2FUjGeCqUtcnpStPhfi7qCpdEzxQPXKoWpxcrvniZZ3cVNKqQOXUFCF%2FE2VW4ZuDYXjWKqyBs2DaWN%2Fab7BMWXer8oiaDXlyrXFKjUy8xIlUG6RnI5ImL8y1LR1GRt8msuOa1Pd6Z1G6CHJkDrNMvLKr4enFyejX0fnN2TWCHpIMWIVDEN%2FVoz1oA3Ww0zHh%2FS4GUEeJYIXchMvh9Wi3ilMm9LieZ2qupre4P1e9CT39Prj3NuYfiemcsVjtSckDqKqeRQahLinEeqqbAGd1IfRTbyMd1X7lEmlt6Atmo3EJbwkLQrNNy%2BciJU%2BpoeuzbwPIu1AWMwLVQtz22kIZdPZbwA2tqldX%2BpETJMMl7BmGN6ml32hsDD2jO7NJjS1AljmenioDabhS6%2BV53tLznvohRyV9heM6JswCWWSx9qcEWzR%2BzEQ6zwdwWwbvEW1YRioyEeXG4PbdiEVEX4WvN3ig4%2FMzXMRbzxjQfg1sT2PgcMugBqeYYxnPYlEgwaH1Ig4lcnNjZdVCuqpaphL5oFHyjFoNs7Uk0J6mDO6UEvTtaVQ4d1r5W0Lcdbe2%2Bbbf9%2F1ev%2B%2Fv9P2WMnneSFfKbkv2H6q9nu86W17fQ82%2B5%2FdbmtRylaZX7xe%2Fa5UqGVhqzt8a0S3OWypVo1dKVW1%2BrfKJbW3TsNPXTe%2F933R3db%2F6A6uoOxk%3D\";\nconst tuto5 =\n  \"?data=eJydVm1v2kgQ%2FisjS1eZYIxNQtOS0ipKuSu6BtKQ3BeCTgsssXV%2Bq70u0Ij%2FfjO7XttQiE5nKcY7%2BzzPzs7Lbl6MRbzkRs9ot%2FOMw1%2Fjr4%2B3AwBwbMcBEYNrOwDzLY7dq6dIga4f%2FgT5IMglEP52FchBQ1YCPw8mNwXQBQJ2bCjU9nC%2F3w%2B%2BSVwXF5OrvsPVEec64P0sYV%2Bu72%2FHo%2BENOqVgl4Wca5eY4eim9E1iLo5sYHJ3fTMoQF1QOzgvHdOwP1J%2FCaPxw2BCfrxFM03cMuHBFx4kPIVVHi2EH0fZUxRwAYuAhQn0wdxYwCyYN6D%2FEQhvh2xjokV9%2B5E5t2DTaCjWKmAiE1wSiUVTRJRqprmBFrAGtMGcyy8LHAvcgssZ7gZ5QjIEfAC7C5%2BgA2c4oL8etFxognmBXGlt0EuRszCOhXdsaZI1tV%2FlTLFm6G8qfCjxDEVNqpQWGZowx3EowziJ82gJk20kPJ752WHEkjyV%2Fq9S%2Ft0CUQUswyCRsdgIuS7td8PCC5H6LHoOjrPZPDPNit%2FCtHa6DfiNqpkC0JGuHg6KqHzP2a9O6eUq40dZYZ9kg1CUSz5bH5IrT2oeyDUVhYl%2FiLLU%2BCoxJuZamhVwyRdV6Gv75ZvEbHV1jKjYkCcOCqfQSNk6ioXcIP1WIkm8Nju2pczIeG8T2e00qO7VzsIk4BkypzNleU5Z4qnhKk7B1CiEOFfq6wNMrm%2Fvvg7%2Bvhk%2Fjh6UsdlswMtTBCATiWCJbMP99cPgSttpHYxwOU7luJr2wzwQLOJxLpFkl71qoycDtvBMM43XFuBrGC25qmu5qOInvlh4SFScgEfP2NatEq6AOKrkFnFgAb5%2BkVOC8WqVcdqMhmA65DmjQXqjbdomLqUIV3q63R5HwRbZYZJj%2FDPZOMJjuFXBUsGXwNDgsQwwP7Clg8OP%2FMzjS63gr4CchDdvQGB1yl%2BMPx3CGG%2FQMHrq0Wv23WpKpvEHS8FXOfRRQB%2B7OCozpx95gFF193VhmTKyVOPyVD%2BriguPZgv8xiE981hC5UhnQdk2hyAqPV%2FkSwKWgo7dPRRModmvgc%2BUeoXYVZ8ZQVOEYPuZeKVZ6nDEHlMjitu%2BK6kutJrSTs6rt2yHKeV41t8LMU0W3aOmqRRwreK2fYpQLOUiTyMV3QJrlaJZD6baKA3YcTvDMhKWsjAzetMXI2IhXeOfH7G8huMRTuJFY%2FQoRgaeCEbPdSyDzhSyuZbxgwU5Elz70tl7OpaRR75AqczYWaWucrVU1Zp7kgXPKMXxVt0Xdy5qkhjlykvHLSTpSq5UHcet%2BVMTdtwDabemTKmrpLVypyZ7QtV9X1Oh%2BtUq3XLH%2BJ%2BJ1qGIFirez0qme%2BnUVHT3aCXtzWWpciRwnZoAts1h2C9eD3udLc83nFr7S%2BEplz3uP3vIeGsZYpsQ6Bn%2F06no0%2BmKBRm3Tr1Fmp8yz6yT3BrruMBR7itrvcI9wToOKbn%2FgXXM6f9DU8Ga1fIkr4paO3TLdjg%2FWrZ7VXu%2Bm%2B3%2BBWEwbUk%3D\";\n\nconst tuto6 =\n  \"?data=eJy9WY1v2sgS%2F1dGSE%2ByiUts8xVoSB9t6DW6JunlozopyUUGDPge2NQ2KW3K%2F%2F5mZnfttSFJ35OuqA3e3Znf%2FmZ2djy7PFZG0divdCv7%2B6vEh8%2FnH69PBwBg12wb0gicmg0w%2FIZt5%2FVtKIT6V78Df1DIISH8bgohGzuSTPB4cPlOCjpAgm4NJFpB7vTk7P79xeAPlm3ihDzzATJAWceG2fdctP%2Fnz4qS2P3p9ceMAUrWa2r6TOxD%2F%2BL0%2FOzkHZoq0RRLp1Zg%2BLl%2FkZnNggfSN06B3U%2BIXX7qvxto3mtukTo7vxpcChhHwrh2AWf%2FKsZH13Yy0MHgGD0gl60uPZIhnpxdXl1cA4921BANXnjhOFrAzJ8v%2FRgmq3CUBlGY3IbqEZLJqO4angVDC0YWjE14vA2JWuynqzjMdMDIRujjwdHRUQ%2Fs1zDMnkbZ01g95QoPXgwp9MDwYA%2BGJvwojHo4MoS%2FBBh0tJEhjoxQxRjB4SHUy4ojguQh18EhpgCOY2oiYxQZI4JTUiU2KfaPd0DSjGmpXzrESHkO24R9aLidRqfVdjstKbe5DfEf2Zr4Pk3MC%2FcX2OvjQf%2F47WDw%2FrUYjnFhcFh43153BvV2u%2FO2Y6Gk26i%2Fb%2FUPDuj5bXvgNJ2WazEeWTWJYjAIIQB2dQCH4DTxe2%2FPZFTD5LA49dIZfNha97mfwmjuLZbkt7UFtPAm9I6A5GsLb02hIJ6D0MCYWJum0JrMvTRJfVYU4bJmRUYzjDW8Ao98Ygz5Cdlb4Ehd38MgRb2UNVKkjNviDbhQxQb978Irhxa5gbrca9IfoZwsoiid7ZqaYA3FKxuRcy6CdS6%2FYHkPQQ3acq%2BoA8MQ2wv21mW0wvW4%2FBamMz8JkrLHlquY%2BU9i%2F4sFae6wBJ1EndIQos79n04kizQOvHA6363tDRPDyPX3ME20myb8i9ICOcBlquWG9MqXlbdNSk2Xdx5xqnrDmYa8nOl7X8vKORONAc8pVLz0P6QyVvL5whi41twtBMf%2BKHe9Zq%2B%2FXhqv6spHFGyol5YCR2LE3tcwStlA%2Bs5BltFXw61Zohs1OjVSdlxT2cVZ5sGCZRwto5hWUYvTB5w9H7DQISJKhXLoBQ%2F%2Bu2ixjP0kiWLEGa4mEz9mAJn9OLY8ii0xVov98WrkG2huaSdla4y7IXsemmQhZzahjht64I1mhuFbgeWJOL0J7hDf30cUkzOKoPc1SGcfvHgRhcEoISuTEL0%2BUz06S5Ws9PXV0jd7mBJI3rUrsWSJQL1Htdlqcz%2BcpjNTph4NXE1Ac98jmAyrTBOtq022xZOZt6T1RqOY9r0IqLIYruI8SFdjEi1A4kBROoa9niZeFTPkMput3B7rWVz4fLoKUi%2BWzmY3FlaBl0Bo3VDCswBzdd2ChgVNC1oWtC3ATI6J3aFh5w4jY2n4peWQ0z%2FCpAtElKqGPQJD9l1uVfPgt2sIixtC0t%2BYWfhOo3D6i5nWce%2B5Ba7tepFs%2FQmyOOr%2BQrJ57iA%2BGdsDp8i20XyC7tCfz38hXRxEp5r8TqjXCy51ap2OZoNO%2FgnuxPVS5EXOGJQA84yfpXMvNdTeoz4pl0N8juarhZ%2BhPHBzB46GgbyFmKKScNkjCRn0XkV%2F1EQGDiZgyEq21%2BuR9UKaIoVFd0m5poaZL0iuo9Yl9zM7WN9cG6s02KTaThcQ43e7CNT%2FCQK8rX6SQOOf94D7IkX3eY5NxVEVKDtkWrvtUBovW%2FHyQj5Psq0IUB5VAVeSOdBJig1hUGqQnqb8525rdTJkfpso7P1qFelUYfDgzVceVjMJl6FcfVDFGU2wZOUyBzevB1MsTkJIA9pNqPXvpRd7C3g8H%2F7tj9INyHqIvgrj4Wox9GMxXlsG6WiGUuI7COHD99rT0gmSTa9wQtTgZ56d1BJ%2FFIXj5BldUR6g4ngVe3yCfEktFRONVnHsh7un2tdOrj567Qxn4kLQYnFTL9L4fCcgi8YIEVoiOonY8OMHyh6JCw1RZ1d1E8ytDK1OhaqKooyXe7eq7iby%2BkWVFwiMRbTRv%2FpdJkeslEVLTq5NK7Q34hz%2Fmx%2F6MUUICSSQzjAgRLBMo2iMx%2F6pjyeXWPPOVGqQhxKj4JhllCTBcO6fruiNpm0oR9s%2BrvZc15952%2BftBrb1cbHjim19vIXtptZuY7ultQ%2Bw3b4T7SJRrVVL5gGW3PLixlJXM%2Ba2jR%2FZl1Qs34i3cuNuW%2Bhy6Y0CLp12CAmP96Afx943g%2B9utHnyHZIV01xI05hWSLPadqXMAbQoW3fDr%2FTJPIpiQ5zo6dCiWS%2Fj8k4LTAEipY84p78RvV0%2B%2Bu1zozjz3EtojwR0xAO6roE3xQKaTb%2Fh8TuZObpFCXEI%2FhKnRnZ3V81u%2FMzidAKgJ6atlvjQbhQCR%2Fk1IG5M0XeYYxZhlFklw0Tq6ZWj4FnHSpkdzuV1zkKkFDTPYkqZHZjStXTMexQmWXksWcoC7YSSBxoeahSbqrhtzE4tHAoi1%2FAE2jlGhXEpL6hDM56StCi%2F7J9%2B%2Bji4f3d%2BfXZlyjsnJSeCmp8OQRcUnVqEqyTMsvtw0b8aaIkzyXdMQjZJwsperpBDvuXJ8jylRC2otJO3vMQSd4sqHKRVN%2FRNjk7QX%2BIOXPqldNw3pIKpFau%2Fxd6SIunmTnODfvVm23ZxXyurA7qVwNGanfc%2FyJeFY%2FF1UUsao%2BapLVfJzHhQaf82VCeCgj0yWU5JI%2BnCjerOYJDqpmJV%2BO2aVLo3j5XQW9DPAMfXuAYn52c4iIf6ShezBD5560oXjyUVusihPseqUD2CCvVawy58GlZlFQYpQiWVjZXhCqdmqAqzACn1Khk4HmOL4I6GiO%2FEnKTtSET6KSIHtW1Ho6Ph2nRB%2FhQyvWhzaIXsarBPoNZbGoq6D1FICsfJgHaZ3NYQ5Lur7LSD5%2FRtXV%2B88v4nfd0CThw7fdzc6QvdFbo%2F%2Bc1WdoNrP0ejqdMYDI4zbVwq5ce6%2FSwE%2FTaioYhSu%2ByLzs%2F6Qr1cFEAzo3Gg0bAzlNl3jUmzvCr%2FNxKar0GpKnI7WOsvLJCzudv8F6to5m8%3D\";\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Array} buffer\n */\nfunction drawBuffer(canvas, buffers) {\n  let ctx = canvas.getContext(\"2d\");\n\n  for (let bufferIndex = 0; bufferIndex < buffers.length; bufferIndex++) {\n    let buffer = buffers[bufferIndex];\n    let h = canvas.height;\n    let w = canvas.width / buffers.length;\n\n    ctx.resetTransform();\n    ctx.translate(bufferIndex * w, 0.0);\n\n    ctx.width = w;\n    ctx.height = h;\n\n    ctx.clearRect(0, 0, w, h);\n\n    if (\n      buffer === undefined ||\n      (!Array.isArray(buffer) && buffer.constructor !== Float32Array) ||\n      buffer.length < 2\n    ) {\n      ctx.fillStyle = \"rgb(30,70,70)\";\n      ctx.fillRect(0, 0, w, h);\n\n      ctx.fillStyle = \"rgb(70,0,0)\";\n      ctx.fillRect(1, 1, w - 1, h - 1);\n      continue;\n    } else {\n      ctx.fillStyle = \"rgb(30,30,30)\";\n      ctx.fillRect(0, 0, w, h);\n      ctx.fillStyle = \"rgb(30,70,70)\";\n      if (bufferIndex < buffers.length - 1) ctx.fillRect(w - 1, 0, 1, h);\n    }\n\n    let minY = buffer.reduce((prev, curr) => (curr < prev ? curr : prev));\n    let maxY = buffer.reduce((prev, curr) => (curr > prev ? curr : prev));\n    let split = maxY - minY;\n\n    maxY += split * 0.1;\n    minY -= split * 0.1;\n\n    function vToH(v) {\n      return h - ((v - minY) / (maxY - minY)) * h;\n    }\n    function iToV(i) {\n      return 10 + (i / (buffer.length - 1)) * (w - 20);\n    }\n    ctx.strokeStyle = \"#977\";\n    ctx.lineWidth = \"1\";\n    ctx.beginPath();\n    ctx.moveTo(0, vToH(0));\n    ctx.lineTo(w, vToH(0));\n\n    let mol = Math.ceil(vToH(-1)) + 0.5;\n    ctx.moveTo(0, mol);\n    ctx.lineTo(w, mol);\n\n    let pol = Math.floor(vToH(1)) - 0.5;\n    ctx.moveTo(0, pol);\n    ctx.lineTo(w, pol);\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.moveTo(iToV(0), vToH(buffer[0]));\n    for (var i = 0; i < buffer.length; i++) {\n      let v = buffer[i];\n      ctx.lineTo(iToV(i), vToH(v));\n    }\n\n    ctx.strokeStyle =\n      bufferIndex % 2 === 0 ? \"rgb(96, 197, 177)\" : \"rgb(100, 153, 211)\";\n    ctx.lineWidth = \"1\";\n    ctx.stroke();\n  }\n}\n\nfunction hashCode(s) {\n  return s.split(\"\").reduce(function (a, b) {\n    a = (a << 5) - a + b.charCodeAt(0);\n    return a & a;\n  }, 0);\n}\n\nconst setQueryStringWithoutPageReload = (qsValue) => {\n  const newurl =\n    window.location.protocol +\n    \"//\" +\n    window.location.host +\n    window.location.pathname +\n    qsValue;\n\n  window.history.pushState({ path: newurl }, \"\", newurl);\n};\n\nconst setQueryStringValue = (\n  key,\n  value,\n  queryString = window.location.search\n) => {\n  const values = qs.parse(queryString);\n  const newQsValue = qs.stringify({ ...values, [key]: value });\n  setQueryStringWithoutPageReload(`?${newQsValue}`);\n};\n\nexport const getQueryStringValue = (\n  key,\n  queryString = window.location.search\n) => {\n  const values = qs.parse(queryString);\n  return values[key];\n};\n\nexport default function EditorFrag() {\n  const monaco = useMonaco();\n\n  const wsize = useWindowSize();\n  const [astate, setAstate] = useState();\n\n  const [setting, setSetting] = useState({\n    code: \"return Array.from(Array(SAMPLE_COUNT).keys()).map(e => 0.0)\",\n    params: [],\n  });\n\n  const ReDrawBuffer = useCallback(() => {\n    let codeResult = astate?.codeResult;\n    if (codeResult)\n      drawBuffer(\n        canvasRef.current,\n        codeResult.graphs || [codeResult.samples] || []\n      );\n  }, [astate]);\n\n  useEffect(() => {\n    ReDrawBuffer();\n  }, [wsize]);\n\n  const [refreshIsPossible, setRefreshIsPossible] = useState(true);\n\n  // const code = setting.code;\n  // const params = setting.params;\n\n  const [computeTime, setComputeTime] = useState(0);\n\n  function setCode(c) {\n    setSetting((old) => {\n      return { ...old, code: c };\n    });\n  }\n  function setParams(newParams) {\n    setSetting((old) => {\n      return { ...old, params: newParams };\n    });\n  }\n\n  const waitingForWorker = useRef(false);\n  function setWaiting(b) {\n    waitingForWorker.current = b;\n  }\n\n  useEffect(() => {\n    async function getInitialData() {\n      let data = getQueryStringValue(\"data\");\n      if (data) {\n        let { code, params } = await worker.compressedB64ToObj(data);\n        setSetting({ code, params });\n      } else {\n        loadPreset(tuto3);\n      }\n    }\n    getInitialData();\n  }, []);\n\n  function loadPreset(preset) {\n    async function getData(preset) {\n      let data = getQueryStringValue(\"data\", preset);\n      if (data) {\n        let { code, params } = await worker.compressedB64ToObj(data);\n\n        setSetting({ code, params });\n      }\n    }\n    getData(preset);\n  }\n\n  const canvasRef = useRef();\n\n  useEffect(() => {\n    let matchesForSlider = [\n      ...setting.code.matchAll(\n        \"//use ([a-zA-Z0-9_]+) +([0-9.]+) +to +([0-9.]+) +by +([0-9.]*)+ *([a-zA-Z/0-9]*) *; *\\n\"\n      ),\n    ];\n\n    let usage = {};\n\n    let newParams = setting.params.slice();\n    let changeParams = false;\n    if (newParams.findIndex((e) => e.name === \"DURATION\") === -1) {\n      changeParams = true;\n      newParams.push({\n        name: \"DURATION\",\n        min: 0.5,\n        max: 10.0,\n        step: 0.1,\n        value: 1.0,\n        unit: \"s\",\n      });\n    }\n\n    newParams.forEach((e) => {\n      usage[e.name] = 0;\n    });\n\n    usage[\"DURATION\"] = 1;\n\n    for (var i = 0; i < matchesForSlider?.length || 0; i++) {\n      let name = matchesForSlider[i][1];\n      let min = 0;\n      let max = 1;\n      let step = 0.01;\n\n      min = parseFloat(matchesForSlider[i][2]);\n      max = parseFloat(matchesForSlider[i][3]);\n      step = parseFloat(matchesForSlider[i][4]);\n      let unit = matchesForSlider[i][5] || \"\";\n\n      let index = newParams.findIndex((e) => e.name === name);\n      if (index === -1) {\n        changeParams = true;\n        newParams.push({\n          name,\n          min,\n          max,\n          step,\n          unit,\n          value: min > 0 ? Math.sqrt(max * min) : max / 2,\n        });\n      } else {\n        let current = newParams[index];\n        if (\n          current.min !== min ||\n          current.max !== max ||\n          current.step !== step ||\n          current.unit != unit\n        ) {\n          changeParams = true;\n          current.min = min;\n          current.max = max;\n          current.step = step;\n          current.unit = unit;\n          current.value =\n            current.value >= min && current.value <= max\n              ? current.value\n              : min > 0\n              ? Math.sqrt(max * min)\n              : max / 2;\n        }\n      }\n\n      usage[name] = (usage[name] || 0) + 1;\n    }\n\n    //GRID\n    let matchesForGRID = [\n      ...setting.code.matchAll(\n        \"//useGrid ([a-zA-Z0-9_]+) +([0-9]+) +([0-9]+) *; *\\n\"\n      ),\n    ];\n\n    for (var i = 0; i < matchesForGRID?.length || 0; i++) {\n      let name = matchesForGRID[i][1];\n\n      usage[name] = (usage[name] || 0) + 1;\n      let width = parseInt(matchesForGRID[i][2]);\n      let height = parseInt(matchesForGRID[i][3]);\n\n      let index = newParams.findIndex((e) => e.name === name);\n\n      if (index === -1) {\n        changeParams = true;\n\n        let valueGrid = [];\n        for (let row = 0; row < height; row++) {\n          valueGrid[row] = [];\n          for (let col = 0; col < width; col++) {\n            valueGrid[row][col] = false;\n          }\n        }\n\n        newParams.push({\n          name,\n          width,\n          height,\n          type: \"grid\",\n          value: valueGrid,\n        });\n      } else {\n        let current = newParams[index];\n\n        if (\n          current.width !== width ||\n          current.height !== height ||\n          current.type !== \"grid\"\n        ) {\n          let valueGrid = [];\n          for (let row = 0; row < height; row++) {\n            valueGrid[row] = [];\n            for (let col = 0; col < width; col++) {\n              valueGrid[row][col] = false;\n            }\n          }\n          changeParams = true;\n          current.width = width;\n          current.height = height;\n          current.type = \"grid\";\n          current.value = valueGrid;\n        }\n      }\n    }\n\n    newParams = newParams.filter((e) => {\n      if (usage[e.name] > 0) {\n        return true;\n      } else {\n        changeParams = true;\n        return false;\n      }\n    });\n\n    if (changeParams === true) setParams(newParams);\n  }, [setting]);\n\n  const [codeCompiled, setCodeCompiled] = useState({ valid: false, hash: 0 });\n\n  useEffect(() => {\n    async function test() {\n      let res = await worker.testSetting(setting);\n      setCodeCompiled(res);\n    }\n    test();\n  }, [setting]);\n\n  let dimOld = useCallback(() => {\n    if (astate.gainNode) {\n      try {\n        let duration = 0.05;\n        let N = (astate.audioCtx.sampleRate * duration) / 100.0;\n        var waveArray = new Float32Array(N);\n        for (var i = 0; i < N; i++) {\n          waveArray[i] = Math.pow(1.0 - i / (N - 1), 2);\n        }\n        astate.gainNode.gain.setValueCurveAtTime(\n          waveArray,\n          astate.audioCtx.currentTime,\n          0.05\n        );\n      } catch {\n        astate.source.stop();\n      }\n    }\n  }, [astate]);\n\n  const [exportedWav, setExportedWav] = useState(null);\n  const exportWav = useCallback(async () => {\n    if (astate && astate.codeResult && astate.codeResult.samples?.length > 0) {\n      setExportedWav(\"loading\");\n      let b64file = await worker.exportWav(\n        astate.audioCtx.sampleRate,\n        astate.codeResult.samples\n      );\n      setExportedWav(b64file);\n    }\n  }, [astate]);\n\n  let compute = useCallback(async () => {\n    if (astate && astate.audioCtx && codeCompiled.valid === true) {\n      dimOld();\n\n      let duration =\n        setting.params.find((e) => e.name === \"DURATION\")?.value || 1.0;\n      let N = Math.ceil(astate.audioCtx.sampleRate * duration);\n\n      let codeResult = null;\n      try {\n        setWaiting(true);\n        let start = performance.now();\n        setExportedWav(null);\n        codeResult = await worker.computeSetting(\n          setting,\n          N,\n          astate.audioCtx.sampleRate\n        );\n        let end = performance.now();\n        setComputeTime(end - start);\n        console.log(\"Compute took \", end - start + \"ms\");\n        if (Array.isArray(codeResult)) {\n          codeResult = { samples: codeResult };\n        }\n        let test = codeResult.samples[0];\n      } catch {\n        return;\n      } finally {\n        setTimeout(() => {\n          setWaiting(false);\n          setRefreshIsPossible(true);\n        }, 100);\n      }\n\n      async function saveSetting() {\n        let str = await worker.objToCompressedB64(cloneDeep(setting));\n        setQueryStringValue(\"data\", str);\n      }\n      saveSetting();\n\n      var myArrayBuffer = astate.audioCtx.createBuffer(\n        1,\n        N,\n        astate.audioCtx.sampleRate\n      );\n\n      for (\n        var channel = 0;\n        channel < myArrayBuffer.numberOfChannels;\n        channel++\n      ) {\n        var nowBuffering = myArrayBuffer.getChannelData(channel);\n\n        for (var i = 0; i < myArrayBuffer.length; i++) {\n          nowBuffering[i] = codeResult.samples[i];\n        }\n      }\n\n      let source = astate.audioCtx.createBufferSource();\n      source.buffer = myArrayBuffer;\n\n      var gainNode = astate.audioCtx.createGain();\n      gainNode.gain.value = 1.0;\n      source.connect(gainNode);\n      gainNode.connect(astate.audioCtx.destination);\n\n      //   source.connect(astate.audioCtx.destination);\n      source.start();\n\n      drawBuffer(\n        canvasRef.current,\n        codeResult.graphs || [codeResult.samples] || []\n      );\n\n      setAstate((old) => {\n        return {\n          ...old,\n          source,\n          gainNode,\n          hash: codeCompiled?.hash,\n          codeResult,\n        };\n      });\n    }\n  }, [astate, codeCompiled, setting, dimOld]);\n\n  const play = useCallback(() => {\n    let codeResult = astate.codeResult;\n    if (codeResult) {\n      dimOld();\n      let duration =\n        setting.params.find((e) => e.name === \"DURATION\")?.value || 1.0;\n      let N = Math.ceil(astate.audioCtx.sampleRate * duration);\n\n      var myArrayBuffer = astate.audioCtx.createBuffer(\n        1,\n        N,\n        astate.audioCtx.sampleRate\n      );\n\n      for (\n        var channel = 0;\n        channel < myArrayBuffer.numberOfChannels;\n        channel++\n      ) {\n        var nowBuffering = myArrayBuffer.getChannelData(channel);\n\n        for (var i = 0; i < myArrayBuffer.length; i++) {\n          nowBuffering[i] = codeResult.samples[i];\n        }\n      }\n\n      let source = astate.audioCtx.createBufferSource();\n      source.buffer = myArrayBuffer;\n\n      var gainNode = astate.audioCtx.createGain();\n      gainNode.gain.value = 1.0;\n      source.connect(gainNode);\n      gainNode.connect(astate.audioCtx.destination);\n\n      //   source.connect(astate.audioCtx.destination);\n      source.start();\n      setAstate((old) => {\n        return { ...old, source, gainNode };\n      });\n    }\n  }, [astate, dimOld]);\n\n  useEffect(() => {\n    if (refreshIsPossible) {\n      if (\n        codeCompiled.valid === true &&\n        astate?.hash !== codeCompiled?.hash &&\n        !waitingForWorker.current\n      ) {\n        compute();\n      } else if (\n        codeCompiled.valid === true &&\n        astate?.hash !== codeCompiled?.hash &&\n        waitingForWorker.current\n      ) {\n        setRefreshIsPossible(false);\n      }\n    }\n  }, [codeCompiled, compute, astate, setting, refreshIsPossible]);\n\n  useEffect(() => {\n    var audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n    setAstate({ audioCtx });\n  }, []);\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        background: \"rgb(62, 62, 62)\",\n        height: window.innerHeight,\n        overflow: \"hidden\",\n      }}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          background: \"rgb(62, 62, 62)\",\n          flex: \"1 1 auto\",\n          overflow: \"hidden\",\n        }}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            flex: \"1 60 auto\",\n            margin: \"5px\",\n            marginRight: \"0px\",\n            padding: \"10px\",\n            background: \"rgb(30 30 30)\",\n            borderRadius: \"3px\",\n\n            overflow: \"hidden\",\n          }}\n        >\n          <div\n            style={{ display: \"flex\", flexDirection: \"row\", marginTop: \"10px\" }}\n          >\n            <button\n              style={{\n                padding: \"10px\",\n                marginRight: \"5px\",\n                fontSize: \"0.8em\",\n                cursor: \"pointer\",\n                backgroundColor: \"#3dc9b0\",\n                border: \"none\",\n                borderRadius: \"3px\",\n              }}\n              onClick={() => {\n                play();\n              }}\n            >\n              Play\n            </button>\n            <button\n              style={{\n                padding: \"10px\",\n                marginRight: \"5px\",\n                cursor: \"pointer\",\n                fontSize: \"0.8em\",\n                backgroundColor: \"#3dc9b0\",\n                border: \"none\",\n                borderRadius: \"3px\",\n              }}\n              onClick={() => {\n                compute();\n              }}\n            >\n              Compile\n            </button>\n            {exportedWav && exportedWav !== \"loading\" && (\n              <a\n                href={exportedWav}\n                download=\"exported_sound.wav\"\n                target=\"_blank\"\n                style={{\n                  padding: \"10px\",\n                  fontSize: \"0.8em\",\n                  cursor: \"pointer\",\n                  backgroundColor: \"#569cd6\",\n                  border: \"none\",\n                  borderRadius: \"3px\",\n                  textDecoration: \"none\",\n                  color: \"black\",\n                }}\n              >\n                Download exported\n              </a>\n            )}\n            {exportedWav === \"loading\" && (\n              <div\n                style={{\n                  padding: \"10px\",\n                  fontSize: \"0.8em\",\n\n                  backgroundColor: \"#569cd6\",\n                  border: \"none\",\n                  borderRadius: \"3px\",\n                }}\n              >\n                Loading\n              </div>\n            )}\n            {!exportedWav && (\n              <button\n                style={{\n                  padding: \"10px\",\n                  fontSize: \"0.8em\",\n                  cursor: \"pointer\",\n                  backgroundColor: \"#3dc9b0\",\n                  border: \"none\",\n                  borderRadius: \"3px\",\n                }}\n                onClick={() => {\n                  exportWav();\n                }}\n              >\n                Export\n              </button>\n            )}\n          </div>\n\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              marginTop: \"10px\",\n              alignItems: \"center\",\n            }}\n          >\n            <div\n              style={{ color: \"grey\", fontSize: \"0.8em\", marginRight: \"3px\" }}\n            >\n              Tutorial/demo\n            </div>\n            {[\n              [\"1\", tuto1],\n              [\"2\", tuto2],\n              [\"3\", tuto3],\n              [\"4\", tuto4],\n              [\"5\", tuto5],\n              [\"6\", tuto6],\n            ].map(([name, tuto]) => (\n              <button\n                style={{\n                  padding: \"8px\",\n                  cursor: \"pointer\",\n                  marginRight: \"3px\",\n                  backgroundColor: \"#099\",\n                  border: \"none\",\n                  borderRadius: \"3px\",\n                }}\n                onClick={() => loadPreset(tuto)}\n              >\n                {name}\n              </button>\n            ))}\n          </div>\n          <div\n            style={{\n              fontSize: \"0.8em\",\n              marginTop: \"10px\",\n              color: \"white\",\n              textAlign: \"left\",\n            }}\n          >\n            <div> Write your sound function on the right !</div>\n            <div>\n              The samples you return will be played on your speaker, and the\n              graphs your return plotted.\n            </div>\n          </div>\n\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              flex: \"1 1 auto\",\n              marginTop: \"20px\",\n              flexWrap: \"wrap\",\n              overflowY: \"auto\",\n            }}\n          >\n            {setting.params.map((p) => (\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"row\",\n                }}\n              >\n                {!p.type && (\n                  <RSlider\n                    name={p.name}\n                    min={p.min}\n                    max={p.max}\n                    step={p.step}\n                    value={p.value}\n                    unit={p.unit}\n                    onChange={(v) =>\n                      setSetting((old) => {\n                        let arr = old.params.slice();\n                        let elem = arr.find((e) => e.name === p.name);\n                        if (elem) elem.value = v;\n                        return { ...old, params: arr };\n                      })\n                    }\n                  ></RSlider>\n                )}\n                {p.type === \"grid\" && (\n                  <Grid\n                    name={p.name}\n                    value={p.value}\n                    onChange={(newGrid) => {\n                      setSetting((old) => {\n                        let arr = old.params.slice();\n                        let elem = arr.find((e) => e.name === p.name);\n                        if (elem) elem.value = newGrid;\n                        return { ...old, params: arr };\n                      });\n                    }}\n                  ></Grid>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n        <div\n          style={{\n            flex: \"1 1 auto\",\n            margin: \"5px\",\n            padding: \"0px\",\n            background: \"rgb(30 30 30)\",\n            minWidth: \"677px\",\n            borderRadius: \"3px\",\n            overflow: \"hidden\",\n            position: \"relative\",\n          }}\n        >\n          <Editor\n            height=\"60vh\"\n            defaultLanguage=\"javascript\"\n            defaultValue={setting.code}\n            value={setting.code}\n            onChange={(v, e) => setCode(v)}\n            theme=\"vs-dark\"\n            options={{\n              fontSize: \"12\",\n            }}\n          />\n          <div\n            style={{\n              color: \"grey\",\n              fontSize: \"0.7em\",\n              textAlign: \"right\",\n              position: \"absolute\",\n              bottom: \"0px\",\n              right: \"0px\",\n            }}\n          >\n            {Math.floor(computeTime) + \" ms\"}\n          </div>\n        </div>\n      </div>\n\n      <div\n        style={{\n          margin: \"0px 5px 5px 5px\",\n          padding: \"0px\",\n          flex: \"none\",\n          borderRadius: \"3px\",\n          overflow: \"hidden\",\n          height: Math.floor(wsize.height * 0.35) + \"px\",\n        }}\n      >\n        <canvas\n          ref={canvasRef}\n          width={wsize.width - 10}\n          height={Math.floor(wsize.height * 0.35)}\n          // style={{ width: \"100%\", minHeight: \"50px\" }}\n        ></canvas>\n      </div>\n    </div>\n  );\n}\n","import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport EditorFrag from \"./frag/Editor\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <EditorFrag></EditorFrag>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}