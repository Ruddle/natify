{"version":3,"sources":["frag/Editor.js","frag/RSlider.js","frag/Compute.js","webpack:///./src/frag/Compute.js?4145","logo.svg","App.js","reportWebVitals.js","index.js"],"names":["pako","require","qs","cloneDeep","worker","MyWorker","codeStr","drawBuffer","canvas","buffer","ctx","getContext","h","height","w","width","min","reduce","prev","curr","max","console","log","clearRect","fillStyle","fillRect","strokeStyle","lineWidth","beginPath","moveTo","Math","floor","lineTo","mol","ceil","pol","stroke","i","length","v","hashCode","s","split","a","b","charCodeAt","setQueryStringWithoutPageReload","qsValue","newurl","window","location","protocol","host","pathname","history","pushState","path","setQueryStringValue","key","value","queryString","search","values","parse","newQsValue","stringify","getQueryStringValue","ID","random","toString","substr","generateJsSoundNode","id","type","position","x","y","data","sample","code","cachedSample","params","generateSoundPlayerNode","generateSampleGeneratorNode","count","SampleGeneratorNodeStyles","background","color","padding","SampleGeneratorNodeComponent","style","borderRadius","backgroundColor","SoundPlayerNodeStyles","SoundPlayerNodeComponent","JsSoundNodeStyles","JsSoundNodeComponent","nodeTypes","SoundPlayer","JsSound","SampleGenerator","defaultJsSound","defaultSoundPlayer","defaultSampleGenerator","compileJsSoundCode","hash","map","e","join","paramsArgs","name","code2","slice","f","eval","func","valid","error","computeJsSound","jsSound","sampleGenerator","Array","compiled","compileElements","elements","edge","find","target","source","err","EditorFrag","useState","astate","setAstate","setCode","setParams","useEffect","compressedB64ToObj","getInitialData","canvasRef","useRef","res","matchAll","usage","newParams","changeParams","forEach","step","parseFloat","index","findIndex","push","sqrt","current","filter","e2","codeCompiled","useMemo","compute","useCallback","audioCtx","putInQuery","obj","objToCompressedB64","str","gainNode","N","sampleRate","waveArray","Float32Array","pow","gain","setValueCurveAtTime","currentTime","myArrayBuffer","createBuffer","nowBuffering","getChannelData","channel","paramsVal","numberOfChannels","createBufferSource","createGain","connect","destination","start","old","AudioContext","webkitAudioContext","display","flexDirection","innerHeight","overflow","flex","margin","onClick","fontSize","marginTop","flexWrap","p","onChange","arr","elem","maxWidth","onValueChange","c","highlight","languages","js","fontFamily","ref","innerWidth","minHeight","polarToCartesian","centerX","centerY","radius","angle","cos","sin","describeArc","startAngle","endAngle","end","largeArcFlag","PI","WIDTH","SvgComponent","state","a2","arcpaths","cx","cy","viewBox","boxSizing","r","strokeWidth","fill","d","strokeLinecap","cursor","format","round","RSlider","maxTurn","mousemove","event","rectSize","getBoundingClientRect","center","relativeX","clientX","left","relativeY","clientY","top","angleBetweenTwoVectors","atan2","isNaN","newValue","clicked","setClicked","addEventListener","removeEventListener","onMouseDown","transform","fontWeight","inst","wrap","Worker","module","exports","this","App","className","Editor","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1b8111c9.chunk.js","sourcesContent":["import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport React from \"react\";\nimport Editor from \"react-simple-code-editor\";\nimport { highlight, languages } from \"prismjs/components/prism-core\";\nimport \"prismjs/components/prism-clike\";\nimport \"prismjs/components/prism-javascript\";\nimport { createEvent } from \"@testing-library/dom\";\nimport RSlider from \"./RSlider\";\nimport ReactFlow, { Handle } from \"react-flow-renderer\";\nimport * as base64 from \"byte-base64\";\n// eslint-disable-next-line\nimport MyWorker from \"comlink-loader!./Compute\";\nconst pako = require(\"pako\");\nconst qs = require(\"query-string\");\nvar cloneDeep = require(\"lodash.clonedeep\");\n\n// instantiate a new Worker with our code in it:\nconst worker = new MyWorker();\n\nconst codeStr = `//Globals are : sample (0,1,2..), rate (44100hz..), channel (0,1..)\n\n//use VOLUME   0.00 to 1.0  by 0.1;\n//use ATK      0.01 to 0.05 by 0.001;\n//use DESC     0.1  to 2.   by 0.01;\n//use FREQ     50   to 1800 by 10;\n//use HARMONIC 1.   to 7.   by 1.;\n//use INC      0.0  to 4.0  by 0.1;\n\n//Math Helper functions\nlet clamp = (x, a, b) => Math.max(a, Math.min(b,x))\nlet flatstep = (a,b,x) => clamp((x-a)/(b-a),0,1)\nlet ease = (t) => t<.5 ? 2*t*t : -1+(4-2*t)*t\nlet smoothstep = (a,b,x) => ease(flatstep(a,b,x))\nlet mix=(a,b,m) => a*(1.0-m)+b*m;\n//Sound Synthesis functions\nlet pure=(freq,t) => Math.sin(freq*t* 2* Math.PI)\nlet triangle=(freq,t) => Math.abs(((freq*t-0.25)%1.0)*2.0-1.0)*2.0-1.0\nlet square=(freq,t) => triangle(freq,t)>0.0 ? 1.0 : -1.0\nlet saw   =(freq,t) => (freq*t %1.0)*2. -1.\nlet atk=(d,t) => smoothstep(0,d,t)\nlet dec=(a,b,t) => Math.exp(-3*Math.max(0,t-a)/(b-a))\n\n//time in seconds\nlet t = sample / rate;\nlet s = 0.0;\n//0 is fundamental, others are harmonics\nfor(var i = 0; i<HARMONIC;i++){\n  let freq = FREQ * Math.pow(INC,i)\n  let shape = pure(freq,t)\n  let amplitude = Math.pow(0.5,i)\n  s+= amplitude*shape\n}\n//Envelope\nreturn s * atk(ATK,t) * dec(ATK,DESC,t)* VOLUME`;\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Array} buffer\n */\nfunction drawBuffer(canvas, buffer) {\n  let ctx = canvas.getContext(\"2d\");\n  let h = canvas.height;\n  let w = canvas.width;\n\n  let min = buffer.reduce((prev, curr) => (curr < prev ? curr : prev));\n  let max = buffer.reduce((prev, curr) => (curr > prev ? curr : prev));\n\n  ctx.width = w;\n  ctx.height = h;\n\n  console.log(w);\n\n  ctx.clearRect(0, 0, w, h);\n\n  ctx.fillStyle = \"#456\";\n  ctx.fillRect(0, 0, w, h);\n\n  ctx.strokeStyle = \"#977\";\n  ctx.lineWidth = \"1\";\n  ctx.beginPath();\n  ctx.moveTo(0, Math.floor(h / 2) + 0.5);\n  ctx.lineTo(w, Math.floor(h / 2) + 0.5);\n\n  let mol = Math.ceil((h * (-1 - min)) / (max - min)) + 0.5;\n  ctx.moveTo(0, mol);\n  ctx.lineTo(w, mol);\n\n  let pol = Math.floor((h * (1 - min)) / (max - min)) - 0.5;\n  ctx.moveTo(0, pol);\n  ctx.lineTo(w, pol);\n  ctx.stroke();\n\n  ctx.beginPath();\n  ctx.moveTo(0, h / 2);\n  for (var i = 0; i < buffer.length; i++) {\n    let v = -buffer[i];\n    ctx.lineTo((i / buffer.length) * w, ((v - min) / (max - min)) * h);\n  }\n\n  ctx.strokeStyle = \"#000\";\n  ctx.lineWidth = \"1\";\n  ctx.stroke();\n}\n\nfunction hashCode(s) {\n  return s.split(\"\").reduce(function (a, b) {\n    a = (a << 5) - a + b.charCodeAt(0);\n    return a & a;\n  }, 0);\n}\n\nconst setQueryStringWithoutPageReload = (qsValue) => {\n  const newurl =\n    window.location.protocol +\n    \"//\" +\n    window.location.host +\n    window.location.pathname +\n    qsValue;\n\n  window.history.pushState({ path: newurl }, \"\", newurl);\n};\n\nconst setQueryStringValue = (\n  key,\n  value,\n  queryString = window.location.search\n) => {\n  const values = qs.parse(queryString);\n  const newQsValue = qs.stringify({ ...values, [key]: value });\n  setQueryStringWithoutPageReload(`?${newQsValue}`);\n};\n\nexport const getQueryStringValue = (\n  key,\n  queryString = window.location.search\n) => {\n  const values = qs.parse(queryString);\n  return values[key];\n};\n\nvar ID = function () {\n  // Math.random should be unique because of its seeding algorithm.\n  // Convert it to base 36 (numbers + letters), and grab the first 9 characters\n  // after the decimal.\n  return \"_\" + Math.random().toString(36).substr(2, 9);\n};\n\nfunction generateJsSoundNode() {\n  return {\n    id: ID(),\n    type: \"JsSound\",\n    position: { x: 150, y: 20 },\n    data: {\n      sample: 44100,\n      code: `let t = sample/rate;\n    return Math.sin(440.*t* Math.PI*2)*0.4;`,\n      cachedSample: null,\n      params: [],\n    },\n  };\n}\n\nfunction generateSoundPlayerNode() {\n  return {\n    id: \"SoundPlayerId\",\n    type: \"SoundPlayer\",\n    data: {},\n    position: { x: 250, y: 50 },\n  };\n}\n\nfunction generateSampleGeneratorNode() {\n  return {\n    id: ID(),\n    type: \"SampleGenerator\",\n    data: {\n      count: 44100,\n    },\n    position: { x: 0, y: 50 },\n  };\n}\n\nconst SampleGeneratorNodeStyles = {\n  background: \"#9CA8B3\",\n  color: \"#FFF\",\n  padding: 10,\n};\nconst SampleGeneratorNodeComponent = ({ data }) => {\n  return (\n    <div style={SampleGeneratorNodeStyles}>\n      <Handle\n        type=\"source\"\n        position=\"right\"\n        style={{ borderRadius: 0, backgroundColor: \"white\" }}\n      />\n      <div>Generator</div>\n    </div>\n  );\n};\n\nconst SoundPlayerNodeStyles = {\n  background: \"#9CA8B3\",\n  color: \"#FFF\",\n  padding: 10,\n};\nconst SoundPlayerNodeComponent = ({ data }) => {\n  return (\n    <div style={SoundPlayerNodeStyles}>\n      <Handle\n        type=\"target\"\n        position=\"left\"\n        style={{ borderRadius: 0, backgroundColor: \"blue\" }}\n      />\n      <div>Speaker</div>\n    </div>\n  );\n};\n\nconst JsSoundNodeStyles = {\n  background: \"#9CA8B3\",\n  color: \"#FFF\",\n  padding: 10,\n};\nconst JsSoundNodeComponent = ({ data }) => {\n  return (\n    <div style={JsSoundNodeStyles}>\n      <Handle\n        id=\"sample\"\n        type=\"target\"\n        position=\"left\"\n        style={{ borderRadius: 0, backgroundColor: \"white\" }}\n      />\n      <div>JsSound</div>\n      <Handle\n        id=\"sound\"\n        type=\"source\"\n        position=\"right\"\n        style={{ borderRadius: 0, backgroundColor: \"blue\" }}\n      />\n    </div>\n  );\n};\n\nconst nodeTypes = {\n  SoundPlayer: SoundPlayerNodeComponent,\n  JsSound: JsSoundNodeComponent,\n  SampleGenerator: SampleGeneratorNodeComponent,\n};\n\nconst defaultJsSound = generateJsSoundNode();\nconst defaultSoundPlayer = generateSoundPlayerNode();\nconst defaultSampleGenerator = generateSampleGeneratorNode();\n\nfunction compileJsSoundCode(code, params) {\n  let hash = hashCode(code + params.map((e) => e.value + \"\").join(\";\"));\n  try {\n    let paramsArgs = params.map((e) => e.name + \",\").join(\"\");\n    let code2 =\n      \"((sample, rate,channel, {\" +\n      paramsArgs.slice(0, -1) +\n      \"}) => {\" +\n      code +\n      \"})\";\n\n    let f = eval(code2);\n    let a = f(10, 44100, 1, {});\n    return { func: f, valid: true, hash };\n  } catch (e) {\n    console.error(\"CANT USE CODE \", e);\n    return { func: () => 0.0, valid: false, hash };\n  }\n}\n\nfunction computeJsSound(jsSound, sampleGenerator) {\n  let buffer = new Array(sampleGenerator.data.count);\n  for (let sample = 0; sample < buffer.length; sample++) {\n    buffer[sample] = jsSound.compiled.func(sample, 44100, 0);\n  }\n  jsSound.data.buffer = buffer;\n}\n\nfunction compileElements(elements) {\n  let edge = elements.find((e) => e.target === \"SoundPlayerId\");\n  if (edge) {\n    let source = elements.find((e) => e.id === edge.source);\n    if (source && source.type === \"JsSound\") {\n      let jsSound = source;\n      let compiled = compileJsSoundCode(jsSound.data.code, jsSound.data.params);\n      jsSound.data.compiled = compiled;\n    } else {\n      console.err(\"CANT COMPILE : UNIMPLEMENTED FOR \", source.type);\n    }\n  }\n  return elements;\n}\n\nexport default function EditorFrag() {\n  const [astate, setAstate] = useState();\n\n  const [code, setCode] = useState(codeStr);\n\n  // const [elements, setElements] = useState([\n  //   defaultJsSound,\n  //   // you can also pass a React component as a label\n  //   defaultSoundPlayer,\n  //   {\n  //     id: \"JsSound_SoundPlayer\",\n  //     source: defaultJsSound.id,\n  //     target: defaultSoundPlayer.id,\n  //     animated: true,\n  //   },\n  //   defaultSampleGenerator,\n  //   {\n  //     id: \"JsSound_GE\",\n  //     source: defaultSampleGenerator.id,\n  //     target: defaultJsSound.id,\n  //     animated: true,\n  //   },\n  // ]);\n\n  // let compile = useCallback(() => {\n  //   setElements(compileElements(cloneDeep(elements)));\n  // }, [elements]);\n\n  const [params, setParams] = useState([]);\n\n  useEffect(() => {\n    async function getInitialData() {\n      let data = getQueryStringValue(\"data\");\n      if (data) {\n        let { code, params } = await worker.compressedB64ToObj(data);\n        setCode(code);\n        setParams(params);\n      }\n    }\n    getInitialData();\n  }, []);\n\n  const canvasRef = useRef();\n\n  useEffect(() => {\n    let res = [\n      ...code.matchAll(\n        \"//use ([a-zA-Z0-9_]+) +([0-9.]+) +to +([0-9.]+) +by +([0-9.]*)+ *; *\\n\"\n      ),\n    ];\n\n    let usage = {};\n\n    let newParams = params.slice();\n    let changeParams = false;\n    params.forEach((e) => {\n      usage[e.name] = 0;\n    });\n\n    for (var i = 0; i < res?.length || 0; i++) {\n      let name = res[i][1];\n      let min = 0;\n      let max = 1;\n      let step = 0.01;\n\n      min = parseFloat(res[i][2]);\n      max = parseFloat(res[i][3]);\n      step = parseFloat(res[i][4]);\n\n      let index = params.findIndex((e) => e.name === name);\n      if (index === -1) {\n        changeParams = true;\n        newParams.push({\n          name,\n          min,\n          max,\n          step,\n          value: min > 0 ? Math.sqrt(max * min) : max / 2,\n        });\n      } else {\n        let current = params[index];\n        if (\n          current.min !== min ||\n          current.max !== max ||\n          current.step !== step\n        ) {\n          changeParams = true;\n          current.min = min;\n          current.max = max;\n          current.step = step;\n          current.value = min > 0 ? Math.sqrt(max * min) : max / 2;\n        }\n      }\n\n      usage[name] = (usage[name] || 0) + 1;\n    }\n\n    params.forEach((e) => {\n      if (usage[e.name] === 0) {\n        changeParams = true;\n        newParams = newParams.filter((e2) => e2.name !== e.name);\n      }\n    });\n\n    if (changeParams === true) setParams(newParams);\n  }, [code, params]);\n\n  const codeCompiled = useMemo(() => {\n    return compileJsSoundCode(code, params);\n  }, [code, params]);\n\n  let compute = useCallback(() => {\n    if (astate && astate.audioCtx && codeCompiled.valid === true) {\n      if (astate.gainNode) {\n        // astate.source.stop();\n        let duration = 0.05;\n        let N = (astate.audioCtx.sampleRate * duration) / 10.0;\n        var waveArray = new Float32Array(N);\n        for (var i = 0; i < N; i++) {\n          waveArray[i] = Math.pow(1.0 - i / (N - 1), 2);\n        }\n        astate.gainNode.gain.setValueCurveAtTime(\n          waveArray,\n          astate.audioCtx.currentTime,\n          0.05\n        );\n      }\n      var myArrayBuffer = astate.audioCtx.createBuffer(\n        1,\n        astate.audioCtx.sampleRate * 1,\n        astate.audioCtx.sampleRate\n      );\n      for (\n        var channel = 0;\n        channel < myArrayBuffer.numberOfChannels;\n        channel++\n      ) {\n        var nowBuffering = myArrayBuffer.getChannelData(channel);\n\n        let paramsVal = {};\n        params.forEach((e) => (paramsVal[e.name] = e.value));\n        for (var i = 0; i < myArrayBuffer.length; i++) {\n          try {\n            nowBuffering[i] = codeCompiled.func(\n              i,\n              astate.audioCtx.sampleRate,\n              channel,\n              paramsVal\n            );\n          } catch {\n            return;\n          }\n        }\n      }\n\n      async function putInQuery(obj) {\n        let str = await worker.objToCompressedB64(obj);\n        setQueryStringValue(\"data\", str);\n      }\n      putInQuery(\n        cloneDeep({\n          code,\n          params,\n        })\n      );\n\n      let source = astate.audioCtx.createBufferSource();\n      source.buffer = myArrayBuffer;\n\n      var gainNode = astate.audioCtx.createGain();\n      gainNode.gain.value = 1.0;\n      source.connect(gainNode);\n      gainNode.connect(astate.audioCtx.destination);\n\n      //   source.connect(astate.audioCtx.destination);\n      source.start();\n\n      drawBuffer(canvasRef.current, myArrayBuffer.getChannelData(0));\n\n      setAstate((old) => {\n        return { ...old, source, gainNode, hash: codeCompiled?.hash };\n      });\n    }\n  }, [astate, codeCompiled]);\n\n  useEffect(() => {\n    if (codeCompiled.valid === true && astate?.hash !== codeCompiled?.hash) {\n      compute();\n    }\n  }, [codeCompiled, compute, astate, params]);\n\n  useEffect(() => {\n    var audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n    setAstate({ audioCtx });\n  }, []);\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        background: \"#789\",\n        height: window.innerHeight,\n        overflow: \"hidden\",\n      }}\n    >\n      {/* <ReactFlow elements={elements} nodeTypes={nodeTypes} /> */}\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          background: \"#789\",\n          flex: \"1 1 auto\",\n        }}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            flex: \"1 60 auto\",\n            margin: \"10px\",\n            padding: \"10px\",\n            background: \"#EFF\",\n          }}\n        >\n          <button\n            onClick={() => {\n              compute();\n            }}\n          >\n            Start\n          </button>\n          <div style={{ fontSize: \"0.8em\", marginTop: \"10px\" }}>\n            <div> Write your sound function on the right !</div>\n            <div>\n              The function will be evaluated for every sample (usually 44100 per\n              second of playback) and played.\n            </div>\n            <div>\n              Sliders are auto-generated by comments starting with //use.\n            </div>\n          </div>\n\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              flex: \"1 1 auto\",\n              marginTop: \"20px\",\n              flexWrap: \"wrap\",\n            }}\n          >\n            {params.map((p) => (\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"row\",\n                }}\n              >\n                <RSlider\n                  name={p.name}\n                  min={p.min}\n                  max={p.max}\n                  step={p.step}\n                  value={p.value}\n                  onChange={(v) =>\n                    setParams((old) => {\n                      let arr = old.slice();\n                      let elem = arr.find((e) => e.name === p.name);\n                      if (elem) elem.value = v;\n                      return arr;\n                    })\n                  }\n                ></RSlider>\n              </div>\n            ))}\n          </div>\n\n          <div style={{ flex: \"5 1 auto\" }}></div>\n        </div>\n        <div\n          style={{\n            flex: \"1 1 auto\",\n            margin: \"10px\",\n            padding: \"10px\",\n            background: \"#EFF\",\n            maxWidth: \"890px\",\n          }}\n        >\n          <Editor\n            value={code}\n            onValueChange={(c) => setCode(c)}\n            highlight={(c) => highlight(c, languages.js)}\n            padding={10}\n            style={{\n              fontFamily: '\"Fira code\", \"Fira Mono\", monospace',\n              fontSize: 12,\n            }}\n          />\n        </div>\n      </div>\n\n      <div style={{ padding: \"10px\", flex: \"1 1 auto\" }}>\n        <canvas\n          ref={canvasRef}\n          width={window.innerWidth - 20 + \"\"}\n          height=\"300\"\n          style={{ width: window.innerWidth - 20 + \"px\", minHeight: \"50px\" }}\n        ></canvas>\n      </div>\n    </div>\n  );\n}\n","import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport React from \"react\";\n\nfunction polarToCartesian(centerX, centerY, radius, angle) {\n  return {\n    x: centerX + radius * Math.cos(angle),\n    y: centerY + radius * Math.sin(angle),\n  };\n}\n\nfunction describeArc(x, y, radius, startAngle, endAngle) {\n  var start = polarToCartesian(x, y, radius, endAngle);\n  var end = polarToCartesian(x, y, radius, startAngle);\n\n  var largeArcFlag = endAngle - startAngle <= Math.PI ? \"0\" : \"1\";\n\n  var d = [\n    \"M\",\n    start.x,\n    start.y,\n    \"A\",\n    radius,\n    radius,\n    0,\n    largeArcFlag,\n    0,\n    end.x,\n    end.y,\n  ].join(\" \");\n\n  return d;\n}\n\nconst WIDTH = 120;\nconst WIDTH_HALF = WIDTH / 2.0;\n\nfunction SvgComponent({ angle }) {\n  let state = useMemo(() => {\n    let a2 = angle + Math.PI / 2.0;\n    let arcpaths = [describeArc(90, 90, 70, Math.PI / 2.0, a2)];\n    if (a2 >= Math.PI * 2.5) {\n      arcpaths = [\n        describeArc(90, 90, 70, Math.PI / 2.0, Math.PI * 1.99 + Math.PI / 2.0),\n        describeArc(90, 90, 70, Math.PI / 2.0, a2 % (Math.PI * 2)),\n      ];\n    }\n\n    let cx = 90 + 70 * Math.cos(a2);\n    let cy = 90 + 70 * Math.sin(a2);\n\n    return {\n      arcpaths,\n      cx,\n      cy,\n    };\n  }, [angle]);\n\n  return (\n    <svg\n      width={WIDTH}\n      height={WIDTH}\n      viewBox=\"0 0 180 180\"\n      style={{\n        padding: 5,\n        boxSizing: \"border-box\",\n      }}\n    >\n      <circle\n        r={70}\n        cx={90}\n        cy={90}\n        strokeWidth={5}\n        stroke=\"#e9eaee\"\n        fill=\"none\"\n      />\n\n      {state.arcpaths.map((d, index) => (\n        <path\n          d={d}\n          strokeLinecap=\"round\"\n          strokeWidth={20}\n          stroke={index === 0 ? \"#007aff\" : \"#000000\"}\n          fill=\"none\"\n        />\n      ))}\n\n      <circle r={20} cx={state.cx} cy={state.cy} fill=\"#fff\" cursor=\"pointer\" />\n    </svg>\n  );\n}\n\nfunction format(step, value) {\n  if (Math.round(step) !== step) {\n    return Math.round(value * (1.0 / step)) / (1.0 / step) + \"\";\n  } else {\n    return Math.round(value) + \"\";\n  }\n}\n\nexport default function RSlider({\n  min,\n  max,\n  step,\n  value,\n  onChange,\n  maxTurn,\n  name,\n}) {\n  let angle = useMemo(() => (Math.PI * 2 * (value - min)) / (max - min));\n\n  let ref = useRef();\n\n  let mousemove = useCallback(\n    (event) => {\n      const rectSize = ref.current.getBoundingClientRect();\n      const width = rectSize.width;\n      let center = width / 2;\n      let relativeX = event.clientX - rectSize.left;\n      let relativeY = event.clientY - rectSize.top;\n      let angleBetweenTwoVectors = Math.atan2(\n        relativeY - center,\n        relativeX - center\n      );\n\n      angleBetweenTwoVectors =\n        (angleBetweenTwoVectors + Math.PI * 2 - Math.PI / 2) % (Math.PI * 2);\n      angleBetweenTwoVectors /= Math.PI * 2;\n\n      if (!isNaN(angleBetweenTwoVectors)) {\n        let newValue = min + (max - min) * angleBetweenTwoVectors;\n        newValue = Math.max(\n          min,\n          Math.min(max, Math.round(newValue / step) * step)\n        );\n        onChange(newValue);\n      }\n    },\n    [onChange, min, max, step]\n  );\n\n  let [clicked, setClicked] = useState(false);\n\n  useEffect(() => {\n    window.addEventListener(\"mouseup\", () => setClicked(false));\n  }, []);\n\n  useEffect(() => {\n    if (clicked) {\n      window.addEventListener(\"mousemove\", mousemove);\n      return () => window.removeEventListener(\"mousemove\", mousemove);\n    }\n  }, [clicked, mousemove]);\n\n  return (\n    <div>\n      <div\n        ref={ref}\n        style={{\n          width: WIDTH + \"px\",\n          height: WIDTH + \"px\",\n          position: \"relative\",\n        }}\n        onMouseDown={(e) => {\n          setClicked(true);\n          mousemove(e);\n        }}\n      >\n        <SvgComponent angle={angle}></SvgComponent>\n        <div\n          style={{\n            position: \"absolute\",\n            top: \"50%\",\n            left: \"50%\",\n            transform: \"translate(-50%,-50%)\",\n          }}\n        >\n          <div style={{ fontSize: \"0.8em\", fontWeight: \"bold\", color: \"grey\" }}>\n            {name}\n          </div>\n          <div style={{ color: \"#007aff\" }}>{format(step, value)}</div>\n        </div>\n      </div>\n\n      {/* <input\n        type=\"range\"\n        min={min + \"\"}\n        max={max + \"\"}\n        step={step + \"\"}\n        value={value + \"\"}\n        // onChange={(e) => onChange(e.target.value)}\n      ></input> */}\n    </div>\n  );\n}\n","var wrap = require('comlink').wrap,Worker = require(\"!worker-loader?{}!/home/ctrl/prog/natify/node_modules/comlink-loader/dist/comlink-worker-loader.js!/home/ctrl/prog/natify/node_modules/react-scripts/node_modules/babel-loader/lib/index.js??ref--5-oneOf-2!/home/ctrl/prog/natify/src/frag/Compute.js\"),inst;module.exports = function f() {if (this instanceof f) return wrap(Worker());return inst || (inst = wrap(Worker()));};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"fed3916cab4a8ba570f6.worker.js\");\n};","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport EditorFrag from \"./frag/Editor\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <EditorFrag></EditorFrag>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}