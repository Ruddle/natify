{"version":3,"sources":["frag/Editor.js","frag/RSlider.js","logo.svg","App.js","reportWebVitals.js","index.js"],"names":["qs","require","cloneDeep","codeStr","drawBuffer","canvas","buffer","ctx","getContext","h","height","w","width","min","reduce","prev","curr","max","console","log","clearRect","fillStyle","fillRect","strokeStyle","lineWidth","beginPath","moveTo","Math","floor","lineTo","mol","ceil","pol","stroke","i","length","v","hashCode","s","split","a","b","charCodeAt","setQueryStringWithoutPageReload","qsValue","newurl","window","location","protocol","host","pathname","history","pushState","path","setQueryStringValue","key","value","queryString","search","values","parse","newQsValue","stringify","getQueryStringValue","ID","random","toString","substr","generateJsSoundNode","id","type","position","x","y","data","sample","code","cachedSample","params","generateSoundPlayerNode","generateSampleGeneratorNode","count","SampleGeneratorNodeStyles","background","color","padding","SampleGeneratorNodeComponent","style","borderRadius","backgroundColor","SoundPlayerNodeStyles","SoundPlayerNodeComponent","JsSoundNodeStyles","JsSoundNodeComponent","nodeTypes","SoundPlayer","JsSound","SampleGenerator","defaultJsSound","defaultSoundPlayer","defaultSampleGenerator","compileJsSoundCode","hash","map","e","join","paramsArgs","name","code2","slice","f","eval","func","valid","error","computeJsSound","jsSound","sampleGenerator","Array","compiled","compileElements","elements","edge","find","target","source","err","getInitialData","JSON","atob","initialData","EditorFrag","useState","astate","setAstate","setCode","setParams","canvasRef","useRef","useEffect","res","matchAll","usage","newParams","changeParams","forEach","step","parseFloat","index","findIndex","push","sqrt","current","filter","e2","codeCompiled","useMemo","compute","useCallback","audioCtx","gainNode","N","sampleRate","waveArray","Float32Array","pow","gain","setValueCurveAtTime","currentTime","myArrayBuffer","createBuffer","nowBuffering","getChannelData","channel","paramsVal","numberOfChannels","toSerialize","objJsonStr","objJsonB64","btoa","createBufferSource","createGain","connect","destination","start","old","AudioContext","webkitAudioContext","display","flexDirection","innerHeight","overflow","flex","margin","onClick","fontSize","marginTop","flexWrap","p","onChange","arr","elem","maxWidth","onValueChange","c","highlight","languages","js","fontFamily","ref","innerWidth","minHeight","polarToCartesian","centerX","centerY","radius","angle","cos","sin","describeArc","startAngle","endAngle","end","largeArcFlag","PI","WIDTH","SvgComponent","state","a2","arcpaths","cx","cy","viewBox","boxSizing","r","strokeWidth","fill","d","strokeLinecap","cursor","format","round","RSlider","maxTurn","mousemove","event","rectSize","getBoundingClientRect","center","relativeX","clientX","left","relativeY","clientY","top","angleBetweenTwoVectors","atan2","isNaN","newValue","clicked","setClicked","addEventListener","removeEventListener","onMouseDown","transform","fontWeight","App","className","Editor","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b2880c3f.chunk.js","sourcesContent":["import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport React from \"react\";\nimport Editor from \"react-simple-code-editor\";\nimport { highlight, languages } from \"prismjs/components/prism-core\";\nimport \"prismjs/components/prism-clike\";\nimport \"prismjs/components/prism-javascript\";\nimport { createEvent } from \"@testing-library/dom\";\nimport RSlider from \"./RSlider\";\nimport ReactFlow, { Handle } from \"react-flow-renderer\";\nconst qs = require(\"query-string\");\nvar cloneDeep = require(\"lodash.clonedeep\");\nconst codeStr = `//Globals are : sample (0,1,2..), rate (44100hz..), channel (0,1..)\n\n//use VOLUME   0.00 to 1.0  by 0.1;\n//use ATK      0.01 to 0.05 by 0.001;\n//use DESC     0.1  to 2.   by 0.01;\n//use FREQ     50   to 1800 by 10;\n//use HARMONIC 1.   to 7.   by 1.;\n//use INC      0.0  to 4.0  by 0.1;\n\n//Math Helper functions\nlet clamp = (x, a, b) => Math.max(a, Math.min(b,x))\nlet flatstep = (a,b,x) => clamp((x-a)/(b-a),0,1)\nlet ease = (t) => t<.5 ? 2*t*t : -1+(4-2*t)*t\nlet smoothstep = (a,b,x) => ease(flatstep(a,b,x))\nlet mix=(a,b,m) => a*(1.0-m)+b*m;\n//Sound Synthesis functions\nlet pure=(freq,t) => Math.sin(freq*t* 2* Math.PI)\nlet triangle=(freq,t) => Math.abs(((freq*t-0.25)%1.0)*2.0-1.0)*2.0-1.0\nlet square=(freq,t) => triangle(freq,t)>0.0 ? 1.0 : -1.0\nlet saw   =(freq,t) => (freq*t %1.0)*2. -1.\nlet atk=(d,t) => smoothstep(0,d,t)\nlet dec=(a,b,t) => Math.exp(-3*Math.max(0,t-a)/(b-a))\n\n//time in seconds\nlet t = sample / rate;\nlet s = 0.0;\n//0 is fundamental, others are harmonics\nfor(var i = 0; i<HARMONIC;i++){\n  let freq = FREQ * Math.pow(INC,i)\n  let shape = pure(freq,t)\n  let amplitude = Math.pow(0.5,i)\n  s+= amplitude*shape\n}\n//Envelope\nreturn s * atk(ATK,t) * dec(ATK,DESC,t)* VOLUME`;\n\n/**\n * @param {HTMLCanvasElement} canvas\n * @param {Array} buffer\n */\nfunction drawBuffer(canvas, buffer) {\n  let ctx = canvas.getContext(\"2d\");\n  let h = canvas.height;\n  let w = canvas.width;\n\n  let min = buffer.reduce((prev, curr) => (curr < prev ? curr : prev));\n  let max = buffer.reduce((prev, curr) => (curr > prev ? curr : prev));\n\n  ctx.width = w;\n  ctx.height = h;\n\n  console.log(w);\n\n  ctx.clearRect(0, 0, w, h);\n\n  ctx.fillStyle = \"#456\";\n  ctx.fillRect(0, 0, w, h);\n\n  ctx.strokeStyle = \"#977\";\n  ctx.lineWidth = \"1\";\n  ctx.beginPath();\n  ctx.moveTo(0, Math.floor(h / 2) + 0.5);\n  ctx.lineTo(w, Math.floor(h / 2) + 0.5);\n\n  let mol = Math.ceil((h * (-1 - min)) / (max - min)) + 0.5;\n  ctx.moveTo(0, mol);\n  ctx.lineTo(w, mol);\n\n  let pol = Math.floor((h * (1 - min)) / (max - min)) - 0.5;\n  ctx.moveTo(0, pol);\n  ctx.lineTo(w, pol);\n  ctx.stroke();\n\n  ctx.beginPath();\n  ctx.moveTo(0, h / 2);\n  for (var i = 0; i < buffer.length; i++) {\n    let v = -buffer[i];\n    ctx.lineTo((i / buffer.length) * w, ((v - min) / (max - min)) * h);\n  }\n\n  ctx.strokeStyle = \"#000\";\n  ctx.lineWidth = \"1\";\n  ctx.stroke();\n}\n\nfunction hashCode(s) {\n  return s.split(\"\").reduce(function (a, b) {\n    a = (a << 5) - a + b.charCodeAt(0);\n    return a & a;\n  }, 0);\n}\n\nconst setQueryStringWithoutPageReload = (qsValue) => {\n  const newurl =\n    window.location.protocol +\n    \"//\" +\n    window.location.host +\n    window.location.pathname +\n    qsValue;\n\n  window.history.pushState({ path: newurl }, \"\", newurl);\n};\n\nconst setQueryStringValue = (\n  key,\n  value,\n  queryString = window.location.search\n) => {\n  const values = qs.parse(queryString);\n  const newQsValue = qs.stringify({ ...values, [key]: value });\n  setQueryStringWithoutPageReload(`?${newQsValue}`);\n};\n\nexport const getQueryStringValue = (\n  key,\n  queryString = window.location.search\n) => {\n  const values = qs.parse(queryString);\n  return values[key];\n};\n\nvar ID = function () {\n  // Math.random should be unique because of its seeding algorithm.\n  // Convert it to base 36 (numbers + letters), and grab the first 9 characters\n  // after the decimal.\n  return \"_\" + Math.random().toString(36).substr(2, 9);\n};\n\nfunction generateJsSoundNode() {\n  return {\n    id: ID(),\n    type: \"JsSound\",\n    position: { x: 150, y: 20 },\n    data: {\n      sample: 44100,\n      code: `let t = sample/rate;\n    return Math.sin(440.*t* Math.PI*2)*0.4;`,\n      cachedSample: null,\n      params: [],\n    },\n  };\n}\n\nfunction generateSoundPlayerNode() {\n  return {\n    id: \"SoundPlayerId\",\n    type: \"SoundPlayer\",\n    data: {},\n    position: { x: 250, y: 50 },\n  };\n}\n\nfunction generateSampleGeneratorNode() {\n  return {\n    id: ID(),\n    type: \"SampleGenerator\",\n    data: {\n      count: 44100,\n    },\n    position: { x: 0, y: 50 },\n  };\n}\n\nconst SampleGeneratorNodeStyles = {\n  background: \"#9CA8B3\",\n  color: \"#FFF\",\n  padding: 10,\n};\nconst SampleGeneratorNodeComponent = ({ data }) => {\n  return (\n    <div style={SampleGeneratorNodeStyles}>\n      <Handle\n        type=\"source\"\n        position=\"right\"\n        style={{ borderRadius: 0, backgroundColor: \"white\" }}\n      />\n      <div>Generator</div>\n    </div>\n  );\n};\n\nconst SoundPlayerNodeStyles = {\n  background: \"#9CA8B3\",\n  color: \"#FFF\",\n  padding: 10,\n};\nconst SoundPlayerNodeComponent = ({ data }) => {\n  return (\n    <div style={SoundPlayerNodeStyles}>\n      <Handle\n        type=\"target\"\n        position=\"left\"\n        style={{ borderRadius: 0, backgroundColor: \"blue\" }}\n      />\n      <div>Speaker</div>\n    </div>\n  );\n};\n\nconst JsSoundNodeStyles = {\n  background: \"#9CA8B3\",\n  color: \"#FFF\",\n  padding: 10,\n};\nconst JsSoundNodeComponent = ({ data }) => {\n  return (\n    <div style={JsSoundNodeStyles}>\n      <Handle\n        id=\"sample\"\n        type=\"target\"\n        position=\"left\"\n        style={{ borderRadius: 0, backgroundColor: \"white\" }}\n      />\n      <div>JsSound</div>\n      <Handle\n        id=\"sound\"\n        type=\"source\"\n        position=\"right\"\n        style={{ borderRadius: 0, backgroundColor: \"blue\" }}\n      />\n    </div>\n  );\n};\n\nconst nodeTypes = {\n  SoundPlayer: SoundPlayerNodeComponent,\n  JsSound: JsSoundNodeComponent,\n  SampleGenerator: SampleGeneratorNodeComponent,\n};\n\nconst defaultJsSound = generateJsSoundNode();\nconst defaultSoundPlayer = generateSoundPlayerNode();\nconst defaultSampleGenerator = generateSampleGeneratorNode();\n\nfunction compileJsSoundCode(code, params) {\n  let hash = hashCode(code + params.map((e) => e.value + \"\").join(\";\"));\n  try {\n    let paramsArgs = params.map((e) => e.name + \",\").join(\"\");\n    let code2 =\n      \"((sample, rate,channel, {\" +\n      paramsArgs.slice(0, -1) +\n      \"}) => {\" +\n      code +\n      \"})\";\n\n    let f = eval(code2);\n    let a = f(10, 44100, 1, {});\n    return { func: f, valid: true, hash };\n  } catch (e) {\n    console.error(\"CANT USE CODE \", e);\n    return { func: () => 0.0, valid: false, hash };\n  }\n}\n\nfunction computeJsSound(jsSound, sampleGenerator) {\n  let buffer = new Array(sampleGenerator.data.count);\n  for (let sample = 0; sample < buffer.length; sample++) {\n    buffer[sample] = jsSound.compiled.func(sample, 44100, 0);\n  }\n  jsSound.data.buffer = buffer;\n}\n\nfunction compileElements(elements) {\n  let edge = elements.find((e) => e.target === \"SoundPlayerId\");\n  if (edge) {\n    let source = elements.find((e) => e.id === edge.source);\n    if (source && source.type === \"JsSound\") {\n      let jsSound = source;\n      let compiled = compileJsSoundCode(jsSound.data.code, jsSound.data.params);\n      jsSound.data.compiled = compiled;\n    } else {\n      console.err(\"CANT COMPILE : UNIMPLEMENTED FOR \", source.type);\n    }\n  }\n  return elements;\n}\n\nfunction getInitialData() {\n  let data = getQueryStringValue(\"data\");\n  if (data) {\n    return JSON.parse(atob(data));\n  }\n  return null;\n}\n\nconst initialData = getInitialData();\n\nexport default function EditorFrag() {\n  const [astate, setAstate] = useState();\n\n  const [code, setCode] = useState(initialData?.code || codeStr);\n\n  // const [elements, setElements] = useState([\n  //   defaultJsSound,\n  //   // you can also pass a React component as a label\n  //   defaultSoundPlayer,\n  //   {\n  //     id: \"JsSound_SoundPlayer\",\n  //     source: defaultJsSound.id,\n  //     target: defaultSoundPlayer.id,\n  //     animated: true,\n  //   },\n  //   defaultSampleGenerator,\n  //   {\n  //     id: \"JsSound_GE\",\n  //     source: defaultSampleGenerator.id,\n  //     target: defaultJsSound.id,\n  //     animated: true,\n  //   },\n  // ]);\n\n  // let compile = useCallback(() => {\n  //   setElements(compileElements(cloneDeep(elements)));\n  // }, [elements]);\n\n  const [params, setParams] = useState(initialData?.params || []);\n\n  const canvasRef = useRef();\n\n  useEffect(() => {\n    let res = [\n      ...code.matchAll(\n        \"//use ([a-zA-Z0-9_]+) +([0-9.]+) +to +([0-9.]+) +by +([0-9.]*)+ *; *\\n\"\n      ),\n    ];\n\n    let usage = {};\n\n    let newParams = params.slice();\n    let changeParams = false;\n    params.forEach((e) => {\n      usage[e.name] = 0;\n    });\n\n    for (var i = 0; i < res?.length || 0; i++) {\n      let name = res[i][1];\n      let min = 0;\n      let max = 1;\n      let step = 0.01;\n\n      min = parseFloat(res[i][2]);\n      max = parseFloat(res[i][3]);\n      step = parseFloat(res[i][4]);\n\n      let index = params.findIndex((e) => e.name === name);\n      if (index === -1) {\n        changeParams = true;\n        newParams.push({\n          name,\n          min,\n          max,\n          step,\n          value: min > 0 ? Math.sqrt(max * min) : max / 2,\n        });\n      } else {\n        let current = params[index];\n        if (\n          current.min !== min ||\n          current.max !== max ||\n          current.step !== step\n        ) {\n          changeParams = true;\n          current.min = min;\n          current.max = max;\n          current.step = step;\n          current.value = min > 0 ? Math.sqrt(max * min) : max / 2;\n        }\n      }\n\n      usage[name] = (usage[name] || 0) + 1;\n    }\n\n    params.forEach((e) => {\n      if (usage[e.name] === 0) {\n        changeParams = true;\n        newParams = newParams.filter((e2) => e2.name !== e.name);\n      }\n    });\n\n    if (changeParams === true) setParams(newParams);\n  }, [code, params]);\n\n  const codeCompiled = useMemo(() => {\n    return compileJsSoundCode(code, params);\n  }, [code, params]);\n\n  let compute = useCallback(() => {\n    if (astate && astate.audioCtx && codeCompiled.valid === true) {\n      if (astate.gainNode) {\n        // astate.source.stop();\n        let duration = 0.05;\n        let N = (astate.audioCtx.sampleRate * duration) / 10.0;\n        var waveArray = new Float32Array(N);\n        for (var i = 0; i < N; i++) {\n          waveArray[i] = Math.pow(1.0 - i / (N - 1), 2);\n        }\n        astate.gainNode.gain.setValueCurveAtTime(\n          waveArray,\n          astate.audioCtx.currentTime,\n          0.05\n        );\n      }\n      var myArrayBuffer = astate.audioCtx.createBuffer(\n        2,\n        astate.audioCtx.sampleRate * 1,\n        astate.audioCtx.sampleRate\n      );\n      for (\n        var channel = 0;\n        channel < myArrayBuffer.numberOfChannels;\n        channel++\n      ) {\n        var nowBuffering = myArrayBuffer.getChannelData(channel);\n\n        let paramsVal = {};\n        params.forEach((e) => (paramsVal[e.name] = e.value));\n        for (var i = 0; i < myArrayBuffer.length; i++) {\n          try {\n            nowBuffering[i] = codeCompiled.func(\n              i,\n              astate.audioCtx.sampleRate,\n              channel,\n              paramsVal\n            );\n          } catch {\n            return;\n          }\n        }\n      }\n\n      let toSerialize = {\n        code,\n        params,\n      };\n\n      let objJsonStr = JSON.stringify(toSerialize);\n      let objJsonB64 = btoa(objJsonStr);\n\n      setQueryStringValue(\"data\", objJsonB64);\n\n      let source = astate.audioCtx.createBufferSource();\n      source.buffer = myArrayBuffer;\n\n      var gainNode = astate.audioCtx.createGain();\n      gainNode.gain.value = 1.0;\n      source.connect(gainNode);\n      gainNode.connect(astate.audioCtx.destination);\n\n      //   source.connect(astate.audioCtx.destination);\n      source.start();\n\n      drawBuffer(canvasRef.current, myArrayBuffer.getChannelData(0));\n\n      setAstate((old) => {\n        return { ...old, source, gainNode, hash: codeCompiled?.hash };\n      });\n    }\n  }, [astate, codeCompiled]);\n\n  useEffect(() => {\n    if (codeCompiled.valid === true && astate?.hash !== codeCompiled?.hash) {\n      compute();\n    }\n  }, [codeCompiled, compute, astate, params]);\n\n  useEffect(() => {\n    var audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n    setAstate({ audioCtx });\n  }, []);\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        background: \"#789\",\n        height: window.innerHeight,\n        overflow: \"hidden\",\n      }}\n    >\n      {/* <ReactFlow elements={elements} nodeTypes={nodeTypes} /> */}\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          background: \"#789\",\n          flex: \"1 1 auto\",\n        }}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"column\",\n            flex: \"1 60 auto\",\n            margin: \"10px\",\n            padding: \"10px\",\n            background: \"#EFF\",\n          }}\n        >\n          <button\n            onClick={() => {\n              compute();\n            }}\n          >\n            Start\n          </button>\n          <div style={{ fontSize: \"0.8em\", marginTop: \"10px\" }}>\n            <div> Write your sound function on the right !</div>\n            <div>\n              The function will be evaluated for every sample (usually 44100 per\n              second of playback) and played.\n            </div>\n            <div>\n              Sliders are auto-generated by comments starting with //use.\n            </div>\n          </div>\n\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              flex: \"1 1 auto\",\n              marginTop: \"20px\",\n              flexWrap: \"wrap\",\n            }}\n          >\n            {params.map((p) => (\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"row\",\n                }}\n              >\n                <RSlider\n                  name={p.name}\n                  min={p.min}\n                  max={p.max}\n                  step={p.step}\n                  value={p.value}\n                  onChange={(v) =>\n                    setParams((old) => {\n                      let arr = old.slice();\n                      let elem = arr.find((e) => e.name === p.name);\n                      if (elem) elem.value = v;\n                      return arr;\n                    })\n                  }\n                ></RSlider>\n              </div>\n            ))}\n          </div>\n\n          <div style={{ flex: \"5 1 auto\" }}></div>\n        </div>\n        <div\n          style={{\n            flex: \"1 1 auto\",\n            margin: \"10px\",\n            padding: \"10px\",\n            background: \"#EFF\",\n            maxWidth: \"890px\",\n          }}\n        >\n          <Editor\n            value={code}\n            onValueChange={(c) => setCode(c)}\n            highlight={(c) => highlight(c, languages.js)}\n            padding={10}\n            style={{\n              fontFamily: '\"Fira code\", \"Fira Mono\", monospace',\n              fontSize: 12,\n            }}\n          />\n        </div>\n      </div>\n\n      <div style={{ padding: \"10px\", flex: \"1 1 auto\" }}>\n        <canvas\n          ref={canvasRef}\n          width={window.innerWidth - 20 + \"\"}\n          height=\"300\"\n          style={{ width: window.innerWidth - 20 + \"px\", minHeight: \"50px\" }}\n        ></canvas>\n      </div>\n    </div>\n  );\n}\n","import { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport React from \"react\";\n\nfunction polarToCartesian(centerX, centerY, radius, angle) {\n  return {\n    x: centerX + radius * Math.cos(angle),\n    y: centerY + radius * Math.sin(angle),\n  };\n}\n\nfunction describeArc(x, y, radius, startAngle, endAngle) {\n  var start = polarToCartesian(x, y, radius, endAngle);\n  var end = polarToCartesian(x, y, radius, startAngle);\n\n  var largeArcFlag = endAngle - startAngle <= Math.PI ? \"0\" : \"1\";\n\n  var d = [\n    \"M\",\n    start.x,\n    start.y,\n    \"A\",\n    radius,\n    radius,\n    0,\n    largeArcFlag,\n    0,\n    end.x,\n    end.y,\n  ].join(\" \");\n\n  return d;\n}\n\nconst WIDTH = 120;\nconst WIDTH_HALF = WIDTH / 2.0;\n\nfunction SvgComponent({ angle }) {\n  let state = useMemo(() => {\n    let a2 = angle + Math.PI / 2.0;\n    let arcpaths = [describeArc(90, 90, 70, Math.PI / 2.0, a2)];\n    if (a2 >= Math.PI * 2.5) {\n      arcpaths = [\n        describeArc(90, 90, 70, Math.PI / 2.0, Math.PI * 1.99 + Math.PI / 2.0),\n        describeArc(90, 90, 70, Math.PI / 2.0, a2 % (Math.PI * 2)),\n      ];\n    }\n\n    let cx = 90 + 70 * Math.cos(a2);\n    let cy = 90 + 70 * Math.sin(a2);\n\n    return {\n      arcpaths,\n      cx,\n      cy,\n    };\n  }, [angle]);\n\n  return (\n    <svg\n      width={WIDTH}\n      height={WIDTH}\n      viewBox=\"0 0 180 180\"\n      style={{\n        padding: 5,\n        boxSizing: \"border-box\",\n      }}\n    >\n      <circle\n        r={70}\n        cx={90}\n        cy={90}\n        strokeWidth={5}\n        stroke=\"#e9eaee\"\n        fill=\"none\"\n      />\n\n      {state.arcpaths.map((d, index) => (\n        <path\n          d={d}\n          strokeLinecap=\"round\"\n          strokeWidth={20}\n          stroke={index === 0 ? \"#007aff\" : \"#000000\"}\n          fill=\"none\"\n        />\n      ))}\n\n      <circle r={20} cx={state.cx} cy={state.cy} fill=\"#fff\" cursor=\"pointer\" />\n    </svg>\n  );\n}\n\nfunction format(step, value) {\n  if (Math.round(step) !== step) {\n    return Math.round(value * (1.0 / step)) / (1.0 / step) + \"\";\n  } else {\n    return Math.round(value) + \"\";\n  }\n}\n\nexport default function RSlider({\n  min,\n  max,\n  step,\n  value,\n  onChange,\n  maxTurn,\n  name,\n}) {\n  let angle = useMemo(() => (Math.PI * 2 * (value - min)) / (max - min));\n\n  let ref = useRef();\n\n  let mousemove = useCallback(\n    (event) => {\n      const rectSize = ref.current.getBoundingClientRect();\n      const width = rectSize.width;\n      let center = width / 2;\n      let relativeX = event.clientX - rectSize.left;\n      let relativeY = event.clientY - rectSize.top;\n      let angleBetweenTwoVectors = Math.atan2(\n        relativeY - center,\n        relativeX - center\n      );\n\n      angleBetweenTwoVectors =\n        (angleBetweenTwoVectors + Math.PI * 2 - Math.PI / 2) % (Math.PI * 2);\n      angleBetweenTwoVectors /= Math.PI * 2;\n\n      if (!isNaN(angleBetweenTwoVectors)) {\n        let newValue = min + (max - min) * angleBetweenTwoVectors;\n        newValue = Math.max(\n          min,\n          Math.min(max, Math.round(newValue / step) * step)\n        );\n        onChange(newValue);\n      }\n    },\n    [onChange, min, max, step]\n  );\n\n  let [clicked, setClicked] = useState(false);\n\n  useEffect(() => {\n    window.addEventListener(\"mouseup\", () => setClicked(false));\n  }, []);\n\n  useEffect(() => {\n    if (clicked) {\n      window.addEventListener(\"mousemove\", mousemove);\n      return () => window.removeEventListener(\"mousemove\", mousemove);\n    }\n  }, [clicked, mousemove]);\n\n  return (\n    <div>\n      <div\n        ref={ref}\n        style={{\n          width: WIDTH + \"px\",\n          height: WIDTH + \"px\",\n          position: \"relative\",\n        }}\n        onMouseDown={(e) => {\n          setClicked(true);\n          mousemove(e);\n        }}\n      >\n        <SvgComponent angle={angle}></SvgComponent>\n        <div\n          style={{\n            position: \"absolute\",\n            top: \"50%\",\n            left: \"50%\",\n            transform: \"translate(-50%,-50%)\",\n          }}\n        >\n          <div style={{ fontSize: \"0.8em\", fontWeight: \"bold\", color: \"grey\" }}>\n            {name}\n          </div>\n          <div style={{ color: \"#007aff\" }}>{format(step, value)}</div>\n        </div>\n      </div>\n\n      {/* <input\n        type=\"range\"\n        min={min + \"\"}\n        max={max + \"\"}\n        step={step + \"\"}\n        value={value + \"\"}\n        // onChange={(e) => onChange(e.target.value)}\n      ></input> */}\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport EditorFrag from \"./frag/Editor\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <EditorFrag></EditorFrag>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}